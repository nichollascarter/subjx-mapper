(this["webpackJsonpsubjx-mapper"]=this["webpackJsonpsubjx-mapper"]||[]).push([[0],{170:function(e,t,n){e.exports=n(300)},175:function(e,t,n){},180:function(e,t,n){},300:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),o=n.n(i),l=(n(175),n(21)),c=n(159),s=n(365),u=(n(180),n(73)),d=n(12),p=n(142),b=n.n(p),m=n(35),h=n(24),f=function(){function e(t){Object(m.a)(this,e),this.stack=[null],this.step=-1,this.self=t}return Object(h.a)(e,[{key:"next",value:function(){var e=this.stack;null!==e[e.length-1]&&(this.step++,e.push(null))}},{key:"setItem",value:function(e){var t=this.stack;t[t.length-1]=e,t.length>9&&t.shift()}},{key:"push",value:function(e){this.step++,this.stack.splice(this.step),this.stack.push(e)}},{key:"undo",value:function(){var e,t=this.stack;return this.step>=0?(e=t[this.step],this.step--,e):null}},{key:"redo",value:function(){var e=this.stack;return this.step=-1===this.step?0:this.step,e.length-1>this.step?e[this.step++]:null}},{key:"invalidateAll",value:function(){this.stack=[],this.step=-1}}]),e}();function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={editorAction:"edit",editorGrid:!0,editorGridSize:10,editorPaperSize:{width:800,height:600},allowDragging:!0,allowResizing:!0,allowRotating:!0,allowProportions:!0,allowRestrictions:!1,snapSteps:{x:10,y:10,angle:15},eventBus:new b.a,undoStack:new f,items:[]};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v({},y),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EDITOR_ACTION":return v({},e,{editorAction:t.editorAction});case"ACTIVATE_EDITOR_GRID":return v({},e,{editorGrid:t.editorGrid});case"SET_EDITOR_GRID_SIZE":return v({},e,{editorGridSize:t.editorGridSize});case"SET_EDITOR_PAPER_SIZE":return v({},e,{editorPaperSize:t.editorPaperSize});case"SET_ALLOW_DRAGGING":return v({},e,{allowDragging:t.allowDragging});case"SET_ALLOW_RESIZING":return v({},e,{allowResizing:t.allowResizing});case"SET_ALLOW_ROTATING":return v({},e,{allowRotating:t.allowRotating});case"SET_ALLOW_PROPORTIONS":return v({},e,{allowProportions:t.allowProportions});case"SET_ALLOW_RESTRICTIONS":return v({},e,{allowRestrictions:t.allowRestrictions});case"SET_SNAP_STEPS":return v({},e,{snapSteps:t.snapSteps});case"SET_SELECTED_ITEMS":return v({},e,{items:t.items});default:return e}},O=Object(u.b)(E),w=n(18),j=n(7),x=n(4),S=n(330),k=n(20),C=n(146),N=n.n(C),P=n(147),D=(n(192),n(363)),A=n(370),R=n(335),z=n(362),L=n(364),T=n(157),I=n.n(T),G=n(105),_=n.n(G),B=n(333),W=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)("matrix(1,0,0,1,0,0)"),i=Object(j.a)(n,2),o=i[0],l=i[1],c={x:0,y:0,oldX:0,oldY:0,button:!1},s=[1,0,0,1,0,0],u=1,d={x:0,y:0},p=function(){var e=s,t=!0;return{applyTo:function(){t&&this.update(),l("matrix(".concat(e.join(","),")"))},update:function(){t=!1,e[3]=e[0]=u.toFixed(5),e[2]=e[1]=0,e[4]=d.x.toFixed(5),e[5]=d.y.toFixed(5)},pan:function(e){t&&this.update(),d.x+=e.x,d.y+=e.y,t=!0},scaleAt:function(e,n){var a=u*n;a<.4||a>5||(t&&this.update(),u*=n,d.x=e.x-(e.x-d.x)*n,d.y=e.y-(e.y-d.y)*n,t=!0)}}}(),b=Object(a.useCallback)((function(n){if(!1!==e.enable){var a=t.current;"mousedown"===n.type&&(c.button=!0),"mouseup"!==n.type&&"mouseout"!==n.type||(c.button=!1),c.oldX=c.x,c.oldY=c.y,c.x=n.clientX,c.y=n.clientY,c.button&&(p.pan({x:c.x-c.oldX,y:c.y-c.oldY}),p.applyTo(a)),n.preventDefault()}})),m=[["mousemove",b],["mousedown",b],["mouseup",b],["mouseout",b],["wheel",Object(a.useCallback)((function(n){if(!1!==e.enable){var a=t.current,r=a.parentNode.getBoundingClientRect(),i=n.clientX-r.left,o=n.clientY-r.top;p.scaleAt({x:i,y:o},n.deltaY<0?1.1:1/1.1),p.applyTo(a),n.preventDefault()}}),[e.enable])],["dblclick",Object(a.useCallback)((function(){u=1,d.x=d.y=0,s[0]=s[3]=1,s[1]=s[2]=s[4]=s[5]=0,p.pan(d),p.scaleAt({x:0,y:0},1),p.applyTo(t.current)}))]];return Object(a.useEffect)((function(){var n=t.current;return e.enable&&m.map((function(e){var t=Object(j.a)(e,2),a=t[0],r=t[1];n.parentNode.addEventListener(a,r,{passive:!1})})),function(){m.map((function(e){var t=Object(j.a)(e,2),a=t[0],r=t[1];n.parentNode.removeEventListener(a,r,{passive:!1})}))}}),[e.enable]),r.a.createElement("g",{id:"zoom-container",ref:t,transform:o},e.children)},M=n(3),$=n(74),V=n(75),H=n(82),U=n(76),X=n(148),Y=n.n(X);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z={container:"#editor-container",controlsContainer:"#controls-container",rotatorAnchor:"n",rotatorOffset:30},q=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).el=null,n.editable=!1,n.selectable=null,n.items=[],n.currentGroup=null,n.ignoreStoring=!1,n}return Object(H.a)(t,e),Object(h.a)(t,[{key:"shouldComponentUpdate",value:function(e){if(this.el&&e.content!==this.props.content)if(this.dropItems(),this.currentGroup=this.el,e.content&&e.content.childNodes)for(;e.content.childNodes.length;)this.el.appendChild(e.content.firstChild);else for(this.handleDropLayer();this.el.lastElementChild;)this.el.removeChild(this.el.lastElementChild);return e.dropLayer&&this.handleDropLayer(),!0!==e.dropItems&&e.editable||!this.items.length||this.dropItems(),e.selectable!==Boolean(this.selectable)&&(e.selectable&&(this.selectable=this.makeSelectables()),!e.selectable&&this.selectable&&(this.selectable.stop(),this.selectable=null)),!1}},{key:"componentDidMount",value:function(){this.currentGroup=this.el,this.handleClick=this.handleClick.bind(this),this.handleDoubleClick=this.handleDoubleClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleUndo=this.handleUndo.bind(this),this.handleRedo=this.handleRedo.bind(this),this.reloadDraggables=this.reloadDraggables.bind(this),this.el.addEventListener("mouseup",this.handleClick),this.el.addEventListener("dblclick",this.handleDoubleClick),document.addEventListener("keydown",this.handleKeyDown),this.el.classList.add("isolated-layer"),this.subscribeToEvents()}},{key:"componentWillUnmount",value:function(){this.el.removeEventListener("mouseup",this.handleClick),this.el.removeEventListener("dblclick",this.handleDoubleClick),document.removeEventListener("keydown",this.handleKeyDown)}},{key:"subscribeToEvents",value:function(){var e=this,t=this.props.eventBus;t.on("undo",this.handleUndo),t.on("redo",this.handleRedo),t.on("settingUpdated",this.reloadDraggables),Object.entries({fill:"fill",stroke:"stroke",thickness:"stroke-width",opacity:"opacity"}).map((function(n){var a=Object(j.a)(n,2),r=a[0],i=a[1];return t.on(r,(function(t){e.items.forEach((function(e){return e.el.setAttributeNS(null,i,t)}))}))})),Object.entries({l:"alignLeft",r:"alignRight",h:"alignHorizontal",t:"alignTop",b:"alignBottom",v:"alignVertical"}).map((function(n){var a=Object(j.a)(n,2),r=a[0],i=a[1];return t.on(i,(function(){return e.applyAlignment(r)}))}))}},{key:"setEditable",value:function(e){this.editable=e}},{key:"setDraggable",value:function(e){var t=this,n=this.items,a=this.props,r=a.undoStack,i=a.allowDragging,o=a.allowResizing,l=a.allowRotating,c=a.allowProportions,s=a.allowRestrictions,u=a.snapSteps,d=Object(U.a)(e).drag(K({},Z,{},s&&{restrict:"#editor-grid"},{draggable:i,resizable:o,rotatable:l,proportions:c,snap:{x:u.x,y:u.y,angle:u.y},onInit:function(){var e=this;console.log("Draggable:: ",this.el),this.options.scalable="text"===this.el.tagName.toLowerCase(),t.selectable&&t.props.selectable&&t.selectable.stop();var a=this.storage.handles.te,r=a.x1.baseVal.value,i=a.y1.baseVal.value,o=a.x2.baseVal.value,l=a.y2.baseVal.value,c=[r-o,i-l],s=t.calcTooltipPosition([o,l],c,-30,45),u=Object(j.a)(s,2),d=u[0],p=u[1],b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(".concat(d-12,", ").concat(p-12,")")),b.classList.add("delete-sjx-item");var m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"),m.setAttributeNS(null,"pointer-events","bounding-box"),m.setAttributeNS(null,"fill","rgb(237, 28, 36)"),b.addEventListener("click",(function(){n.splice(n.indexOf(e),1),e.disable(),e.el.parentNode.removeChild(e.el)})),b.appendChild(m),this.controls.appendChild(b)},onResize:function(e){var n=e.dx,a=e.dy;t.setEditable(!0);var i=this.storage.handles,o=i.tr,l=i.tl,c=l.cx.baseVal.value,s=l.cy.baseVal.value,u=o.cx.baseVal.value,d=o.cy.baseVal.value,p=[c-u,s-d],b=t.calcTooltipPosition([u,d],p,-30,45),m=Object(j.a)(b,2),h=m[0],f=m[1];if(this.controls.querySelector(".delete-sjx-item").setAttributeNS(null,"transform","translate(".concat(h-12,", ").concat(f-12,")")),t.ignoreStoring)return t.ignoreStoring=!1;var g=this.storage,v=g.revX,y=g.revY,E=g.doW,O=g.doH;r.setItem({name:"resize",el:this.el,data:{dx:n,dy:a,revX:v,revY:y,doW:E,doH:O}})},onMove:function(e){var n=e.dx,a=e.dy;if(t.setEditable(!0),t.ignoreStoring)return t.ignoreStoring=!1;r.setItem({name:"move",el:this.el,data:[n,a]})},onRotate:function(e){e.clientX,e.clientY,e.transform;var n=e.delta;if(t.setEditable(!0),t.ignoreStoring)return t.ignoreStoring=!1;r.setItem({name:"rotate",data:n,el:this.el})},onDrop:function(){if(setTimeout((function(){return t.setEditable(!1)}),100),t.ignoreStoring)return t.ignoreStoring=!1;r.next()},onDestroy:function(){setTimeout((function(){return t.setEditable(!1)}),100),this.el.classList.remove("subjx-selected"),t.selectable&&t.props.selectable&&t.selectable.start()}}));return this.props.eventBus.emit("settings",null,"item"),this.props.$setSelectedItems({items:Object(w.a)(d)}),d}},{key:"reloadDraggables",value:function(){var e=this.items.map((function(e){return e.disable(),e.el}));this.items=Object(w.a)(this.setDraggable(e))}},{key:"applyAlignment",value:function(e){var t=this;this.items.map((function(n){n.applyAlignment(e);var a=n.storage.handles.te,r=a.x1.baseVal.value,i=a.y1.baseVal.value,o=a.x2.baseVal.value,l=a.y2.baseVal.value,c=[r-o,i-l],s=t.calcTooltipPosition([o,l],c,-30,45),u=Object(j.a)(s,2),d=u[0],p=u[1];n.controls.querySelector(".delete-sjx-item").setAttributeNS(null,"transform","translate(".concat(d-12,", ").concat(p-12,")"))}))}},{key:"calcTooltipPosition",value:function(e,t,n,a){var r=Object(j.a)(e,2),i=r[0],o=r[1],l=Object(j.a)(t,2),c=l[0],s=l[1],u=Math.atan2(s,c)-a*Math.PI/180;return[Number(i)+n*Math.cos(u),Number(o)+n*Math.sin(u)]}},{key:"makeSelectables",value:function(){var e=this,t=new Y.a({selectables:this.currentGroup.children,area:this.props.root.current});return t.subscribe("callback",(function(t){for(var n=t.items,a=e.items;a.length>0;)a.pop().disable();if(n.length){var r=e.setDraggable(n);e.items=Object(w.a)(r)}})),t}},{key:"handleClick",value:function(e){if(!this.editable&&this.props.editable){var t=this.currentGroup,n=this.items,a=Object(w.a)(t.childNodes).find((function(t){return!(t.classList&&t.classList.contains("sjx-drag"))&&t.contains(e.target)}))||(t===e.target?e.target:null);if(a){if(e.stopPropagation(),!e.ctrlKey)for(;n.length>0;)n.pop().disable();var r=this.setDraggable(a);n.push.apply(n,Object(w.a)(r)),this.items=n}}}},{key:"handleDoubleClick",value:function(e){if(e.preventDefault(),!this.editable&&this.props.editable){var t=this.currentGroup,n=Object(w.a)(t.childNodes).find((function(t){return t.classList&&t.classList.contains("sjx-drag")&&t.contains(e.target)}));n&&"g"===n.tagName&&(this.dropItems(),this.currentGroup=n,this.props.onLayerChange(this.getLayerPath(n)),t.classList.remove("isolated-layer"),n.classList.add("isolated-layer"),this.applyCurrentGroupOpacity(n))}}},{key:"handleDropLayer",value:function(){var e=this.currentGroup;if(e===this.el)return this.props.onLayerChange(this.getLayerPath(e));this.dropItems(),e.classList.remove("isolated-layer");var t=e.parentNode;this.currentGroup=t,this.props.onLayerChange(this.getLayerPath(t)),this.dropCurrentGroupOpacity(e),this.applyCurrentGroupOpacity(t),t.classList.add("isolated-layer")}},{key:"getLayerPath",value:function(e){for(var t=e,n="";t!==this.el;)n=(t.getAttribute("id")||t.nodeName)+" / "+n,t=t.parentNode;return n}},{key:"dropItems",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.items;t.length>0;)t.pop().disable();this.items=e}},{key:"handleKeyDown",value:function(e){var t=this.items;if(46===e.keyCode)for(;t.length>0;){var n=t.pop();n.disable(),n.el.parentNode.removeChild(n.el)}else if(65===e.keyCode&&e.ctrlKey){for(;t.length>0;)t.pop().disable();e.preventDefault()}else 67===e.keyCode||86===e.keyCode||e.keyCode>36&&e.keyCode<41&&(e.preventDefault(),t.forEach((function(t){t.exeDrag({dx:37===e.keyCode||39===e.keyCode?37===e.keyCode?-10:10:0,dy:38===e.keyCode||40===e.keyCode?38===e.keyCode?-10:10:0})})))}},{key:"applyCurrentGroupOpacity",value:function(e){e.setAttributeNS(null,"opacity",1),e!==this.el&&(Object(w.a)(e.parentNode.childNodes).forEach((function(t){"g"===t.tagName&&t!==e&&t.setAttributeNS(null,"opacity",.3)})),this.applyCurrentGroupOpacity(e.parentNode))}},{key:"dropCurrentGroupOpacity",value:function(e){Object(w.a)(e.parentNode.childNodes).forEach((function(t){"g"===t.tagName&&t!==e&&t.setAttributeNS(null,"opacity",1)}))}},{key:"handleUndo",value:function(){var e=this.props.undoStack.undo();e&&(this.ignoreStoring=!0,this.handleAction(e,!0))}},{key:"handleRedo",value:function(){var e=this.props.undoStack.redo();e&&(this.ignoreStoring=!0,this.handleAction(e,!1))}},{key:"handleAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(this.dropItems(),e.name){case"rotate":var n=e.data,a=this.setDraggable(e.el);a.forEach((function(e){e.exeRotate({delta:n*(t?-1:1)}),e.disable()}));break;case"move":var r=Object(j.a)(e.data,2),i=r[0],o=r[1],l=this.setDraggable(e.el);l.forEach((function(e){e.exeDrag({dx:i*(t?-1:1),dy:o*(t?-1:1)}),e.disable()}));break;case"resize":var c=e.data,s=c.dx,u=c.dy,d=Object(M.a)(c,["dx","dy"]),p=this.setDraggable(e.el);p.forEach((function(e){e.exeResize(K({dx:s*(t?-1:1),dy:u*(t?-1:1)},d)),e.disable()}))}}},{key:"render",value:function(){var e=this;return r.a.createElement("g",{id:"editable-content",ref:function(t){return e.el=t}})}}]),t}(r.a.Component),J=Object(l.b)((function(e){return{editorGridSize:e.editorGridSize,allowDragging:e.allowDragging,allowResizing:e.allowResizing,allowRotating:e.allowRotating,allowProportions:e.allowProportions,allowRestrictions:e.allowRestrictions,snapSteps:e.snapSteps,eventBus:e.eventBus,undoStack:e.undoStack}}),(function(e){return{$setSelectedItems:function(t){return e({type:"SET_SELECTED_ITEMS",items:t.items})}}}))(q),Q=Object(S.a)((function(){return{root:{"-webkit-box-flex":1,"-ms-flex":1,flex:1,visibility:"visible"},workArea:{overflow:"auto"},canvas:{position:"absolute",top:0,left:0},canvasContent:{backgroundColor:"white"},page:{boxShadow:"0px 0px 2px 1px #d1d1d1"},layerBar:{position:"absolute",zIndex:99999,margin:4}}})),ee=function(e){var t=Q(),n=e.editorAction,i=e.editorGrid,o=e.editorGridSize,l=e.editorPaperSize,c=e.rightOffset,s=e.children,u=l.width,d=l.height,p=[window.outerWidth,window.outerHeight],b=p[0],m=p[1],h=Object(a.useState)({w:u,h:d,x:(b-u)/2,y:(m-d)/2}),f=Object(j.a)(h,2),g=f[0],v=f[1],y=null,E=null,O=Object(a.useRef)(null),w=Object(a.useRef)(null),x=Object(a.useRef)(null),S=Object(a.useState)(null),k=Object(j.a)(S,2),C=k[0],N=k[1],P=Object(a.useState)(null),D=Object(j.a)(P,2),A=D[0],R=D[1],z=Object(a.useState)(!1),L=Object(j.a)(z,2),T=L[0],I=L[1],G=Object(a.useState)({x:0,y:0}),_=Object(j.a)(G,2),M=_[0],$=_[1],V=Object(a.useState)(!1),H=Object(j.a)(V,2),U=H[0],X=H[1];Object(a.useEffect)((function(){!function(e){var t=w.current;t.scrollTop=(e.current.clientHeight-t.clientHeight)/2,t.scrollLeft=(e.current.clientWidth-t.clientWidth)/2}(O)}),[g]),Object(a.useEffect)((function(){v({w:u,h:d,x:(b-u)/2,y:(m-d)/2})}),[e.editorPaperSize]);var Y=function(e,t,n){var a=e.createSVGPoint();return a.x=t,a.y=n,a.matrixTransform(e.getScreenCTM().inverse())},F=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttributeNS(null,"stroke-width",2),t.setAttributeNS(null,"fill","none"),t.setAttributeNS(null,"stroke","#000");var n=document.getElementById("editor-background"),a=Y(n,e.clientX,e.clientY);document.getElementById("editable-content").appendChild(t);var r=function(e){var r=Y(n,e.clientX,e.clientY),i=Math.abs(r.x-a.x),o=Math.abs(r.y-a.y);r.x>a.x&&(r.x=a.x),r.y>a.y&&(r.y=a.y),t.setAttributeNS(null,"x",r.x),t.setAttributeNS(null,"y",r.y),t.setAttributeNS(null,"width",i),t.setAttributeNS(null,"height",o)};n.addEventListener("mousemove",r),n.addEventListener("mouseup",(function e(){n.removeEventListener("mousemove",r),n.removeEventListener("mouseup",e)}))};return r.a.createElement("div",{className:t.root},A&&r.a.createElement("p",{className:t.layerBar},A,r.a.createElement(B.a,{style:{marginLeft:2},variant:"contained",color:"primary",size:"small",onMouseUp:function(e){e.stopPropagation(),I(!0)}},"Exit")),r.a.createElement("div",{id:"work-area",ref:w,className:t.workArea,style:{top:0,left:0,right:c,bottom:0,position:"absolute",cursor:"auto",overflow:"scroll"},onMouseMove:function(e){switch(e.preventDefault(),C){case"grab":var t=1*(M.x-e.clientX),n=1*(M.y-e.clientY),a=w.current;a.scrollTop=M.scrollTop+n,a.scrollLeft=M.scrollLeft+t}},onMouseDown:function(t){switch(t.preventDefault(),n){case"edit":if(E.contains(t.target))return;if(!y.children[0].contains(t.target))return X(!0),e.eventBus.emit("settings",null,"canvas"),setTimeout((function(){return X(!1)}),100);break;case"grab":var a=w.current;$({x:t.clientX,y:t.clientY,scrollTop:a.scrollTop,scrollLeft:a.scrollLeft});break;case"select":case"zoom":break;case"drawRect":F(t)}N(n)},onMouseUp:function(){N(null)}},r.a.createElement("div",{ref:O,style:{display:"inline-block",position:"relative",width:b,height:m}},r.a.createElement("svg",{id:"editor-container",xmlns:"http://www.w3.org/2000/svg",className:t.canvas,width:"100%",height:"100%",overflow:"visible",ref:x},r.a.createElement(W,{enable:"zoom"===n},r.a.createElement("g",{id:"content",transform:"translate(".concat(g.x,", ").concat(g.y,")")},r.a.createElement("g",{id:"editor-background"},r.a.createElement("rect",{id:"editor-grid",x:"0",y:"0",width:g.w,height:g.h,fill:"white",stroke:"grey"}),i?function(e,t){var n=10*t;return r.a.createElement("g",null,r.a.createElement("defs",null,r.a.createElement("pattern",{id:"smallGrid",width:t,height:t,fill:"white",patternUnits:"userSpaceOnUse"},r.a.createElement("path",{d:"M ".concat(t," 0 L 0 0 0 ").concat(t),fill:"none",stroke:"gray",strokeWidth:"0.5",vectorEffect:"non-scaling-stroke"})),r.a.createElement("pattern",{id:"grid",width:n,height:n,patternUnits:"userSpaceOnUse"},r.a.createElement("rect",{width:n,height:n,fill:"url(#smallGrid)"}),r.a.createElement("path",{d:"M ".concat(n," 0 L 0 0 0 ").concat(n),fill:"none",stroke:"gray",strokeWidth:"1",vectorEffect:"non-scaling-stroke"}))),r.a.createElement("rect",{x:"0",y:"0",width:e.w,height:e.h,fill:"url(#grid)"}))}(g,o):null),r.a.createElement("g",{id:"editor-canvas",ref:function(e){return y=e},className:t.page},r.a.createElement(J,{root:x,editable:"edit"===n,selectable:"select"===n,content:s,onLayerChange:function(e){R(e),I(!1)},dropLayer:T,dropItems:U})))),r.a.createElement("g",{id:"controls-container",ref:function(e){return E=e}})))))};ee.defaultProps={grid:!0,mouseAction:"edit",initialW:800,initialH:600};var te=Object(l.b)((function(e){return{editorAction:e.editorAction,editorGrid:e.editorGrid,editorGridSize:e.editorGridSize,editorPaperSize:e.editorPaperSize,eventBus:e.eventBus}}))(ee),ne=n(6),ae=n(336),re=n(337),ie=n(338),oe=n(339),le=n(340),ce=n(341),se=n(342),ue=n(343),de=n(344),pe=n(345),be=n(346),me=n(347),he=n(348),fe=Object(S.a)((function(){return{root:{display:"flex",alignItems:"center",height:"100%"},flex:{display:"flex",alignItems:"center",height:"100%",marginLeft:10},verticalDivider:{width:"1px",backgroundColor:"white",height:"30px"},toolbar:{display:"flex",alignItems:"center",padding:2,marginRight:5}}})),ge=Object(ne.a)({root:{color:"rgba(0,0,0,0.65)",padding:6}})(R.a),ve=Object(l.b)((function(e){return{editorAction:e.editorAction,editorGrid:e.editorGrid,eventBus:e.eventBus}}),(function(e){return{$setEditorAction:function(t){return e({type:"SET_EDITOR_ACTION",editorAction:t.editorAction})},$activateEditorGrid:function(t){return e({type:"ACTIVATE_EDITOR_GRID",editorGrid:t.editorGrid})}}}))((function(e){var t=fe(),n=e.editorAction,a=e.editorGrid,i=e.eventBus,o=function(t){return function(){e.$setEditorAction({editorAction:t})}},l=function(t){e.$activateEditorGrid({editorGrid:t})},c=[{type:"button",selected:"showLayers"===n,component:r.a.createElement(ae.a,null),action:function(){return"showLayers"}},{type:"divider"},{type:"button",selected:"edit"===n,component:r.a.createElement(re.a,null),action:o("edit")},{type:"button",selected:"select"===n,component:r.a.createElement(ie.a,null),action:o("select")},{type:"button",selected:"grab"===n,component:r.a.createElement(oe.a,null),action:o("grab")},{type:"button",selected:"zoom"===n,component:r.a.createElement(le.a,null),action:o("zoom")},{type:"divider"},{type:"button",selected:"alignLeft"===n,component:r.a.createElement(ce.a,{transform:"rotate(90)"}),action:function(){return i.emit("alignLeft")}},{type:"button",selected:"alignHorizontal"===n,component:r.a.createElement(se.a,{transform:"rotate(90)"}),action:function(){return i.emit("alignHorizontal")}},{type:"button",selected:"alignRight"===n,component:r.a.createElement(ce.a,{transform:"rotate(-90)"}),action:function(){return i.emit("alignRight")}},{type:"button",selected:"alignTop"===n,component:r.a.createElement(ce.a,{transform:"rotate(180)"}),action:function(){return i.emit("alignTop")}},{type:"button",selected:"alignVertical"===n,component:r.a.createElement(se.a,{transform:"rotate(180)"}),action:function(){return i.emit("alignVertical")}},{type:"button",selected:"alignBottom"===n,component:r.a.createElement(ce.a,null),action:function(){return i.emit("alignBottom")}},{type:"divider"},{type:"button",selected:!0===a,component:r.a.createElement(ue.a,null),action:function(){return l(!0)}},{type:"button",selected:!1===a,component:r.a.createElement(de.a,null),action:function(){return l(!1)}},{type:"divider"},{type:"button",selected:!1,component:r.a.createElement(pe.a,null),action:function(){return i.emit("undo")}},{type:"button",selected:!1,component:r.a.createElement(be.a,null),action:function(){return i.emit("redo")}}],s=[{type:"button",selected:!1,component:r.a.createElement(me.a,null),action:function(){return i.emit("settings",null,"item")}},{type:"button",selected:!1,component:r.a.createElement(he.a,null),action:function(){return i.emit("settings",null,"canvas")}}];return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.flex},c.map((function(e,n){var a=e.type,i=e.component,o=e.action,l=e.selected;e.value;return r.a.createElement("div",{key:"".concat(n,"button"),className:t.toolbar},"divider"!==a?r.a.createElement(ge,{disabled:l,onClick:function(){return o()}},i):r.a.createElement("div",{className:t.verticalDivider}))}))),r.a.createElement("div",{className:t.flex,style:{width:"100%",justifyContent:"flex-end"}},s.map((function(e,n){var a=e.type,i=e.component,o=e.action,l=e.selected;e.value;return r.a.createElement("div",{key:"".concat(n,"button"),className:t.toolbar},"divider"!==a?r.a.createElement(ge,{disabled:l,onClick:function(){return o()}},i):r.a.createElement("div",{className:t.verticalDivider}))}))))})),ye=n(103),Ee=n.n(ye),Oe=n(149),we=n(150),je=n.n(we),xe=n(151),Se=n.n(xe),ke=n(152),Ce=n.n(ke);function Ne(e){return new Promise((function(t,n){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var a=new FileReader,r="";e.files&&e.files[0]&&(a.onload=function(e){r=e.target.result,t(r)},a.readAsText(e.files[0]))}else n()}))}var Pe=Object(S.a)((function(e){return{root:{display:"flex",justifyContent:"center",padding:"0 8px"},extendedIcon:{marginRight:e.spacing(1)}}})),De=Object(ne.a)({root:{color:"#fff",marginRight:"10px"}})(R.a),Ae=function(e){var t=Pe(),n=Object(a.useState)(document.createElement("input")),i=Object(j.a)(n,2),o=i[0],l=i[1];Object(a.useEffect)((function(){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.setAttribute("id","file-upload"),t.style.display="none",l(t);var n=function(){var t=Object(Oe.a)(Ee.a.mark((function t(n){var a;return Ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ne(n.target);case 3:a=t.sent,e.onImport(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();t.addEventListener("change",n,!1)}),[e]);return r.a.createElement("div",{className:t.root},r.a.createElement(De,{onClick:function(e){o.click(),e.preventDefault(),e.target.value=""}},r.a.createElement(je.a,null)),r.a.createElement(De,{onClick:function(){e.onExport()}},r.a.createElement(Se.a,null)),r.a.createElement(De,{onClick:function(){return e.onClearArea()}},r.a.createElement(Ce.a,null)))},Re=n(352),ze=n(353),Le=n(354),Te=n(355),Ie=n(349),Ge=n(350),_e=n(351),Be=[["rectangle",Ie.a],["circle",Ge.a],["shape",_e.a],["text",me.a]],We=function(e){var t=[],n=Object(a.useState)(!1),i=Object(j.a)(n,2),o=i[0],l=i[1],c={appendTo:"body",stack:"#editor-background",style:{border:"none",background:"transparent",maxWidth:"150px",textColor:"transparent"},onInit:function(){},onDrop:function(t){var n=this.el.getAttribute("data-type"),a=null,i=document.querySelector("#editor-background"),o=i.getBoundingClientRect(),l=t.clientX-o.left+i.scrollLeft,c=t.clientY-o.top+i.scrollTop;switch(n){case"rectangle":a=["rect",{x:l,y:c,width:150,height:100,stroke:"black",fill:"transparent"}];break;case"circle":a=["ellipse",{cx:l,cy:c,rx:45,ry:45,stroke:"black",fill:"transparent"}];break;case"shape":a=["polygon",{strokeWidth:"1",stroke:"black",fill:"transparent",strokeDasharray:"0",points:"".concat(l+80,",").concat(c," ").concat(l+160,",").concat(c+50," ").concat(l+80,",").concat(c+100," ").concat(l,",").concat(c+50)},[]];break;case"image":a=["foreignObject",{x:l,y:c,width:150,height:100,stroke:"black",fill:"transparent"},[["div",{display:"block"},["text"]]]];break;case"text":a=["text",{x:l,y:c,textLength:150},r.a.createElement("tspan",{},"text")]}e.onDrop(t,a)}};return Object(a.useEffect)((function(){o||(t.forEach((function(e){return Object(U.a)(e).clone(c)})),l(!0))}),[t,o,c]),r.a.createElement(Re.a,null,Be.map((function(e){var n=Object(j.a)(e,2),a=n[0],i=n[1];return r.a.createElement(ze.a,{"data-type":a,ref:function(e){return t.push(e)},button:!0,key:a},r.a.createElement(Le.a,null,r.a.createElement(i,null)),r.a.createElement(Te.a,{primary:a}))})))},Me=n(369),$e=n(359),Ve=n(358),He=n(360),Ue=n(61),Xe=n(361),Ye=n(372),Fe=n(368);function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ze=Object(S.a)((function(){return{root:{position:"absolute",right:0,top:0,bottom:0,backgroundColor:"#fdfdfd",zIndex:999},container:{display:"flex",flex:1},containerColumn:{display:"flex",flexDirection:"column"},padding:{padding:10},label:{paddingLeft:10}}})),qe=Object(ne.a)({root:{margin:10,"& .MuiOutlinedInput-input":{padding:"10px 10px"}}})(Me.a),Je=Object(ne.a)({root:{margin:"0"}})($e.a),Qe=Object(l.b)((function(e){return{editorPaperSize:e.editorPaperSize,allowDragging:e.allowDragging,allowResizing:e.allowResizing,allowRotating:e.allowRotating,allowProportions:e.allowProportions,allowRestrictions:e.allowRestrictions,snapSteps:e.snapSteps,editorGridSize:e.editorGridSize,eventBus:e.eventBus}}),(function(e){return{$setEditorPaperSize:function(t){return e({type:"SET_EDITOR_PAPER_SIZE",editorPaperSize:t.editorPaperSize})},$setAllowDragging:function(t){return e({type:"SET_ALLOW_DRAGGING",allowDragging:t.allowDragging})},$setAllowResizing:function(t){return e({type:"SET_ALLOW_RESIZING",allowResizing:t.allowResizing})},$setAllowRotating:function(t){return e({type:"SET_ALLOW_ROTATING",allowRotating:t.allowRotating})},$setAllowProportions:function(t){return e({type:"SET_ALLOW_PROPORTIONS",allowProportions:t.allowProportions})},$setAllowRestrictions:function(t){return e({type:"SET_ALLOW_RESTRICTIONS",allowRestrictions:t.allowRestrictions})},$setSnapSteps:function(t){return e({type:"SET_SNAP_STEPS",snapSteps:t.snapSteps})},$setEditorGridSize:function(t){return e({type:"SET_EDITOR_GRID_SIZE",editorGridSize:t.editorGridSize})}}}))((function(e){var t=Ze(),n=e.editorPaperSize,i=n.width,o=n.height,l=e.allowDragging,c=e.allowResizing,s=e.allowRotating,u=e.allowProportions,p=e.allowRestrictions,b=e.editorGridSize,m=e.snapSteps,h=Object(a.useState)({width:i,height:o}),f=Object(j.a)(h,2),g=f[0],v=f[1],y=Object(a.useState)(l),E=Object(j.a)(y,2),O=E[0],w=E[1],x=Object(a.useState)(c),S=Object(j.a)(x,2),k=S[0],C=S[1],N=Object(a.useState)(s),P=Object(j.a)(N,2),D=P[0],A=P[1],R=Object(a.useState)(u),L=Object(j.a)(R,2),T=L[0],I=L[1],G=Object(a.useState)(p),_=Object(j.a)(G,2),B=_[0],W=_[1],M=Object(a.useState)(m),$=Object(j.a)(M,2),V=$[0],H=$[1],U=function(t){var n=Object(j.a)(t,2),a=n[0],r=n[1];if(!(Number(a)<1||Number(r)<1)){var i={width:a,height:r};v(i),e.$setEditorPaperSize({editorPaperSize:i})}},X=function(t){return function(n){var a=n.target.checked;switch(t){case"drag":w(a),e.$setAllowDragging({allowDragging:a});break;case"resize":C(a),e.$setAllowResizing({allowResizing:a});break;case"rotate":A(a),e.$setAllowRotating({allowRotating:a});break;case"proportions":I(a),e.$setAllowProportions({allowProportions:a});break;case"restrictions":W(a),e.$setAllowRestrictions({allowRestrictions:a})}}},Y=function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},V,{},t);H(n),e.$setSnapSteps({snapSteps:n})};return r.a.createElement("div",{className:t.root,style:{width:e.width}},r.a.createElement(Ve.a,{component:"fieldset"},r.a.createElement(He.a,{"aria-label":"position"},r.a.createElement("div",{className:t.padding},r.a.createElement(Ue.a,{className:t.label,variant:"subtitle1",align:"left"},"Canvas"),r.a.createElement("div",{className:t.container},r.a.createElement(qe,{label:"width",value:g.width,variant:"outlined",size:"small",onChange:function(e){return U([e.target.value,g.height])}}),r.a.createElement(qe,{label:"height",value:g.height,variant:"outlined",size:"small",onChange:function(e){return U([g.width,e.target.value])}})),r.a.createElement(Xe.a,{container:!0},r.a.createElement(Xe.a,{item:!0,xs:12},r.a.createElement(Ue.a,{className:t.label,variant:"subtitle1",align:"left"},"Grid size"),r.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:"0 10px"}},r.a.createElement(Ye.a,{valueLabelDisplay:"auto",value:b,onChange:function(t,n){return e.$setEditorGridSize({editorGridSize:n})},step:10}))))),r.a.createElement(z.a,null),r.a.createElement("div",{className:t.padding},r.a.createElement(Ue.a,{className:t.label,variant:"subtitle1",align:"left"},"Effects"),r.a.createElement("div",{className:t.containerColumn},r.a.createElement(Je,{value:O,control:r.a.createElement(Fe.a,{checked:O,color:"primary",onChange:X("drag")}),label:"Allow dragging",labelPlacement:"end"}),r.a.createElement(Je,{value:k,control:r.a.createElement(Fe.a,{checked:k,color:"primary",onChange:X("resize")}),label:"Allow resizing",labelPlacement:"end"}),r.a.createElement(Je,{value:D,control:r.a.createElement(Fe.a,{checked:D,color:"primary",onChange:X("rotate")}),label:"Allow rotating",labelPlacement:"end"}),r.a.createElement(Je,{value:T,control:r.a.createElement(Fe.a,{checked:T,color:"primary",onChange:X("proportions")}),label:"Keep aspect ratio",labelPlacement:"end"}),r.a.createElement(Je,{value:B,control:r.a.createElement(Fe.a,{checked:B,color:"primary",onChange:X("restrictions")}),label:"Activate bounding area",labelPlacement:"end"}))),r.a.createElement(z.a,null),r.a.createElement("div",{className:t.padding},r.a.createElement(Ue.a,{className:t.label,variant:"subtitle1",align:"left"},"Snap"),r.a.createElement(Xe.a,{container:!0},r.a.createElement(Xe.a,{item:!0,xs:6},r.a.createElement(qe,{label:"grid step x",value:V.x,variant:"outlined",size:"small",onChange:function(e){return Y({x:Number(e.target.value)})}})),r.a.createElement(Xe.a,{item:!0,xs:6},r.a.createElement(qe,{label:"grid step y",value:V.y,variant:"outlined",size:"small",onChange:function(e){return Y({y:Number(e.target.value)})}}))),r.a.createElement(Xe.a,{container:!0},r.a.createElement(Xe.a,{item:!0,xs:6},r.a.createElement(qe,{label:"snap angle",value:V.angle,variant:"outlined",size:"small",onChange:function(e){return Y({angle:Number(e.target.value)})}})))))))})),et=n(158);function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var at=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={displayColorPicker:!1,currentColor:{hex:n.props.initValue||n.props.value||"transparent"},popover:{position:"absolute",zIndex:"9999",top:0,left:0}},n.handleClick=function(e){var t=e.clientX,a=e.clientY,r=e.target,i=r.clientWidth;r.clientHeight;n.setState({displayColorPicker:!n.state.displayColorPicker,popover:nt({},n.state.popover,{left:t-i,top:a})})},n.handleClose=function(){n.setState({displayColorPicker:!1})},n.handleChange=function(e){n.setState({currentColor:e}),n.props.onChange(e)},n}return Object(H.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(){this.props.value!==this.state.currentColor.hex&&this.setState({currentColor:{hex:this.props.value}})}},{key:"render",value:function(){return r.a.createElement("div",{className:this.props.classes.root},r.a.createElement("div",{className:this.props.classes.wrapper},r.a.createElement("div",{className:this.props.classes.colorPicker,onClick:this.handleClick,style:{backgroundColor:this.state.currentColor.hex}})),this.state.displayColorPicker?o.a.createPortal(r.a.createElement("div",{style:this.state.popover},r.a.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:this.handleClose}),r.a.createElement(et.a,{color:this.state.currentColor,onChange:this.handleChange})),document.body):null)}}]),t}(r.a.Component),rt=Object(ne.a)((function(){var e,t;return{root:(e={width:"50%",padding:0,border:0,margin:0,display:"inline-flex"},Object(d.a)(e,"padding",0),Object(d.a)(e,"position","relative"),Object(d.a)(e,"flexDirection","column"),Object(d.a)(e,"verticalAlign","top"),e),wrapper:{padding:10,color:"rgba(0, 0, 0, 0.87)",cursor:"text",display:"inline-flex",position:"relative",fontSize:"1rem",boxSizing:"border-box",alignItems:"center",lineHeight:"1.0876em"},colorPicker:(t={flex:"0 1 100%",border:0,height:"1.0876em",margin:0,display:"block",padding:"6px 0 7px",minWidth:0,background:"none",boxSizing:"content-box"},Object(d.a)(t,"border","2px solid #c7c7c7"),Object(d.a)(t,"borderRadius",4),t)}}))(at),it=n(162),ot=n(366),lt=Object(ne.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,paddingLeft:10,transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(it.a),ct=Object(S.a)((function(){return{root:{position:"absolute",right:0,top:0,bottom:0,backgroundColor:"#fdfdfd",zIndex:999},container:{display:"flex",flex:1},containerColumn:{display:"flex",flexDirection:"column"},padding:{padding:10},label:{paddingLeft:10,width:"50%"}}})),st=Object(l.b)((function(e){return{eventBus:e.eventBus,selectedItems:e.items}}))((function(e){var t=ct(),n=e.eventBus,i=e.selectedItems,o=Object(a.useState)("none"),l=Object(j.a)(o,2),c=l[0],s=l[1],u=Object(a.useState)("none"),d=Object(j.a)(u,2),p=d[0],b=d[1],m=Object(a.useState)("none"),h=Object(j.a)(m,2),f=h[0],g=h[1],v=Object(a.useState)("none"),y=Object(j.a)(v,2),E=y[0],O=y[1],w=Object(a.useState)(2),x=Object(j.a)(w,2),S=x[0],k=x[1],C=Object(a.useState)(100),N=Object(j.a)(C,2),P=N[0],D=N[1],A=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case"fill":s(t),a&&n.emit(e,null,t);break;case"fillOptions":var r="color"===p?c:"none";s(r),a&&n.emit(e,null,r);break;case"stroke":g(t),a&&n.emit(e,null,t);break;case"thickness":var i=null===t?2:t;k(Number(i)),a&&n.emit(e,null,Number(i));break;case"opacity":var o=null===t?1:t;D(100*Number(o)),a&&n.emit(e,null,Number(o))}};return Object(a.useEffect)((function(){i.length&&Object.entries({fill:"fill",stroke:"stroke",thickness:"stroke-width",opacity:"opacity"}).map((function(e){var t=Object(j.a)(e,2),n=t[0],a=t[1];A(n,i[0].el.getAttributeNS(null,a),!1)}))}),[i]),r.a.createElement("div",{className:t.root,style:{width:e.width}},r.a.createElement(Ve.a,{component:"fieldset",style:{width:"100%"}},r.a.createElement(He.a,{"aria-label":"position"},r.a.createElement("div",{className:t.padding},r.a.createElement("div",{className:t.container},r.a.createElement(Ue.a,{className:t.label,variant:"subtitle1",align:"left"},"Fill")),r.a.createElement("div",{className:t.container},r.a.createElement(rt,{value:c,onChange:function(e){return A("fill",e.hex)}}),r.a.createElement(ot.a,{style:{width:"50%",padding:10},variant:"outlined",native:!0,value:p,onChange:function(e){return b(e.target.value)},name:"age",input:r.a.createElement(lt,null)},r.a.createElement("option",{value:"none"},"none"),r.a.createElement("option",{value:"color"},"color"))),r.a.createElement("div",{className:t.container},r.a.createElement(Ue.a,{className:t.label,variant:"subtitle1",align:"left"},"Stroke")),r.a.createElement("div",{className:t.container},r.a.createElement(rt,{value:f,onChange:function(e){return A("stroke",e.hex)}}),r.a.createElement(ot.a,{style:{width:"50%",padding:10},variant:"outlined",native:!0,value:E,onChange:function(e){return O(e.target.value)},name:"age",input:r.a.createElement(lt,null)},r.a.createElement("option",{value:"none"},"none"),r.a.createElement("option",{value:"color"},"color"))),r.a.createElement("div",{className:t.container},r.a.createElement(Xe.a,{item:!0,xs:12},r.a.createElement(Ue.a,{className:t.label,variant:"subtitle1",align:"left"},"Thickness"),r.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:"0 10px"}},r.a.createElement(Ye.a,{valueLabelDisplay:"auto",max:30,value:S,onChange:function(e,t){return A("thickness",t)},step:1}))))),r.a.createElement(z.a,null),r.a.createElement("div",{className:t.padding},r.a.createElement("div",{className:t.container},r.a.createElement(Xe.a,{item:!0,xs:12},r.a.createElement(Ue.a,{className:t.label,variant:"subtitle1",align:"left"},"Opacity"),r.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:"0 10px"}},r.a.createElement(Ye.a,{valueLabelDisplay:"auto",max:100,value:P,onChange:function(e,t){return A("opacity",t/100)},step:1}))))),r.a.createElement(z.a,null))))}));function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pt=["g","rect","path","polygon","polyline","circle","ellipse","text","line","foreighobject"],bt=Object(S.a)((function(e){return{root:{display:"flex",marginTop:46,minHeight:"calc(100vh - 46px)",height:"calc(100vh - 46px)",justifyItems:"center",backgroundColor:"#e6e5e5"},menu:{display:"flex",position:"absolute",top:0,left:0,height:46,width:"100%",zIndex:999,backgroundColor:e.palette.primary.main},canvas:{flexGrow:1},canvasContainer:{display:"flex",flex:1,flexDirection:"column"},appBar:{borderTop:"1px solid #fff",color:"rgba(0,0,0,0.65)",backgroundColor:"rgb(230 229 229)",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),position:"relative",height:46},appBarShift:{transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerPaper:{position:"relative",backgroundColor:"#fdfdfd"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(d.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(7)+1}),toolbar:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},content:{flexGrow:1,padding:e.spacing(2)}}})),mt=Object(l.b)((function(e){return{eventBus:e.eventBus}}))((function(e){var t,n,i=bt(),l=Object(k.a)(),c=Object(a.useState)(!1),s=Object(j.a)(c,2),u=s[0],p=s[1],b=Object(a.useState)(57),m=Object(j.a)(b,2),h=m[0],f=m[1],g=Object(a.useState)(null),v=Object(j.a)(g,2),y=v[0],E=v[1],O=Object(a.useState)("canvas"),S=Object(j.a)(O,2),C=S[0],T=S[1],G=new CSSStyleSheet,B=function(e){for(var t={},n=G.rules||G.cssRules,a=0;a<n.length;a++)if(n[a].selectorText===e)for(var r=0;r<n[a].style.length;r++){var i=n[a].style.item(r);t=dt({},t,Object(d.a)({},i,n[a].style[i]))}return t},W={replace:function(e){if("style"===e.name){var t=new CSSStyleSheet;return t.replace(e.children[0].data),Object(w.a)(t.rules).map((function(e){return G.insertRule(e.cssText,G.cssRules.length)})),r.a.createElement(r.a.Fragment,null)}if("use"===e.name){var n=e.attribs["xlink:href"]||e.attribs.href;if(!n)return e;e.parent.children.find((function(e){return e.attribs&&"#"+e.attribs.id===n}))}if("tag"===e.type&&-1!==pt.indexOf(e.name)){e.attribs=e.attribs||{};var a=e.attribs.class,i=void 0===a?"":a;"g"===e.name?e.attribs=dt({},e.attribs,{},B(".".concat(e.attribs.class)),{class:"layer ".concat(i)}):e.attribs=dt({},e.attribs,{},B(".".concat(e.attribs.class)),{class:i})}return e}};return Object(a.useEffect)((function(){f(u?240:57)}),[u]),Object(a.useState)((function(){e.eventBus.on("settings",(function(e){return T(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:i.menu},r.a.createElement(Ae,{onImport:function(e){var t=N()(e,W);Array.isArray(t)&&(t=t.find((function(e){return"object"===typeof e&&"svg"===e.type})));var n=document.createElement("div");o.a.render(t,n,(function(){o.a.unmountComponentAtNode(n),E(n.childNodes[0])}))},onExport:function(){var e=document.getElementById("editor-canvas"),t=["width","height"].map((function(t){return e.getAttributeNS(null,t)})),n=Object(j.a)(t,2),a=n[0],r=n[1],i='<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(a,'" height="').concat(r,'">\n            ').concat(document.getElementById("editable-content").innerHTML,"\n        </svg>"),o=new Blob([i]);Object(P.saveAs)(o,"export_".concat((new Date).toISOString(),".svg"))},onClearArea:function(){E(!Boolean(y))}})),r.a.createElement("div",{className:i.root},r.a.createElement(D.a,null),r.a.createElement(A.a,{open:u,variant:"permanent",className:Object(x.a)(i.drawer,(t={},Object(d.a)(t,i.drawerOpen,u),Object(d.a)(t,i.drawerClose,!u),t)),classes:{paper:Object(x.a)(i.drawerPaper,(n={},Object(d.a)(n,i.drawerOpen,u),Object(d.a)(n,i.drawerClose,!u),n))}},r.a.createElement("div",{className:i.toolbar},r.a.createElement(R.a,{onClick:function(){p(!1)}},"rtl"===l.direction?r.a.createElement(_.a,null):r.a.createElement(I.a,null)),r.a.createElement(R.a,{color:"inherit","aria-label":"open drawer",onClick:function(){p(!0)},edge:"start",className:Object(x.a)(Object(d.a)({},i.hide,u))},r.a.createElement(_.a,null))),r.a.createElement(z.a,null),r.a.createElement(We,{onDrop:function(e,t){var n=document.createElement("div");o.a.render(r.a.createElement("svg",null,r.a.createElement.apply(r.a,Object(w.a)(t))),n,(function(){o.a.unmountComponentAtNode(n),document.querySelector("#editable-content").appendChild(n.childNodes[0].childNodes[0])}))}}),r.a.createElement(z.a,null)),r.a.createElement("div",{className:i.canvasContainer},r.a.createElement(L.a,{className:Object(x.a)(i.appBar,Object(d.a)({},i.appBarShift,u))},r.a.createElement(ve,null)),r.a.createElement("div",{style:{position:"relative",height:"100%"}},r.a.createElement(te,{leftOffset:h,topOffset:87,rightOffset:240,mouseAction:"edit"},y),"canvas"===C?r.a.createElement(Qe,{width:240}):r.a.createElement(st,{width:240})))))}));function ht(){return r.a.createElement(mt,null)}var ft=Object(c.a)({palette:{primary:{main:"#00a8ff",auxiliary:"#0a7e95",contrastText:"#fff"},secondary:{main:"#43a047"},error:{main:"#f33732",hover:"#b71c1c"},warning:{main:"#f57c00",hover:"#ffa726"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)"},disabled:{primary:"#1b202a",secondary:"#757575"}},typography:{fontSize:14,fontWeight:"normal",fontFamily:'-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',subtitle1:{fontSize:12,fontWeight:400},h6:{fontSize:18,fontWeight:400,lineHeight:1.5},h5:{fontSize:20,fontWeight:400},h4:{fontSize:22,fontWeight:400},overline:{color:"#546e7a",fontSize:11,fontWeight:500,lineHeight:"13px"},caption:{fontSize:"0.8rem",fontWeight:400}},MuiPaper:{rounded:{borderRadius:"0.2rem"},elevation1:{boxShadow:"0 1px 5px 0 rgba(0,0,0,0.16), 0 1px 5px 0 rgba(0,0,0,0.12)"},elevation2:{boxShadow:"0px 3px 1px -2px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 1px 5px 0px rgba(0,0,0,0.12)"},elevation4:{boxShadow:"0 5px 10px -5px rgba(0,0,0,0.5)"}}});var gt=function(){return r.a.createElement(l.a,{store:O},r.a.createElement(s.a,{theme:ft},r.a.createElement("div",{className:"App"},r.a.createElement(ht,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(gt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[170,1,2]]]);
//# sourceMappingURL=main.0f04d68c.chunk.js.map