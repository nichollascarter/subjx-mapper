{"version":3,"sources":["containers/UndoStack.js","reducers/index.js","store/index.js","components/helpers/ZoomableGroup.js","components/editor/EditorContent.js","actions/index.js","components/editor/EditorCanvas.js","components/editor/EditorToolbar.js","util/fileReader.js","components/editor/EditorMenu.js","components/editor/EditorItems.js","components/editor/settings/CanvasSettings.js","components/helpers/ColorPicker.js","components/editor/settings/ItemSettings.js","components/editor/Editor.js","components/Main.js","App.js","serviceWorker.js","index.js"],"names":["UndoStack","self","this","stack","step","length","push","data","shift","splice","item","initialState","editorAction","editorGrid","editorGridSize","editorPaperSize","width","height","allowDragging","allowResizing","allowRotating","allowProportions","allowRestrictions","snapSteps","x","y","angle","eventBus","EventBus","undoStack","items","rootReducer","state","action","type","store","createStore","ZoomableGroup","props","zoomEl","useRef","useState","transform","setTransform","mouse","oldX","oldY","button","matrix","scale","pos","view","m","dirty","applyTo","update","join","toFixed","pan","amount","scaleAt","at","prescale","mouseEvent","useCallback","event","enable","el","current","clientX","clientY","preventDefault","events","e","offset","parentNode","getBoundingClientRect","left","top","deltaY","useEffect","map","eventName","eventFunc","addEventListener","passive","removeEventListener","id","ref","children","textItemEvents","subjxConfiguration","container","controlsContainer","rotatorAnchor","rotatorOffset","EditorContainer","editable","selectable","currentGroup","ignoreStoring","nextProps","content","dropItems","childNodes","appendChild","firstChild","handleDropLayer","lastElementChild","removeChild","dropLayer","Boolean","makeSelectables","stop","handleClick","bind","handleDoubleClick","handleKeyDown","handleUndo","handleRedo","reloadDraggables","document","classList","add","subscribeToEvents","on","Object","entries","fill","stroke","thickness","opacity","letterSpacing","wordSpacing","lineHeight","textContent","attribute","val","forEach","undefined","setAttributeNS","includes","fitControlsToSize","te","storage","handles","lx1","x1","baseVal","value","ly1","y1","lx2","x2","ly2","y2","lineLength","calcTooltipPosition","nextX","nextY","controls","querySelector","l","r","h","t","b","v","key","applyAlignment","target","nextItems","subjx","drag","restrict","draggable","resizable","rotatable","proportions","snap","onInit","console","log","options","scalable","tagName","toLowerCase","tooltip","createElementNS","actionButton","removeDraggable","onResize","dx","dy","setEditable","tr","tl","cx","cy","revX","revY","doW","doH","setItem","name","onMove","onRotate","delta","onDrop","setTimeout","next","onDestroy","remove","start","emit","$setSelectedItems","newItems","disable","setDraggable","indexOf","direction","startPoint","lengthX","lengthY","theta","Math","atan2","PI","Number","cos","sin","ds","DragSelect","selectables","area","root","subscribe","selected","pop","find","child","contains","stopPropagation","ctrlKey","onLayerChange","getLayerPath","applyCurrentGroupOpacity","nextCurrentGroup","dropCurrentGroupOpacity","node","layerChain","getAttribute","nodeName","keyCode","exeDrag","undo","handleAction","redo","revert","sjxEl","exeRotate","rest","exeResize","React","Component","connect","dispatch","act","useStyles","makeStyles","flex","visibility","workArea","overflow","canvas","position","canvasContent","backgroundColor","page","boxShadow","layerBar","zIndex","margin","EditorCanvas","classes","rightOffset","initialW","initialH","window","outerWidth","outerHeight","paperWidth","paperHeight","w","paperSize","setPaperSize","canvasEl","controlsRef","workAreaRef","containerAreaRef","rootSVG","localAction","setLocalAction","layersBar","setLayersBar","setParentLayer","setStartPoint","setDropItems","scrollTop","clientHeight","scrollLeft","clientWidth","scrollToRef","svgPoint","elem","p","createSVGPoint","matrixTransform","getScreenCTM","inverse","drawElement","rect","drawArea1","getElementById","drawRect","abs","endDraw","className","Button","style","marginLeft","variant","color","size","onMouseUp","right","bottom","cursor","onMouseMove","onMouseDown","display","xmlns","gridSize","grid","patternUnits","d","strokeWidth","vectorEffect","canvasGrid","EditorContent","div","defaultProps","mouseAction","alignItems","verticalDivider","toolbar","padding","marginRight","ExtendedButton","withStyles","IconButton","$setEditorAction","$activateEditorGrid","setEditorAction","activateEditorGrid","buttons","component","Layers","Navigation","PhotoSizeSelectSmall","PanTool","Search","GridOn","GridOff","Undo","Redo","index","disabled","onClick","justifyContent","readText","filePath","Promise","resolve","reject","File","FileReader","FileList","Blob","reader","output","files","onload","result","readAsText","theme","extendedIcon","spacing","EditorMenu","createElement","fileSelector","setFileSelector","setAttribute","loadFiles","a","res","onImport","click","onExport","onClearArea","Rectangle","Circle","Shape","Text","EditorItems","droppables","isCloneable","setAsCloneable","cloneConfig","appendTo","border","background","maxWidth","textColor","itemType","newItem","editorRef","rx","ry","strokeDasharray","points","clone","List","text","Icon","ListItem","data-type","ListItemIcon","ListItemText","primary","containerColumn","flexDirection","label","paddingLeft","TextInput","TextField","CheckboxLabel","FormControlLabel","$setEditorPaperSize","$setAllowDragging","$setAllowResizing","$setAllowRotating","$setAllowProportions","$setAllowRestrictions","$setSnapSteps","$setEditorGridSize","dragging","setDragging","resizing","setResizing","rotating","setRotating","setProportions","restrictions","setRestrictions","setSnap","handleChange","handleSettings","checked","handleSnapChange","snapValues","FormGroup","aria-label","Typography","align","onChange","Grid","xs","Slider","valueLabelDisplay","Divider","control","Checkbox","labelPlacement","ColorPicker","displayColorPicker","currentColor","hex","initValue","popover","setState","handleClose","wrapper","colorPicker","ReactDOM","createPortal","body","fontSize","boxSizing","minWidth","BootstrapInput","marginTop","input","borderRadius","palette","paper","transition","transitions","create","borderColor","InputBase","selectedItems","setFill","fillOptions","setFillOptions","setStroke","strokeOptions","setStrokeOptions","setThickness","setOpacity","setTextContent","textProperties","setTextProperties","setValue","isEmit","nextVal","changeTextContent","prev","getAttributeNS","Select","native","max","allowedSvgs","minHeight","justifyItems","menu","main","flexGrow","canvasContainer","appBar","borderTop","drawer","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","menuButton","hide","flexShrink","whiteSpace","drawerPaper","drawerOpen","drawerClose","overflowX","breakpoints","up","useTheme","open","setOpen","leftOffset","setLeftOffset","setContent","showSettings","setSettingsTab","parsedStyleSheet","CSSStyleSheet","getStyleRule","cssText","rules","cssRules","selectorText","propertyName","parserOptions","replace","domNode","styleSheet","rule","insertRule","attribs","href","parent","childNode","class","reactSVGEl","parse","Array","isArray","element","render","unmountComponentAtNode","attr","rootHTML","innerHTML","blob","saveAs","Date","toISOString","CssBaseline","Drawer","clsx","edge","_","nodeProps","AppBar","topOffset","Main","outerTheme","createMuiTheme","auxiliary","contrastText","secondary","error","hover","warning","typography","fontWeight","fontFamily","subtitle1","h6","h5","h4","overline","caption","MuiPaper","rounded","elevation1","elevation2","elevation4","App","ThemeProvider","location","hostname","match","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.136e1573.chunk.js","sourcesContent":["class UndoStack {\r\n\r\n    constructor(self) {\r\n        this.stack = [null];\r\n        this.step = -1;\r\n        this.self = self;\r\n    }\r\n\r\n    next() {\r\n        const { stack } = this;\r\n        if (stack[stack.length - 1] !== null) {\r\n            this.step++;\r\n            stack.push(null);\r\n        }\r\n    }\r\n\r\n    setItem(data) {\r\n        const { stack } = this;\r\n        stack[stack.length - 1] = data;\r\n\r\n        if (stack.length > 9) {\r\n            stack.shift();\r\n        };\r\n    }\r\n\r\n    push(data) {\r\n        this.step++;\r\n\r\n        this.stack.splice(this.step);\r\n        this.stack.push(data);\r\n    }\r\n\r\n    undo() {\r\n        let item;\r\n        const { stack } = this;\r\n\r\n        if (this.step >= 0) {\r\n            item = stack[this.step];\r\n            this.step--;\r\n            return item;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    redo() {\r\n        const { stack } = this;\r\n\r\n        this.step = this.step === -1 ? 0 : this.step;\r\n        if (stack.length - 1 > this.step) {\r\n            return stack[this.step++];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    invalidateAll() {\r\n        this.stack = [];\r\n        this.step = -1;\r\n    }\r\n\r\n}\r\n\r\nexport default UndoStack;","import EventBus from 'js-event-bus';\r\nimport UndoStack from '../containers/UndoStack';\r\n\r\nconst initialState = {\r\n    editorAction: 'edit',\r\n    editorGrid: true,\r\n    editorGridSize: 10,\r\n    editorPaperSize: {\r\n        width: 800,\r\n        height: 600\r\n    },\r\n    allowDragging: true,\r\n    allowResizing: true,\r\n    allowRotating: true,\r\n    allowProportions: true,\r\n    allowRestrictions: false,\r\n    snapSteps: {\r\n        x: 10,\r\n        y: 10,\r\n        angle: 15\r\n    },\r\n    eventBus: new EventBus(),\r\n    undoStack: new UndoStack(),\r\n    items: []\r\n};\r\n\r\nfunction rootReducer(state = { ...initialState }, action) {\r\n    switch (action.type) {\r\n\r\n        case 'SET_EDITOR_ACTION':\r\n            return {\r\n                ...state,\r\n                editorAction: action.editorAction\r\n            };\r\n        case 'ACTIVATE_EDITOR_GRID':\r\n            return {\r\n                ...state,\r\n                editorGrid: action.editorGrid\r\n            };\r\n        case 'SET_EDITOR_GRID_SIZE':\r\n            return {\r\n                ...state,\r\n                editorGridSize: action.editorGridSize\r\n            };\r\n        case 'SET_EDITOR_PAPER_SIZE':\r\n            return {\r\n                ...state,\r\n                editorPaperSize: action.editorPaperSize\r\n            };\r\n        case 'SET_ALLOW_DRAGGING':\r\n            return {\r\n                ...state,\r\n                allowDragging: action.allowDragging\r\n            };\r\n        case 'SET_ALLOW_RESIZING':\r\n            return {\r\n                ...state,\r\n                allowResizing: action.allowResizing\r\n            };\r\n        case 'SET_ALLOW_ROTATING':\r\n            return {\r\n                ...state,\r\n                allowRotating: action.allowRotating\r\n            };\r\n        case 'SET_ALLOW_PROPORTIONS':\r\n            return {\r\n                ...state,\r\n                allowProportions: action.allowProportions\r\n            };\r\n        case 'SET_ALLOW_RESTRICTIONS':\r\n            return {\r\n                ...state,\r\n                allowRestrictions: action.allowRestrictions\r\n            };\r\n        case 'SET_SNAP_STEPS':\r\n            return {\r\n                ...state,\r\n                snapSteps: action.snapSteps\r\n            };\r\n        case 'SET_SELECTED_ITEMS':\r\n            return {\r\n                ...state,\r\n                items: action.items\r\n            };\r\n        default:\r\n            return state;\r\n\r\n    }\r\n};\r\n\r\nexport default rootReducer;","import { createStore } from 'redux';\r\nimport rootReducer from '../reducers';\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nexport default store;","import React, { useEffect, useState, useRef, useCallback } from 'react';\n\nconst ZoomableGroup = (props) => {\n    let zoomEl = useRef(null);\n    const [transform, setTransform] = useState('matrix(1,0,0,1,0,0)');\n    const mouse = { x: 0, y: 0, oldX: 0, oldY: 0, button: false };\n    const matrix = [1, 0, 0, 1, 0, 0];\n    let scale = 1;\n    const pos = { x: 0, y: 0 };\n\n    const view = (() => {\n        const m = matrix;\n\n        let dirty = true;\n        const API = {\n            applyTo() {\n                if (dirty) { this.update(); }\n                setTransform(`matrix(${m.join(',')})`);\n            },\n            update() {\n                dirty = false;\n                m[3] = m[0] = scale.toFixed(5);\n                m[2] = m[1] = 0;\n                m[4] = pos.x.toFixed(5);\n                m[5] = pos.y.toFixed(5);\n            },\n            pan(amount) {\n                if (dirty) { this.update(); }\n                pos.x += amount.x;\n                pos.y += amount.y;\n                dirty = true;\n            },\n            scaleAt(at, amount) {\n                const prescale = scale * amount;\n                if (prescale < 0.4 || prescale > 5) return;\n\n                if (dirty) { this.update(); }\n                scale *= amount;\n                pos.x = at.x - (at.x - pos.x) * amount;\n                pos.y = at.y - (at.y - pos.y) * amount;\n                dirty = true;\n            }\n        };\n        return API;\n    })();\n\n    const mouseEvent = useCallback((event) => {\n        if (props.enable === false) return;\n        const el = zoomEl.current;\n        if (event.type === 'mousedown') { mouse.button = true; }\n        if (event.type === 'mouseup' || event.type === 'mouseout') { mouse.button = false; }\n        mouse.oldX = mouse.x;\n        mouse.oldY = mouse.y;\n        mouse.x = event.clientX;\n        mouse.y = event.clientY;\n        if (mouse.button) {\n            view.pan({ x: mouse.x - mouse.oldX, y: mouse.y - mouse.oldY });\n            view.applyTo(el);\n        }\n        event.preventDefault();\n    });\n\n    const mouseWheelEvent = useCallback((e) => {\n        if (props.enable === false) return;\n        const el = zoomEl.current;\n        const offset = el.parentNode.getBoundingClientRect();\n        const x = e.clientX - offset.left;\n        const y = e.clientY - offset.top;\n\n        view.scaleAt({ x, y }, e.deltaY < 0 ? 1.1 : (1 / 1.1));\n        view.applyTo(el);\n        e.preventDefault();\n    }, [props.enable]);\n\n    const resetZoom = useCallback(() => {\n        scale = 1;\n        pos.x = pos.y = 0;\n        matrix[0] = matrix[3] = 1;\n        matrix[1] = matrix[2] = matrix[4] = matrix[5] = 0;\n        view.pan(pos);\n        view.scaleAt({ x: 0, y: 0 }, 1);\n        view.applyTo(zoomEl.current);\n    });\n\n    const events = [\n        ['mousemove', mouseEvent],\n        ['mousedown', mouseEvent],\n        ['mouseup', mouseEvent],\n        ['mouseout', mouseEvent],\n        ['wheel', mouseWheelEvent],\n        ['dblclick', resetZoom]\n    ];\n\n    useEffect(() => {\n        const el = zoomEl.current;\n\n        if (props.enable) {\n            events.map(([eventName, eventFunc]) => {\n                el.parentNode.addEventListener(eventName, eventFunc, { passive: false });\n            });\n        }\n\n        return () => {\n            events.map(([eventName, eventFunc]) => {\n                el.parentNode.removeEventListener(eventName, eventFunc, { passive: false });\n            });\n        };\n    }, [props.enable]);\n\n    return (\n        <g id='zoom-container' ref={zoomEl} transform={transform}>\n            {props.children}\n        </g>\n    );\n};\n\nexport default ZoomableGroup;","import React from 'react';\nimport { connect } from 'react-redux';\nimport subjx from 'subjx';\nimport DragSelect from 'dragselect';\nimport { setSelectedItems } from '../../actions';\n\nconst textItemEvents = [\n    'letterSpacing',\n    'wordSpacing',\n    'lineHeight',\n    'textContent'\n];\n\nconst subjxConfiguration = {\n    container: '#editor-container',\n    controlsContainer: '#controls-container',\n    rotatorAnchor: 'n',\n    rotatorOffset: 30\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n    $setSelectedItems: (act) => dispatch(setSelectedItems(act))\n});\n\nconst mapStateToProps = (state) => ({\n    editorGridSize: state.editorGridSize,\n    allowDragging: state.allowDragging,\n    allowResizing: state.allowResizing,\n    allowRotating: state.allowRotating,\n    allowProportions: state.allowProportions,\n    allowRestrictions: state.allowRestrictions,\n    snapSteps: state.snapSteps,\n    eventBus: state.eventBus,\n    undoStack: state.undoStack\n});\n\nclass EditorContainer extends React.Component {\n\n    el = null;\n    editable = false;\n    selectable = null;\n    items = [];\n    currentGroup = null;\n    ignoreStoring = false;\n\n    shouldComponentUpdate(nextProps) {\n        if (this.el) {\n            if (nextProps.content !== this.props.content) {\n                this.dropItems();\n                this.currentGroup = this.el;\n\n                if (nextProps.content && nextProps.content.childNodes) {\n                    while (nextProps.content.childNodes.length) {\n                        this.el.appendChild(nextProps.content.firstChild);\n                    }\n                } else {\n                    this.handleDropLayer();\n                    while (this.el.lastElementChild) {\n                        this.el.removeChild(this.el.lastElementChild);\n                    }\n                }\n            }\n        }\n\n        if (nextProps.dropLayer) {\n            this.handleDropLayer();\n        }\n\n        if (\n            (nextProps.dropItems === true || !nextProps.editable) &&\n            this.items.length\n        ) {\n            this.dropItems();\n        }\n\n        if (nextProps.selectable !== Boolean(this.selectable)) {\n            if (nextProps.selectable) {\n                this.selectable = this.makeSelectables();\n            }\n            if (!nextProps.selectable && this.selectable) {\n                this.selectable.stop();\n                this.selectable = null;\n            }\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        this.currentGroup = this.el;\n\n        this.handleClick = this.handleClick.bind(this);\n        this.handleDoubleClick = this.handleDoubleClick.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n        this.handleUndo = this.handleUndo.bind(this);\n        this.handleRedo = this.handleRedo.bind(this);\n        this.reloadDraggables = this.reloadDraggables.bind(this);\n\n        this.el.addEventListener('mouseup', this.handleClick);\n        this.el.addEventListener('dblclick', this.handleDoubleClick);\n        document.addEventListener('keydown', this.handleKeyDown);\n\n        this.el.classList.add('isolated-layer');\n\n        this.subscribeToEvents();\n    }\n\n    componentWillUnmount() {\n        this.el.removeEventListener('mouseup', this.handleClick);\n        this.el.removeEventListener('dblclick', this.handleDoubleClick);\n        document.removeEventListener('keydown', this.handleKeyDown);\n    }\n\n    subscribeToEvents() {\n        const { props: { eventBus } } = this;\n        eventBus.on('undo', this.handleUndo);\n        eventBus.on('redo', this.handleRedo);\n        eventBus.on('settingUpdated', this.reloadDraggables);\n\n        Object.entries({\n            fill: 'fill',\n            stroke: 'stroke',\n            thickness: 'stroke-width',\n            opacity: 'opacity',\n            letterSpacing: 'letter-spacing',\n            wordSpacing: 'word-spacing',\n            lineHeight: 'line-height',\n            textContent: 'text-content'\n        }).map(([event, attribute]) => eventBus.on(event, (val) => {\n            this.items.forEach(item => {\n                if (val !== undefined) item.el.setAttributeNS(null, attribute, val);\n                if (textItemEvents.includes(event)) {\n                    item.fitControlsToSize();\n                    const { te } = item.storage.handles;\n\n                    const lx1 = te.x1.baseVal.value;\n                    const ly1 = te.y1.baseVal.value;\n                    const lx2 = te.x2.baseVal.value;\n                    const ly2 = te.y2.baseVal.value;\n\n                    const lineLength = [lx1 - lx2, ly1 - ly2];\n\n                    const [nextX, nextY] = this.calcTooltipPosition(\n                        [lx2, ly2],\n                        lineLength,\n                        -30,\n                        45\n                    );\n\n                    const tooltip = item.controls.querySelector('.delete-sjx-item');\n                    tooltip.setAttributeNS(null, 'transform', `translate(${nextX - 12}, ${nextY - 12})`);\n                }\n            });\n        }));\n\n        Object.entries({\n            l: 'alignLeft',\n            r: 'alignRight',\n            h: 'alignHorizontal',\n            t: 'alignTop',\n            b: 'alignBottom',\n            v: 'alignVertical'\n        }).map(([key, event]) => eventBus.on(event, () => this.applyAlignment(key)));\n    }\n\n    setEditable(value) {\n        this.editable = value;\n    }\n\n    setDraggable(target) {\n        const self = this;\n        const {\n            items,\n            props\n        } = this;\n\n        const {\n            undoStack,\n            allowDragging,\n            allowResizing,\n            allowRotating,\n            allowProportions,\n            allowRestrictions,\n            snapSteps\n        } = props;\n\n        const nextItems = subjx(target).drag({\n            ...subjxConfiguration,\n            ...(allowRestrictions && { restrict: '#editor-grid' }),\n            draggable: allowDragging,\n            resizable: allowResizing,\n            rotatable: allowRotating,\n            proportions: allowProportions,\n            snap: {\n                x: snapSteps.x,\n                y: snapSteps.y,\n                angle: snapSteps.y\n            },\n            onInit() {\n                // eslint-disable-next-line no-console\n                console.log('Draggable:: ', this.el);\n\n                this.options.scalable = this.el.tagName.toLowerCase() === 'text';\n\n                // disables selection if active\n                if (self.selectable && self.props.selectable) {\n                    self.selectable.stop();\n                }\n\n                const { te } = this.storage.handles;\n\n                const lx1 = te.x1.baseVal.value;\n                const ly1 = te.y1.baseVal.value;\n                const lx2 = te.x2.baseVal.value;\n                const ly2 = te.y2.baseVal.value;\n\n                const lineLength = [lx1 - lx2, ly1 - ly2];\n\n                const [nextX, nextY] = self.calcTooltipPosition(\n                    [lx2, ly2],\n                    lineLength,\n                    -30,\n                    45\n                );\n\n                const tooltip = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n                tooltip.setAttributeNS(null, 'transform', `translate(${nextX - 12}, ${nextY - 12})`);\n                tooltip.classList.add('delete-sjx-item');\n\n                const actionButton = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n                actionButton.setAttributeNS(null, 'd', 'M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8');\n                actionButton.setAttributeNS(null, 'pointer-events', 'bounding-box');\n                actionButton.setAttributeNS(null, 'fill', 'rgb(237, 28, 36)');\n\n                tooltip.addEventListener('click', () => {\n                    self.removeDraggable(this);\n                });\n                tooltip.appendChild(actionButton);\n\n                this.controls.appendChild(tooltip);\n            },\n            onResize({ dx, dy }) {\n                self.setEditable(true);\n\n                const { tr, tl } = this.storage.handles;\n\n                const lx1 = tl.cx.baseVal.value;\n                const ly1 = tl.cy.baseVal.value;\n                const lx2 = tr.cx.baseVal.value;\n                const ly2 = tr.cy.baseVal.value;\n\n                const lineLength = [lx1 - lx2, ly1 - ly2];\n\n                const [nextX, nextY] = self.calcTooltipPosition(\n                    [lx2, ly2],\n                    lineLength,\n                    -30,\n                    45\n                );\n\n                const tooltip = this.controls.querySelector('.delete-sjx-item');\n                tooltip.setAttributeNS(null, 'transform', `translate(${nextX - 12}, ${nextY - 12})`);\n\n                if (self.ignoreStoring) return self.ignoreStoring = false;\n                const { revX, revY, doW, doH } = this.storage;\n\n                undoStack.setItem({\n                    name: 'resize',\n                    el: this.el,\n                    data: {\n                        dx,\n                        dy,\n                        revX,\n                        revY,\n                        doW,\n                        doH\n                    }\n                });\n            },\n            onMove({ dx, dy }) {\n                self.setEditable(true);\n\n                if (self.ignoreStoring) return self.ignoreStoring = false;\n                undoStack.setItem({ name: 'move', el: this.el, data: [dx, dy] });\n            },\n            onRotate({ delta }) {\n                self.setEditable(true);\n\n                if (self.ignoreStoring) return self.ignoreStoring = false;\n                undoStack.setItem({ name: 'rotate', data: delta, el: this.el });\n            },\n            onDrop() {\n                setTimeout(() => (\n                    self.setEditable(false)\n                ), 100);\n\n                if (self.ignoreStoring) return self.ignoreStoring = false;\n                undoStack.next();\n            },\n            onDestroy() {\n                setTimeout(() => (\n                    self.setEditable(false)\n                ), 100);\n                this.el.classList.remove('subjx-selected');\n                // enables selection if active\n                if (self.selectable && self.props.selectable) {\n                    self.selectable.start();\n                }\n            }\n        });\n\n        this.props.eventBus.emit('settings', null, 'item');\n        this.props.$setSelectedItems({ items: [...nextItems] });\n        return nextItems;\n    }\n\n    reloadDraggables() {\n        const { items } = this;\n        const newItems = items.map((item) => {\n            item.disable();\n            return item.el;\n        });\n\n        this.items = [...this.setDraggable(newItems)];\n    }\n\n    removeDraggable(draggable) {\n        const { items } = this;\n\n        items.splice(items.indexOf(draggable), 1);\n        draggable.disable();\n        draggable.el.parentNode.removeChild(draggable.el);\n        this.props.eventBus.emit('settings', null, 'canvas');\n    }\n\n    applyAlignment(direction) {\n        this.items.map((item) => {\n            item.applyAlignment(direction);\n            const { te } = item.storage.handles;\n\n            const lx1 = te.x1.baseVal.value;\n            const ly1 = te.y1.baseVal.value;\n            const lx2 = te.x2.baseVal.value;\n            const ly2 = te.y2.baseVal.value;\n\n            const lineLength = [lx1 - lx2, ly1 - ly2];\n\n            const [nextX, nextY] = this.calcTooltipPosition(\n                [lx2, ly2],\n                lineLength,\n                -30,\n                45\n            );\n\n            const tooltip = item.controls.querySelector('.delete-sjx-item');\n            tooltip.setAttributeNS(null, 'transform', `translate(${nextX - 12}, ${nextY - 12})`);\n        });\n    }\n\n    calcTooltipPosition(startPoint, lineLength, offset, angle) {\n        const [x, y] = startPoint;\n        const [lengthX, lengthY] = lineLength;\n\n        const theta = Math.atan2(\n            lengthY,\n            lengthX\n        ) - (angle * Math.PI / 180);\n\n        return [\n            Number(x) + offset * Math.cos(theta),\n            Number(y) + offset * Math.sin(theta)\n        ];\n    }\n\n    makeSelectables() {\n        const ds = new DragSelect({\n            selectables: this.currentGroup.children,\n            area: this.props.root.current\n        });\n\n        ds.subscribe('callback', ({ items: selected }) => {\n            const { items } = this;\n\n            while (items.length > 0) items.pop().disable();\n            if (!selected.length) return;\n\n            const newItems = this.setDraggable(selected);\n\n            this.items = [...newItems];\n        });\n\n        return ds;\n    }\n\n    handleClick(e) {\n        if (this.editable || !this.props.editable) return;\n\n        const {\n            currentGroup,\n            items\n        } = this;\n\n        const target = [...currentGroup.childNodes]\n            .find((child) => (\n                !(child.classList && child.classList.contains('sjx-drag')) &&\n                child.contains(e.target)\n            )) || (currentGroup === e.target ? e.target : null);\n\n        //console.log('Target:: ', target);\n        //console.log('Current group:: ', currentGroup);\n\n        if (!target) return;\n\n        e.stopPropagation();\n\n        if (!e.ctrlKey) {\n            while (items.length > 0) items.pop().disable();\n        }\n\n        const newItems = this.setDraggable(target);\n\n        items.push(...newItems);\n        this.items = items;\n    }\n\n    handleDoubleClick(e) {\n        e.preventDefault();\n        if (this.editable || !this.props.editable) return;\n\n        const { currentGroup } = this;\n\n        const target = [...currentGroup.childNodes]\n            .find((child) => (\n                (child.classList && child.classList.contains('sjx-drag')) &&\n                child.contains(e.target)\n            ));\n\n        if (target && target.tagName === 'g') {\n            this.dropItems();\n            this.currentGroup = target;\n            this.props.onLayerChange(\n                this.getLayerPath(target)\n            );\n            currentGroup.classList.remove('isolated-layer');\n            target.classList.add('isolated-layer');\n            this.applyCurrentGroupOpacity(target);\n        }\n    }\n\n    handleDropLayer() {\n        const { currentGroup } = this;\n        if (currentGroup === this.el) {\n            return this.props.onLayerChange(\n                this.getLayerPath(currentGroup)\n            );\n        }\n\n        this.dropItems();\n        currentGroup.classList.remove('isolated-layer');\n        const nextCurrentGroup = currentGroup.parentNode;\n        this.currentGroup = nextCurrentGroup;\n        this.props.onLayerChange(\n            this.getLayerPath(nextCurrentGroup)\n        );\n\n        this.dropCurrentGroupOpacity(currentGroup);\n        this.applyCurrentGroupOpacity(nextCurrentGroup);\n        nextCurrentGroup.classList.add('isolated-layer');\n    }\n\n    getLayerPath(target) {\n        let node = target;\n        let layerChain = '';\n\n        while (node !== this.el) {\n            layerChain = (node.getAttribute('id') || node.nodeName) + ' / ' + layerChain;\n            node = node.parentNode;\n        }\n\n        return layerChain;\n    }\n\n    dropItems(nextItems = []) {\n        const { items } = this;\n        while (items.length > 0) items.pop().disable();\n        this.items = nextItems;\n    }\n\n    handleKeyDown(e) {\n        const { items } = this;\n        if (e.keyCode === 46) {\n            while (items.length > 0) {\n                const item = items.pop();\n                item.disable();\n                item.el.parentNode.removeChild(item.el);\n            }\n        } else if (e.keyCode === 65 && e.ctrlKey) {\n            while (items.length > 0) items.pop().disable();\n            e.preventDefault();\n        } else if (e.keyCode === 67) {\n            // c\n        } else if (e.keyCode === 86) {\n            // v\n        } else if (e.keyCode > 36 && e.keyCode < 41) {\n            e.preventDefault();\n            items.forEach((item) => {\n                item.exeDrag({\n                    dx: e.keyCode === 37 || e.keyCode === 39 ? e.keyCode === 37 ? -10 : 10 : 0,\n                    dy: e.keyCode === 38 || e.keyCode === 40 ? e.keyCode === 38 ? -10 : 10 : 0\n                });\n            });\n        }\n    }\n\n    applyCurrentGroupOpacity(el) {\n        el.setAttributeNS(null, 'opacity', 1);\n        if (el === this.el) return;\n        [...el.parentNode.childNodes].forEach(child => {\n            if (child.tagName === 'g' && child !== el) child.setAttributeNS(null, 'opacity', 0.3);\n        });\n        this.applyCurrentGroupOpacity(el.parentNode);\n    }\n\n    dropCurrentGroupOpacity(el) {\n        [...el.parentNode.childNodes].forEach(child => {\n            if (child.tagName === 'g' && child !== el) child.setAttributeNS(null, 'opacity', 1);\n        });\n    }\n\n    handleUndo() {\n        const { undoStack } = this.props;\n\n        const item = undoStack.undo();\n\n        if (item) {\n            this.ignoreStoring = true;\n            this.handleAction(item, true);\n        }\n    }\n\n    handleRedo() {\n        const { undoStack } = this.props;\n\n        const item = undoStack.redo();\n\n        if (item) {\n            this.ignoreStoring = true;\n            this.handleAction(item, false);\n        }\n    }\n\n    handleAction(action = {}, revert) {\n        this.dropItems();\n\n        switch (action.name) {\n\n            case 'rotate': {\n                const delta = action.data;\n                const sjxEl = this.setDraggable(action.el);\n\n                sjxEl.forEach((item) => {\n                    item.exeRotate({ delta: delta * (revert ? -1 : 1) });\n                    item.disable();\n                });\n\n                break;\n            }\n            case 'move': {\n                const [dx, dy] = action.data;\n                const sjxEl = this.setDraggable(action.el);\n\n                sjxEl.forEach((item) => {\n                    item.exeDrag({\n                        dx: dx * (revert ? -1 : 1),\n                        dy: dy * (revert ? -1 : 1)\n                    });\n                    item.disable();\n                });\n                break;\n            }\n            case 'resize': {\n                const { dx, dy, ...rest } = action.data;\n                const sjxEl = this.setDraggable(action.el);\n\n                sjxEl.forEach((item) => {\n                    item.exeResize({\n                        dx: dx * (revert ? -1 : 1),\n                        dy: dy * (revert ? -1 : 1),\n                        ...rest\n                    });\n                    item.disable();\n                });\n            }\n            default:\n                break;\n\n        }\n    }\n\n    render() {\n        return (\n            <g id='editable-content' ref={el => this.el = el} />\n        );\n    }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditorContainer);","export function setEditorAction({ editorAction }) {\r\n    return { type: 'SET_EDITOR_ACTION', editorAction };\r\n}\r\n\r\nexport function activateEditorGrid({ editorGrid }) {\r\n    return { type: 'ACTIVATE_EDITOR_GRID', editorGrid };\r\n}\r\n\r\nexport function setEditorGridSize({ editorGridSize }) {\r\n    return { type: 'SET_EDITOR_GRID_SIZE', editorGridSize };\r\n}\r\n\r\nexport function setEditorPaperSize({ editorPaperSize }) {\r\n    return { type: 'SET_EDITOR_PAPER_SIZE', editorPaperSize };\r\n}\r\n\r\nexport function setAllowDragging({ allowDragging }) {\r\n    return { type: 'SET_ALLOW_DRAGGING', allowDragging };\r\n}\r\n\r\nexport function setAllowResizing({ allowResizing }) {\r\n    return { type: 'SET_ALLOW_RESIZING', allowResizing };\r\n}\r\n\r\nexport function setAllowRotating({ allowRotating }) {\r\n    return { type: 'SET_ALLOW_ROTATING', allowRotating };\r\n}\r\n\r\nexport function setAllowProportions({ allowProportions }) {\r\n    return { type: 'SET_ALLOW_PROPORTIONS', allowProportions };\r\n}\r\n\r\nexport function setAllowRestrictions({ allowRestrictions }) {\r\n    return { type: 'SET_ALLOW_RESTRICTIONS', allowRestrictions };\r\n}\r\n\r\nexport function setSnapSteps({ snapSteps }) {\r\n    return { type: 'SET_SNAP_STEPS', snapSteps };\r\n}\r\n\r\nexport function setSelectedItems({ items }) {\r\n    return { type: 'SET_SELECTED_ITEMS', items };\r\n}","import React, { useState, useRef, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport ZoomableGroup from '../helpers/ZoomableGroup';\r\nimport EditorContent from './EditorContent';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    root: {\r\n        '-webkit-box-flex': 1,\r\n        '-ms-flex': 1,\r\n        flex: 1,\r\n        visibility: 'visible'\r\n    },\r\n    workArea: {\r\n        overflow: 'auto'\r\n    },\r\n    canvas: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0\r\n    },\r\n    canvasContent: {\r\n        backgroundColor: 'white'\r\n    },\r\n    page: {\r\n        boxShadow: '0px 0px 2px 1px #d1d1d1'\r\n    },\r\n    layerBar: {\r\n        position: 'absolute',\r\n        zIndex: 99999,\r\n        margin: 4\r\n    }\r\n}));\r\n\r\nconst canvasGrid = (paperSize, gridSize) => {\r\n    const grid = gridSize * 10;\r\n    return (\r\n        <g>\r\n            <defs>\r\n                <pattern\r\n                    id='smallGrid'\r\n                    width={gridSize}\r\n                    height={gridSize}\r\n                    fill='white'\r\n                    patternUnits='userSpaceOnUse'\r\n                >\r\n                    <path\r\n                        d={`M ${gridSize} 0 L 0 0 0 ${gridSize}`}\r\n                        fill='none'\r\n                        stroke='gray'\r\n                        strokeWidth='0.5'\r\n                        vectorEffect='non-scaling-stroke'\r\n                    />\r\n                </pattern>\r\n                <pattern id='grid' width={grid} height={grid} patternUnits='userSpaceOnUse'>\r\n                    <rect width={grid} height={grid} fill='url(#smallGrid)' />\r\n                    <path\r\n                        d={`M ${grid} 0 L 0 0 0 ${grid}`}\r\n                        fill='none'\r\n                        stroke='gray'\r\n                        strokeWidth='1'\r\n                        vectorEffect='non-scaling-stroke'\r\n                    />\r\n                </pattern>\r\n            </defs>\r\n            <rect x='0' y='0' width={paperSize.w} height={paperSize.h} fill='url(#grid)' />\r\n        </g>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        editorAction: state.editorAction,\r\n        editorGrid: state.editorGrid,\r\n        editorGridSize: state.editorGridSize,\r\n        editorPaperSize: state.editorPaperSize,\r\n        eventBus: state.eventBus\r\n    };\r\n};\r\n\r\nconst EditorCanvas = (props) => {\r\n    const classes = useStyles();\r\n    const {\r\n        editorAction,\r\n        editorGrid,\r\n        editorGridSize,\r\n        editorPaperSize,\r\n        // leftOffset,\r\n        // topOffset,\r\n        rightOffset,\r\n        children: content\r\n    } = props;\r\n\r\n    const {\r\n        width: initialW,\r\n        height: initialH\r\n    } = editorPaperSize;\r\n\r\n    const [paperWidth, paperHeight] = [window.outerWidth, window.outerHeight];\r\n\r\n    const [paperSize, setPaperSize] = useState({\r\n        w: initialW,\r\n        h: initialH,\r\n        x: (paperWidth - initialW) / 2,\r\n        y: (paperHeight - initialH) / 2\r\n    });\r\n\r\n    let canvasEl = null;\r\n    let controlsRef = null;\r\n    const workAreaRef = useRef(null);\r\n    const containerAreaRef = useRef(null);\r\n    const rootSVG = useRef(null);\r\n\r\n    const [localAction, setLocalAction] = useState(null);\r\n    const [layersBar, setLayersBar] = useState(null);\r\n    const [dropLayer, setParentLayer] = useState(false);\r\n    const [startPoint, setStartPoint] = useState({ x: 0, y: 0 });\r\n\r\n    const [dropItems, setDropItems] = useState(false);\r\n\r\n    const scrollToRef = (ref) => {\r\n        const container = containerAreaRef.current;\r\n        container.scrollTop = (ref.current.clientHeight - container.clientHeight) / 2;\r\n        container.scrollLeft = (ref.current.clientWidth - container.clientWidth) / 2;\r\n    };\r\n\r\n    useEffect(() => {\r\n        scrollToRef(workAreaRef);\r\n    }, [paperSize]);\r\n\r\n    // TODO: adopt to size of imported SVG\r\n    // useEffect(() => {\r\n    //     setPaperSize({\r\n    //         w: contentWidth > initialW ? contentWidth : initialW,\r\n    //         h: contentHeight > initialH ? contentHeight : initialH,\r\n    //         x: contentWidth > initialW ?  (paperWidth - contentWidth) / 2 : (paperWidth - initialW) / 2,\r\n    //         y: contentHeight > initialH ? (paperHeight - contentHeight) / 2 : (paperHeight - initialH) / 2\r\n    //     });\r\n    // }, [props.children]);\r\n\r\n    useEffect(() => {\r\n        setPaperSize({\r\n            w: initialW,\r\n            h: initialH,\r\n            x: (paperWidth - initialW) / 2,\r\n            y: (paperHeight - initialH) / 2\r\n        });\r\n    }, [props.editorPaperSize]);\r\n\r\n    const handleMouseDown = (e) => {\r\n        e.preventDefault();\r\n        switch (editorAction) {\r\n\r\n            case 'edit':\r\n                if (controlsRef.contains(e.target)) return;\r\n\r\n                if (!canvasEl.children[0].contains(e.target)) {\r\n                    setDropItems(true);\r\n                    props.eventBus.emit('settings', null, 'canvas');\r\n                    return setTimeout(() => setDropItems(false), 100);\r\n                }\r\n                break;\r\n            case 'grab':\r\n                const container = containerAreaRef.current;\r\n\r\n                setStartPoint({\r\n                    x: e.clientX,\r\n                    y: e.clientY,\r\n                    scrollTop: container.scrollTop,\r\n                    scrollLeft: container.scrollLeft\r\n                });\r\n                break;\r\n            case 'select':\r\n                //onCanvasDown(e);\r\n                break;\r\n            case 'zoom':\r\n                break;\r\n            case 'drawRect':\r\n                drawElement(e);\r\n                break;\r\n            default:\r\n                break;\r\n\r\n        }\r\n\r\n        setLocalAction(editorAction);\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        e.preventDefault();\r\n\r\n        switch (localAction) {\r\n\r\n            case 'grab': {\r\n                const dx = (startPoint.x - e.clientX) * 1; // scale\r\n                const dy = (startPoint.y - e.clientY) * 1; // scale\r\n\r\n                const container = containerAreaRef.current;\r\n                container.scrollTop = startPoint.scrollTop + dy;\r\n                container.scrollLeft = startPoint.scrollLeft + dx;\r\n                break;\r\n            }\r\n            case 'zoom': {\r\n                break;\r\n            }\r\n            case 'draw':\r\n                //drawSvgElement(e);\r\n                break;\r\n            default:\r\n                break;\r\n\r\n        }\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        setLocalAction(null);\r\n    };\r\n\r\n    const dropLayers = (e) => {\r\n        e.stopPropagation();\r\n        setParentLayer(true);\r\n    };\r\n\r\n    const svgPoint = (elem, x, y) => {\r\n        let p = elem.createSVGPoint();\r\n        p.x = x;\r\n        p.y = y;\r\n        return p.matrixTransform(elem.getScreenCTM().inverse());\r\n    };\r\n\r\n    const drawElement = (event) => {\r\n        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        rect.setAttributeNS(null, 'stroke-width', 2);\r\n        rect.setAttributeNS(null, 'fill', 'none');\r\n        rect.setAttributeNS(null, 'stroke', '#000');\r\n\r\n        const drawArea1 = document.getElementById('editor-background');\r\n\r\n        const start = svgPoint(drawArea1, event.clientX, event.clientY);\r\n        document.getElementById('editable-content').appendChild(rect);\r\n\r\n        const drawRect = (e) => {\r\n            let p = svgPoint(drawArea1, e.clientX, e.clientY);\r\n            let w = Math.abs(p.x - start.x);\r\n            let h = Math.abs(p.y - start.y);\r\n            if (p.x > start.x) {\r\n                p.x = start.x;\r\n            }\r\n\r\n            if (p.y > start.y) {\r\n                p.y = start.y;\r\n            }\r\n\r\n            rect.setAttributeNS(null, 'x', p.x);\r\n            rect.setAttributeNS(null, 'y', p.y);\r\n            rect.setAttributeNS(null, 'width', w);\r\n            rect.setAttributeNS(null, 'height', h);\r\n        };\r\n\r\n        const endDraw = () => {\r\n            drawArea1.removeEventListener('mousemove', drawRect);\r\n            drawArea1.removeEventListener('mouseup', endDraw);\r\n        };\r\n\r\n        drawArea1.addEventListener('mousemove', drawRect);\r\n        drawArea1.addEventListener('mouseup', endDraw);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {\r\n                layersBar && (\r\n                    <p className={classes.layerBar}>\r\n                        {layersBar}\r\n                        <Button\r\n                            style={{ marginLeft: 2 }}\r\n                            variant='contained'\r\n                            color='primary'\r\n                            size='small'\r\n                            onMouseUp={dropLayers}>\r\n                            Exit\r\n                        </Button>\r\n                    </p>\r\n                )\r\n            }\r\n            <div\r\n                id='work-area'\r\n                ref={containerAreaRef}\r\n                className={classes.workArea}\r\n                style={{\r\n                    top: 0, // topOffset,\r\n                    left: 0, // leftOffset,\r\n                    right: rightOffset,\r\n                    bottom: 0,\r\n                    position: 'absolute',\r\n                    cursor: 'auto',\r\n                    overflow: 'scroll'\r\n                }}\r\n                onMouseMove={handleMouseMove}\r\n                onMouseDown={handleMouseDown}\r\n                onMouseUp={handleMouseUp}\r\n            >\r\n                <div\r\n                    ref={workAreaRef}\r\n                    style={{\r\n                        display: 'inline-block',\r\n                        position: 'relative',\r\n                        width: paperWidth,\r\n                        height: paperHeight\r\n                    }}\r\n                >\r\n                    <svg\r\n                        id='editor-container'\r\n                        xmlns='http://www.w3.org/2000/svg'\r\n                        className={classes.canvas}\r\n                        width='100%'\r\n                        height='100%'\r\n                        overflow='visible'\r\n                        ref={rootSVG}\r\n                    >\r\n                        <ZoomableGroup enable={editorAction === 'zoom'}>\r\n                            <g id='content' transform={`translate(${paperSize.x}, ${paperSize.y})`}>\r\n                                <g id='editor-background'>\r\n                                    <rect id='editor-grid' x='0' y='0' width={paperSize.w} height={paperSize.h} fill='white' stroke='grey' />\r\n                                    {\r\n                                        editorGrid\r\n                                            ? canvasGrid(paperSize, editorGridSize)\r\n                                            : null\r\n                                    }\r\n                                </g>\r\n                                <g\r\n                                    id='editor-canvas'\r\n                                    ref={el => canvasEl = el}\r\n                                    className={classes.page}\r\n                                >\r\n                                    <EditorContent\r\n                                        root={rootSVG}\r\n                                        editable={editorAction === 'edit'}\r\n                                        selectable={editorAction === 'select'}\r\n                                        content={content}\r\n                                        onLayerChange={(value) => {\r\n                                            setLayersBar(value);\r\n                                            setParentLayer(false);\r\n                                        }}\r\n                                        dropLayer={dropLayer}\r\n                                        dropItems={dropItems}\r\n                                    />\r\n                                </g>\r\n                            </g>\r\n                        </ZoomableGroup>\r\n                        <g id='controls-container' ref={div => controlsRef = div} />\r\n                    </svg>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nEditorCanvas.defaultProps = {\r\n    grid: true,\r\n    mouseAction: 'edit',\r\n    initialW: 800,\r\n    initialH: 600\r\n};\r\n\r\nexport default connect(mapStateToProps)(EditorCanvas);","import React from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux';\r\nimport { IconButton } from '@material-ui/core';\r\n\r\nimport {\r\n    Layers as LayersIcon,\r\n    VerticalAlignCenter as AlignCenter,\r\n    VerticalAlignBottom as AlignIcon,\r\n    GridOn as GridOnIcon,\r\n    GridOff as GridOffIcon,\r\n    Undo as UndoIcon,\r\n    Redo as RedoIcon,\r\n    Navigation as NavigationIcon,\r\n    PanTool as PanToolIcon,\r\n    PhotoSizeSelectSmall as PhotoSizeSelectSmallIcon,\r\n    Search as SearchIcon,\r\n    Crop32Outlined as Rectangle,\r\n    FormatShapes as ShapeSettingsIcon,\r\n    Tune as CanvasSettingsIcon\r\n} from '@material-ui/icons';\r\n\r\nimport { setEditorAction, activateEditorGrid } from '../../actions';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    root: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        height: '100%'\r\n    },\r\n    flex: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        height: '100%',\r\n        marginLeft: 10\r\n    },\r\n    verticalDivider: {\r\n        width: '1px',\r\n        backgroundColor: 'white',\r\n        height: '30px'\r\n    },\r\n    toolbar: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: 2,\r\n        marginRight: 5\r\n    }\r\n}));\r\n\r\nconst ExtendedButton = withStyles({\r\n    root: {\r\n        color: 'rgba(0,0,0,0.65)',\r\n        padding: 6\r\n    }\r\n})(IconButton);\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        editorAction: state.editorAction,\r\n        editorGrid: state.editorGrid,\r\n        eventBus: state.eventBus\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    $setEditorAction: (act) => dispatch(setEditorAction(act)),\r\n    $activateEditorGrid: (act) => dispatch(activateEditorGrid(act))\r\n});\r\n\r\nconst EditorToolbar = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const {\r\n        editorAction,\r\n        editorGrid,\r\n        eventBus\r\n    } = props;\r\n\r\n    const setEditorAction = (editorAction) => () => {\r\n        props.$setEditorAction({ editorAction });\r\n    };\r\n\r\n    const activateEditorGrid = (editorGrid) => {\r\n        props.$activateEditorGrid({ editorGrid });\r\n    };\r\n\r\n    const buttons = [\r\n        { type: 'button', selected: editorAction === 'showLayers', component: <LayersIcon />, action: () => 'showLayers' },\r\n        { type: 'divider' },\r\n        { type: 'button', selected: editorAction === 'edit', component: <NavigationIcon />, action: setEditorAction('edit') },\r\n        { type: 'button', selected: editorAction === 'select', component: <PhotoSizeSelectSmallIcon />, action: setEditorAction('select') },\r\n        { type: 'button', selected: editorAction === 'grab', component: <PanToolIcon />, action: setEditorAction('grab') },\r\n        { type: 'button', selected: editorAction === 'zoom', component: <SearchIcon />, action: setEditorAction('zoom') },\r\n        { type: 'divider' },\r\n        // { type: 'button', selected: editorAction === 'zoom', component: <Rectangle />, action: setEditorAction('drawRect') },\r\n        // { type: 'divider' },\r\n        { type: 'button', selected: editorAction === 'alignLeft', component: <AlignIcon transform='rotate(90)' />, action: () => eventBus.emit('alignLeft') },\r\n        { type: 'button', selected: editorAction === 'alignHorizontal', component: <AlignCenter transform='rotate(90)' />, action: () => eventBus.emit('alignHorizontal') },\r\n        { type: 'button', selected: editorAction === 'alignRight', component: <AlignIcon transform='rotate(-90)' />, action: () => eventBus.emit('alignRight') },\r\n        { type: 'button', selected: editorAction === 'alignTop', component: <AlignIcon transform='rotate(180)' />, action: () => eventBus.emit('alignTop') },\r\n        { type: 'button', selected: editorAction === 'alignVertical', component: <AlignCenter transform='rotate(180)' />, action: () => eventBus.emit('alignVertical') },\r\n        { type: 'button', selected: editorAction === 'alignBottom', component: <AlignIcon />, action: () => eventBus.emit('alignBottom') },\r\n        { type: 'divider' },\r\n        { type: 'button', selected: editorGrid === true, component: <GridOnIcon />, action: () => activateEditorGrid(true) },\r\n        { type: 'button', selected: editorGrid === false, component: <GridOffIcon />, action: () => activateEditorGrid(false) },\r\n        { type: 'divider' },\r\n        { type: 'button', selected: false, component: <UndoIcon />, action: () => eventBus.emit('undo') },\r\n        { type: 'button', selected: false, component: <RedoIcon />, action: () => eventBus.emit('redo') }\r\n    ];\r\n\r\n    const options = [\r\n        { type: 'button', selected: false, component: <ShapeSettingsIcon />, action: () => eventBus.emit('settings', null, 'item') },\r\n        { type: 'button', selected: false, component: <CanvasSettingsIcon />, action: () => eventBus.emit('settings', null, 'canvas') }\r\n    ];\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.flex}>\r\n                {buttons.map(({ type, component, action, selected, value }, index) => (\r\n                    <div key={`${index}button`} className={classes.toolbar}>{\r\n                        type !== 'divider'\r\n                            ? <ExtendedButton disabled={selected} onClick={() => action()}>{component}</ExtendedButton>\r\n                            : <div className={classes.verticalDivider} />\r\n                    }</div>\r\n                ))}\r\n            </div>\r\n            <div className={classes.flex} style={{ width: '100%', justifyContent: 'flex-end' }}>\r\n                {options.map(({ type, component, action, selected, value }, index) => (\r\n                    <div key={`${index}button`} className={classes.toolbar}>{\r\n                        type !== 'divider'\r\n                            ? <ExtendedButton disabled={selected} onClick={() => action()}>{component}</ExtendedButton>\r\n                            : <div className={classes.verticalDivider} />\r\n                    }</div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EditorToolbar);","export function readText(filePath) {\r\n    return new Promise((resolve, reject) => {\r\n        if (window.File && window.FileReader && window.FileList && window.Blob) {\r\n            const reader = new FileReader();\r\n            let output = '';\r\n            if (filePath.files && filePath.files[0]) {\r\n                reader.onload = (e) => {\r\n                    output = e.target.result;\r\n                    resolve(output);\r\n                };\r\n                reader.readAsText(filePath.files[0]);\r\n            }\r\n        } else {\r\n            reject();\r\n        }\r\n    });\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ImportIcon from '@material-ui/icons/GetApp';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport Delete from '@material-ui/icons/Delete';\r\nimport { readText } from '../../util/fileReader';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: '0 8px'\r\n    },\r\n    extendedIcon: {\r\n        marginRight: theme.spacing(1)\r\n    }\r\n}));\r\n\r\nconst ExtendedButton = withStyles({\r\n    root: {\r\n        color: '#fff',\r\n        marginRight: '10px'\r\n    }\r\n})(IconButton);\r\n\r\nconst EditorMenu = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [fileSelector, setFileSelector] = useState(\r\n        document.createElement('input')\r\n    );\r\n\r\n    useEffect(() => {\r\n        const fileSelector = document.createElement('input');\r\n        fileSelector.setAttribute('type', 'file');\r\n        fileSelector.setAttribute('accept', 'image/*');\r\n        fileSelector.setAttribute('id', 'file-upload');\r\n        fileSelector.style.display = 'none';\r\n\r\n        setFileSelector(fileSelector);\r\n\r\n        const loadFiles = async (e) => {\r\n            try {\r\n                const res = await readText(e.target);\r\n                props.onImport(res);\r\n            } catch (err) {\r\n                // eslint-disable-next-line no-console\r\n                console.log(err);\r\n            }\r\n        };\r\n\r\n        fileSelector.addEventListener('change', loadFiles, false);\r\n    }, [props]);\r\n\r\n    const handleFileSelect = (e) => {\r\n        fileSelector.click();\r\n        e.preventDefault();\r\n        e.target.value = '';\r\n    };\r\n\r\n    const handleExportFile = () => {\r\n        props.onExport();\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <ExtendedButton onClick={handleFileSelect}>\r\n                <ImportIcon />\r\n            </ExtendedButton>\r\n            <ExtendedButton onClick={handleExportFile}>\r\n                <SaveIcon />\r\n            </ExtendedButton>\r\n            <ExtendedButton onClick={() => props.onClearArea()}>\r\n                <Delete />\r\n            </ExtendedButton>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EditorMenu;","import React, { useState, useEffect } from 'react';\r\nimport subjx from 'subjx';\r\nimport {\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText\r\n} from '@material-ui/core';\r\nimport {\r\n    Crop32Outlined as Rectangle,\r\n    RadioButtonUnchecked as Circle,\r\n    GradeOutlined as Shape,\r\n    //CropOriginalOutlined as Image,\r\n    TextFormat as Text\r\n} from '@material-ui/icons';\r\n\r\nconst items = [\r\n    ['rectangle', Rectangle],\r\n    ['circle', Circle],\r\n    ['shape', Shape],\r\n    ['text', Text]\r\n    // ['image', Image]\r\n];\r\n\r\nconst EditorItems = (props) => {\r\n    const droppables = [];\r\n    const [isCloneable, setAsCloneable] = useState(false);\r\n\r\n    const cloneConfig = {\r\n        appendTo: 'body',\r\n        stack: '#editor-background',\r\n        style: {\r\n            border: 'none',\r\n            background: 'transparent',\r\n            maxWidth: '150px',\r\n            textColor: 'transparent'\r\n        },\r\n        onInit() {},\r\n        onDrop(e) {\r\n            const itemType = this.el.getAttribute('data-type');\r\n            let newItem = null;\r\n\r\n            const editorRef = document.querySelector('#editor-background');\r\n\r\n            const offset = editorRef.getBoundingClientRect(),\r\n                x = e.clientX - offset.left + editorRef.scrollLeft,\r\n                y = e.clientY - offset.top + editorRef.scrollTop;\r\n\r\n            switch (itemType) {\r\n\r\n                case 'rectangle':\r\n                    newItem = [\r\n                        'rect',\r\n                        {\r\n                            x,\r\n                            y,\r\n                            width: 150,\r\n                            height: 100,\r\n                            stroke: 'black',\r\n                            fill: 'transparent'\r\n                        }\r\n                    ];\r\n                    break;\r\n                case 'circle':\r\n                    newItem = [\r\n                        'ellipse',\r\n                        {\r\n                            cx: x,\r\n                            cy: y,\r\n                            rx: 45,\r\n                            ry: 45,       \r\n                            stroke: 'black',\r\n                            fill: 'transparent'\r\n                        }\r\n                    ];\r\n                    break;\r\n                case 'shape':\r\n                    newItem = [\r\n                        'polygon',\r\n                        {\r\n                            strokeWidth: '1',\r\n                            stroke: 'black',\r\n                            fill: \"transparent\",\r\n                            strokeDasharray: \"0\",\r\n                            points: `${x + 80},${y} ${x + 160},${y + 50} ${x + 80},${y + 100} ${x},${y + 50}`\r\n                        },\r\n                        []\r\n                    ];\r\n                    break;\r\n                case 'image':\r\n                    newItem = [\r\n                        'foreignObject',\r\n                        {\r\n                            x,\r\n                            y,\r\n                            width: 150,\r\n                            height: 100,\r\n                            stroke: 'black',\r\n                            fill: 'transparent'\r\n                        },\r\n                        [\r\n                            [\r\n                                'div',\r\n                                {\r\n                                    display: 'block'\r\n                                },\r\n                                ['text']\r\n                            ]\r\n                        ]\r\n                    ];\r\n                    break;\r\n                case 'text':\r\n                    newItem = [\r\n                        'text',\r\n                        {\r\n                            x,\r\n                            y\r\n                        },\r\n                        'text'\r\n                    ];\r\n                    break;\r\n                default:\r\n                    break;\r\n\r\n            }\r\n\r\n            props.onDrop(\r\n                e,\r\n                newItem\r\n            );\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isCloneable) return;\r\n        droppables.forEach(el => subjx(el).clone(cloneConfig));\r\n        setAsCloneable(true);\r\n    }, [droppables, isCloneable, cloneConfig]);\r\n\r\n    return (\r\n        <List>\r\n            {items.map(([text, Icon]) => (\r\n                <ListItem\r\n                    data-type={text}\r\n                    ref={(el) => droppables.push(el)}\r\n                    button\r\n                    key={text}\r\n                >\r\n                    <ListItemIcon>\r\n                        <Icon />\r\n                    </ListItemIcon>\r\n                    <ListItemText primary={text} />\r\n                </ListItem>\r\n            ))}\r\n        </List>\r\n    );\r\n};\r\n\r\nexport default EditorItems;","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport {\n    TextField,\n    Checkbox,\n    FormGroup,\n    FormControlLabel,\n    Divider,\n    Typography,\n    Grid,\n    Slider\n} from '@material-ui/core';\n\nimport {\n    setEditorPaperSize,\n    setAllowDragging,\n    setAllowResizing,\n    setAllowRotating,\n    setAllowProportions,\n    setAllowRestrictions,\n    setSnapSteps,\n    setEditorGridSize\n} from '../../../actions';\n\nconst useStyles = makeStyles(() => ({\n    root: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n        bottom: 0,\n        backgroundColor: '#fdfdfd',\n        zIndex: 999\n    },\n    container: {\n        display: 'flex',\n        flex: 1\n    },\n    containerColumn: {\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    padding: {\n        padding: 10\n    },\n    label: {\n        paddingLeft: 10\n    }\n}));\n\nconst TextInput = withStyles({\n    root: {\n        margin: 10,\n        '& .MuiOutlinedInput-input': {\n            padding: '10px 10px'\n        }\n    }\n})(TextField);\n\nconst CheckboxLabel = withStyles({\n    root: {\n        margin: '0'\n    }\n})(FormControlLabel);\n\nconst mapStateToProps = (state) => ({\n    editorPaperSize: state.editorPaperSize,\n    allowDragging: state.allowDragging,\n    allowResizing: state.allowResizing,\n    allowRotating: state.allowRotating,\n    allowProportions: state.allowProportions,\n    allowRestrictions: state.allowRestrictions,\n    snapSteps: state.snapSteps,\n    editorGridSize: state.editorGridSize,\n    eventBus: state.eventBus\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    $setEditorPaperSize: (act) => dispatch(setEditorPaperSize(act)),\n    $setAllowDragging: (act) => dispatch(setAllowDragging(act)),\n    $setAllowResizing: (act) => dispatch(setAllowResizing(act)),\n    $setAllowRotating: (act) => dispatch(setAllowRotating(act)),\n    $setAllowProportions: (act) => dispatch(setAllowProportions(act)),\n    $setAllowRestrictions: (act) => dispatch(setAllowRestrictions(act)),\n    $setSnapSteps: (act) => dispatch(setSnapSteps(act)),\n    $setEditorGridSize: (act) => dispatch(setEditorGridSize(act))\n});\n\nconst CanvasSettings = (props) => {\n    const classes = useStyles();\n\n    const {\n        editorPaperSize: { width, height },\n        allowDragging,\n        allowResizing,\n        allowRotating,\n        allowProportions,\n        allowRestrictions,\n        editorGridSize,\n        snapSteps\n    } = props;\n\n    const [paperSize, setPaperSize] = useState({ width, height });\n    const [dragging, setDragging] = useState(allowDragging);\n    const [resizing, setResizing] = useState(allowResizing);\n    const [rotating, setRotating] = useState(allowRotating);\n    const [proportions, setProportions] = useState(allowProportions);\n    const [restrictions, setRestrictions] = useState(allowRestrictions);\n    const [snap, setSnap] = useState(snapSteps);\n\n    const handleChange = ([w, h]) => {\n        if (Number(w) < 1 || Number(h) < 1) return;\n\n        const editorPaperSize = { width: w, height: h };\n        setPaperSize(editorPaperSize);\n        props.$setEditorPaperSize({ editorPaperSize });\n    };\n\n    const handleSettings = (name) => (e) => {\n        const value = e.target.checked;\n\n        switch (name) {\n\n            case 'drag': {\n                setDragging(value);\n                props.$setAllowDragging({ allowDragging: value });\n                break;\n            }\n\n            case 'resize': {\n                setResizing(value);\n                props.$setAllowResizing({ allowResizing: value });\n                break;\n            }\n\n            case 'rotate': {\n                setRotating(value);\n                props.$setAllowRotating({ allowRotating: value });\n                break;\n            }\n\n            case 'proportions': {\n                setProportions(value);\n                props.$setAllowProportions({ allowProportions: value });\n                break;\n            }\n\n            case 'restrictions': {\n                setRestrictions(value);\n                props.$setAllowRestrictions({ allowRestrictions: value });\n                break;\n            }\n\n        }\n    };\n\n    const handleSnapChange = (value) => {\n        const snapValues = { ...snap, ...value };\n        setSnap(snapValues);\n        props.$setSnapSteps({ snapSteps: snapValues });\n    };\n\n    return (\n        <div\n            className={classes.root}\n            style={{ width: props.width }}\n        >\n            <form>\n                <FormGroup aria-label='position'>\n                    <div className={classes.padding}>\n                        <Typography className={classes.label} variant='subtitle1' align='left'>Canvas</Typography>\n                        <div className={classes.container}>\n                            <TextInput label='width' value={paperSize.width} variant='outlined' size='small' onChange={(e) => handleChange([e.target.value, paperSize.height])} />\n                            <TextInput label='height' value={paperSize.height} variant='outlined' size='small' onChange={(e) => handleChange([paperSize.width, e.target.value])} />\n                        </div>\n                        <Grid container>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Grid size</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider valueLabelDisplay='auto' value={editorGridSize} onChange={(e, val) => props.$setEditorGridSize({ editorGridSize: val })} step={10} />\n                                </div>\n                            </Grid>\n                        </Grid>\n                    </div>\n                    <Divider />\n                    <div className={classes.padding}>\n                        <Typography className={classes.label} variant='subtitle1' align='left'>Effects</Typography>\n                        <div className={classes.containerColumn}>\n                            <CheckboxLabel\n                                value={dragging}\n                                control={<Checkbox checked={dragging} color='primary' onChange={handleSettings('drag')} />}\n                                label='Allow dragging'\n                                labelPlacement='end'\n                            />\n                            <CheckboxLabel\n                                value={resizing}\n                                control={<Checkbox checked={resizing} color='primary' onChange={handleSettings('resize')} />}\n                                label='Allow resizing'\n                                labelPlacement='end'\n                            />\n                            <CheckboxLabel\n                                value={rotating}\n                                control={<Checkbox checked={rotating} color='primary' onChange={handleSettings('rotate')} />}\n                                label='Allow rotating'\n                                labelPlacement='end'\n                            />\n                            <CheckboxLabel\n                                value={proportions}\n                                control={<Checkbox checked={proportions} color='primary' onChange={handleSettings('proportions')} />}\n                                label='Keep aspect ratio'\n                                labelPlacement='end'\n                            />\n                            <CheckboxLabel\n                                value={restrictions}\n                                control={<Checkbox checked={restrictions} color='primary' onChange={handleSettings('restrictions')} />}\n                                label='Activate bounding area'\n                                labelPlacement='end'\n                            />\n                        </div>\n                    </div>\n                    <Divider />\n                    <div className={classes.padding}>\n                        <Typography className={classes.label} variant='subtitle1' align='left'>Snap</Typography>\n                        <Grid container>\n                            <Grid item xs={6}>\n                                <TextInput label='grid step x' value={snap.x} variant='outlined' size='small' onChange={(e) => handleSnapChange({ x: Number(e.target.value) })} />\n                            </Grid>\n                            <Grid item xs={6}>\n                                <TextInput label='grid step y' value={snap.y} variant='outlined' size='small' onChange={(e) => handleSnapChange({ y: Number(e.target.value) })} />\n                            </Grid>\n                        </Grid>\n                        <Grid container>\n                            <Grid item xs={6}>\n                                <TextInput label='snap angle' value={snap.angle} variant='outlined' size='small' onChange={(e) => handleSnapChange({ angle: Number(e.target.value) })} />\n                            </Grid>\n                        </Grid>\n                    </div>\n                </FormGroup>\n            </form>\n        </div>\n    );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CanvasSettings);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ChromePicker } from 'react-color';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () => ({\n    root: {\n        width: '50%',\n        padding: 0,\n        border: 0,\n        margin: 0,\n        display: 'inline-flex',\n        padding: 0,\n        position: 'relative',\n        flexDirection: 'column',\n        verticalAlign: 'top'\n    },\n    wrapper: {\n        padding: 10,\n        color: 'rgba(0, 0, 0, 0.87)',\n        cursor: 'text',\n        display: 'inline-flex',\n        position: 'relative',\n        fontSize: '1rem',\n        boxSizing: 'border-box',\n        alignItems: 'center',\n        lineHeight: '1.0876em'\n    },\n    colorPicker: {\n        flex: '0 1 100%',\n        border: 0,\n        height: '1.0876em',\n        margin: 0,\n        display: 'block',\n        padding: '6px 0 7px',\n        minWidth: 0,\n        background: 'none',\n        boxSizing: 'content-box',\n        border: '2px solid #c7c7c7',\n        borderRadius: 4\n    }\n});\n\nclass ColorPicker extends React.Component {\n\n    state = {\n        displayColorPicker: false,\n        currentColor: {\n            hex: this.props.initValue || this.props.value || 'transparent'\n        },\n        popover: {\n            position: 'absolute',\n            zIndex: '9999',\n            top: 0,\n            left: 0\n        }\n    };\n\n    componentDidUpdate() {\n        if (this.props.value !== this.state.currentColor.hex) {\n            this.setState({ currentColor: { hex: this.props.value } });\n        }\n    }\n\n    handleClick = (e) => {\n        const { clientX, clientY } = e;\n        const { clientWidth, clientHeight } = e.target;\n        this.setState({\n            displayColorPicker: !this.state.displayColorPicker,\n            popover: {\n                ...this.state.popover,\n                left: clientX - clientWidth,\n                top: clientY\n            }\n        });\n    };\n\n    handleClose = () => {\n        this.setState({ displayColorPicker: false });\n    };\n\n    handleChange = (color) => {\n        this.setState({ currentColor: color });\n        this.props.onChange(color);\n    };\n\n    render() {\n        const cover = {\n            position: 'fixed',\n            top: '0px',\n            right: '0px',\n            bottom: '0px',\n            left: '0px'\n        };\n\n        return (\n            <div className={this.props.classes.root}>\n                <div className={this.props.classes.wrapper}>\n                    <div className={this.props.classes.colorPicker} onClick={this.handleClick} style={{ backgroundColor: this.state.currentColor.hex }} />\n                </div>\n                {this.state.displayColorPicker ?\n                    ReactDOM.createPortal(\n                        <div style={this.state.popover}>\n                            <div style={cover} onClick={this.handleClose} />\n                            <ChromePicker color={this.state.currentColor} onChange={this.handleChange} />\n                        </div>,\n                        document.body\n                    ) : null}\n            </div>\n        );\n    }\n\n};\n\nexport default withStyles(styles)(ColorPicker);","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport ColorPicker from '../../helpers/ColorPicker';\n\nimport {\n    FormGroup,\n    FormControl,\n    Divider,\n    Typography,\n    Grid,\n    Slider,\n    Select,\n    InputBase\n} from '@material-ui/core';\n\nconst BootstrapInput = withStyles((theme) => ({\n    root: {\n        'label + &': {\n            marginTop: theme.spacing(3)\n        }\n    },\n    input: {\n        borderRadius: 4,\n        position: 'relative',\n        backgroundColor: theme.palette.background.paper,\n        border: '1px solid #ced4da',\n        fontSize: 16,\n        paddingLeft: 10,\n        transition: theme.transitions.create(['border-color', 'box-shadow']),\n        '&:focus': {\n            borderRadius: 4,\n            borderColor: '#80bdff',\n            boxShadow: '0 0 0 0.2rem rgba(0,123,255,.25)'\n        }\n    }\n}))(InputBase);\n\nconst useStyles = makeStyles(() => ({\n    root: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n        bottom: 0,\n        backgroundColor: '#fdfdfd',\n        zIndex: 999\n    },\n    container: {\n        display: 'flex',\n        flex: 1\n    },\n    containerColumn: {\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    padding: {\n        padding: 10\n    },\n    label: {\n        paddingLeft: 10,\n        width: '50%'\n    }\n}));\n\nconst mapStateToProps = (state) => ({\n    eventBus: state.eventBus,\n    selectedItems: state.items\n});\n\nconst ItemSettings = (props) => {\n    const classes = useStyles();\n\n    const { eventBus, selectedItems } = props;\n\n    const [fill, setFill] = useState('none');\n    const [fillOptions, setFillOptions] = useState('none');\n    const [stroke, setStroke] = useState('none');\n    const [strokeOptions, setStrokeOptions] = useState('none');\n    const [thickness, setThickness] = useState(2);\n    const [opacity, setOpacity] = useState(100);\n\n    const [textContent, setTextContent] = useState(null);\n    const [textProperties, setTextProperties] = useState({\n        letterSpacing: 5,\n        wordSpacing: 1,\n        lineHeight: 1\n    });\n\n    const setValue = (name, value, isEmit = true) => {\n        switch (name) {\n\n            case 'fill': {\n                setFill(value);\n                if (isEmit) eventBus.emit(name, null, value);\n                break;\n            }\n            case 'fillOptions': {\n                const nextVal = value === 'color' ? fill : 'none';\n                setFillOptions(value);\n                if (isEmit) eventBus.emit('fill', null, nextVal);\n                break;\n            }\n            case 'stroke': {\n                setStroke(value);\n                if (isEmit) eventBus.emit(name, null, value);\n                break;\n            }\n            case 'strokeOptions': {\n                const nextVal = value === 'color' ? stroke : 'none';\n                setStrokeOptions(value);\n                if (isEmit) eventBus.emit('stroke', null, nextVal);\n                break;\n            }\n            case 'thickness': {\n                const nextVal = value === null ? 2 : value;\n                setThickness(Number(nextVal));\n                if (isEmit) eventBus.emit(name, null, Number(nextVal));\n                break;\n            }\n            case 'opacity': {\n                const nextVal = value === null ? 1 : value;\n                setOpacity(Number(nextVal) * 100);\n                if (isEmit) eventBus.emit(name, null, Number(nextVal));\n                break;\n            }\n            case 'textContent': {\n                changeTextContent(value);\n                if (isEmit) eventBus.emit(name);\n                break;\n            }\n            case 'letterSpacing':\n            case 'wordSpacing':\n            case 'lineHeight': {\n                setTextProperties((prev) => ({ ...prev, [name]: value }));\n                if (isEmit) eventBus.emit(name, null, value);\n                break;\n            }\n            default:\n                break;\n\n        }\n    };\n\n    const isTextTag = (tag) => tag.tagName.toLowerCase() === 'text';\n\n    useEffect(() => {\n        if (!selectedItems.length) return;\n\n        Object.entries({\n            fill: 'fill',\n            stroke: 'stroke',\n            thickness: 'stroke-width',\n            opacity: 'opacity'\n        }).map(([event, attribute]) => {\n            setValue(\n                event,\n                selectedItems[0].el.getAttributeNS(null, attribute),\n                false\n            );\n        });\n\n        if (isTextTag(selectedItems[0].el)) {\n            setTextContent(selectedItems[0].el.textContent || '');\n        } else {\n            setTextContent(null);\n        };\n    }, [selectedItems]);\n\n    const changeTextContent = (textContent) => {\n        setTextContent(textContent);\n        selectedItems[0].el.textContent = textContent;\n    };\n\n    return (\n        <div\n            className={classes.root}\n            style={{ width: props.width }}\n        >\n            <form style={{ width: '100%' }}>\n                <FormGroup aria-label='position'>\n                    <div className={classes.padding}>\n                        <div className={classes.container}>\n                            <Typography className={classes.label} variant='subtitle1' align='left'>\n                                Fill\n                            </Typography>\n                        </div>\n                        <div className={classes.container}>\n                            <ColorPicker value={fill} onChange={(value) => setValue('fill', value.hex)} />\n                            <Select\n                                style={{ width: '50%', padding: 10 }}\n                                variant='outlined'\n                                native\n                                value={fillOptions}\n                                onChange={(e) => setValue('fillOptions', e.target.value)}\n                                name='age'\n                                input={<BootstrapInput value={fillOptions} />}\n                            >\n                                <option value={'none'}>none</option>\n                                <option value={'color'}>color</option>\n                            </Select>\n                        </div>\n                        <div className={classes.container}>\n                            <Typography className={classes.label} variant='subtitle1' align='left'>Stroke</Typography>\n                        </div>\n                        <div className={classes.container}>\n                            <ColorPicker value={stroke} onChange={(value) => setValue('stroke', value.hex)} />\n                            <Select\n                                style={{ width: '50%', padding: 10 }}\n                                variant='outlined'\n                                native\n                                value={strokeOptions}\n                                onChange={(e) => setValue('strokeOptions', e.target.value)}\n                                name='age'\n                                input={<BootstrapInput value={strokeOptions} />}\n                            >\n                                <option value={'none'}>none</option>\n                                <option value={'color'}>color</option>\n                            </Select>\n                        </div>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Thickness</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider\n                                        valueLabelDisplay='auto'\n                                        max={30}\n                                        value={thickness}\n                                        onChange={(e, val) => setValue('thickness', val)} step={1}\n                                    />\n                                </div>\n                            </Grid>\n                        </div>\n                    </div>\n                    <Divider />\n                    <div className={classes.padding}>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Opacity</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider\n                                        valueLabelDisplay='auto'\n                                        max={100}\n                                        value={opacity}\n                                        onChange={(e, val) => setValue('opacity', val / 100)} step={1}\n                                    />\n                                </div>\n                            </Grid>\n                        </div>\n                    </div>\n                    <Divider />\n                    {(textContent !== null) && <div className={classes.padding}>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Text</Typography>\n                                <BootstrapInput\n                                    style={{ padding: 10 }}\n                                    value={textContent}\n                                    onChange={(e) => setValue('textContent', e.target.value)}\n                                />\n                            </Grid>\n                        </div>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Letter space</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider\n                                        valueLabelDisplay='auto'\n                                        max={50}\n                                        value={textProperties.letterSpacing}\n                                        onChange={(e, val) => setValue('letterSpacing', val)} step={1}\n                                    />\n                                </div>\n                            </Grid>\n                        </div>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Word space</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider\n                                        valueLabelDisplay='auto'\n                                        max={100}\n                                        value={textProperties.wordSpacing}\n                                        onChange={(e, val) => setValue('wordSpacing', val)} step={1}\n                                    />\n                                </div>\n                            </Grid>\n                        </div>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Line height</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider\n                                        valueLabelDisplay='auto'\n                                        max={200}\n                                        value={textProperties.lineHeight}\n                                        onChange={(e, val) => setValue('lineHeight', val)} step={1}\n                                    />\n                                </div>\n                            </Grid>\n                        </div>\n                    </div>}\n                </FormGroup>\n            </form>\n        </div>\n    );\n};\n\nexport default connect(mapStateToProps)(ItemSettings);","import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { connect } from 'react-redux';\r\nimport clsx from 'clsx';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport parse from 'html-react-parser';\r\nimport { saveAs } from 'file-saver';\r\nimport 'construct-style-sheets-polyfill';\r\n\r\nimport {\r\n    Drawer,\r\n    AppBar,\r\n    CssBaseline,\r\n    Divider,\r\n    IconButton\r\n} from '@material-ui/core';\r\n\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\n\r\nimport EditorCanvas from './EditorCanvas';\r\nimport EditorToolbar from './EditorToolbar';\r\nimport EditorMenu from './EditorMenu';\r\nimport EditorItems from './EditorItems';\r\nimport { CanvasSettings, ItemSettings } from './settings';\r\n\r\nconst allowedSvgs = [\r\n    'g', 'rect', 'path', 'polygon', 'polyline',\r\n    'circle', 'ellipse', 'text', 'line', 'foreighobject'\r\n];\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst mapStateToProps = (state) => ({\r\n    eventBus: state.eventBus\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        marginTop: 46,\r\n        minHeight: 'calc(100vh - 46px)',\r\n        height: 'calc(100vh - 46px)',\r\n        justifyItems: 'center',\r\n        backgroundColor: '#e6e5e5'\r\n    },\r\n    menu: {\r\n        display: 'flex',\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        height: 46,\r\n        width: '100%',\r\n        zIndex: 999,\r\n        backgroundColor: theme.palette.primary.main\r\n    },\r\n    canvas: {\r\n        flexGrow: 1\r\n        // overflow: 'hidden auto'\r\n    },\r\n    canvasContainer: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        flexDirection: 'column'\r\n    },\r\n    appBar: {\r\n        borderTop: '1px solid #fff',\r\n        color: 'rgba(0,0,0,0.65)',\r\n        backgroundColor: 'rgb(230 229 229)',\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        transition: theme.transitions.create(['width', 'margin'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen\r\n        }),\r\n        position: 'relative',\r\n        height: 46\r\n    },\r\n    appBarShift: {\r\n        // marginLeft: drawerWidth,\r\n        // width: `calc(100% - ${drawerWidth}px)`,\r\n        transition: theme.transitions.create(['width', 'margin'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.enteringScreen\r\n        })\r\n    },\r\n    menuButton: {\r\n        marginRight: 36\r\n    },\r\n    hide: {\r\n        display: 'none'\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n        whiteSpace: 'nowrap'\r\n    },\r\n    drawerPaper: {\r\n        position: 'relative',\r\n        backgroundColor: '#fdfdfd'\r\n    },\r\n    drawerOpen: {\r\n        width: drawerWidth,\r\n        transition: theme.transitions.create('width', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.enteringScreen\r\n        })\r\n    },\r\n    drawerClose: {\r\n        transition: theme.transitions.create('width', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen\r\n        }),\r\n        overflowX: 'hidden',\r\n        width: theme.spacing(7) + 1,\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: theme.spacing(7) + 1\r\n        }\r\n    },\r\n    toolbar: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'flex-end',\r\n        padding: theme.spacing(0, 1)\r\n    },\r\n    content: {\r\n        flexGrow: 1,\r\n        padding: theme.spacing(2)\r\n    }\r\n}));\r\n\r\nconst Editor = (props) => {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [open, setOpen] = useState(false);\r\n    const [leftOffset, setLeftOffset] = useState(57);\r\n    const [content, setContent] = useState(null);\r\n    const [showSettings, setSettingsTab] = useState('canvas');\r\n\r\n    const parsedStyleSheet = new CSSStyleSheet();\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const getStyleRule = (className) => {\r\n        let cssText = {};\r\n        const classes = parsedStyleSheet.rules || parsedStyleSheet.cssRules;\r\n        for (let x = 0; x < classes.length; x++) {\r\n            if (classes[x].selectorText === className) {\r\n                for (let index = 0; index < classes[x].style.length; index++) {\r\n                    const propertyName = classes[x].style.item(index);\r\n                    cssText = {\r\n                        ...cssText,\r\n                        [propertyName]: classes[x].style[propertyName]\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        return cssText;\r\n    };\r\n\r\n    const parserOptions = {\r\n        replace(domNode) {\r\n            if (domNode.name === 'style') {\r\n                const styleSheet = new CSSStyleSheet();\r\n                styleSheet.replace(domNode.children[0].data);\r\n\r\n                [...styleSheet.rules].map((rule) => (\r\n                    parsedStyleSheet.insertRule(rule.cssText, parsedStyleSheet.cssRules.length)\r\n                ));\r\n\r\n                return <></>;\r\n            }\r\n\r\n            if (domNode.name === 'use') {\r\n                const ref = domNode.attribs['xlink:href'] || domNode.attribs.href;\r\n\r\n                if (!ref) return domNode;\r\n                const source = domNode.parent.children.find((childNode) => {\r\n                    return childNode.attribs && ('#' + childNode.attribs.id === ref);\r\n                });\r\n            }\r\n\r\n            if (domNode.type === 'tag' && allowedSvgs.indexOf(domNode.name) !== -1) {\r\n                domNode.attribs = domNode.attribs || {};\r\n\r\n                const { class: className = '' } = domNode.attribs;\r\n\r\n                if (domNode.name === 'g') {\r\n                    domNode.attribs = {\r\n                        ...domNode.attribs,\r\n                        ...getStyleRule(`.${domNode.attribs.class}`),\r\n                        class: `layer ${className}`\r\n                    };\r\n                } else {\r\n                    domNode.attribs = {\r\n                        ...domNode.attribs,\r\n                        ...getStyleRule(`.${domNode.attribs.class}`),\r\n                        class: className\r\n                    };\r\n                }\r\n            }\r\n            return domNode;\r\n        }\r\n    };\r\n\r\n    const handleImport = (res) => {\r\n        let reactSVGEl = parse(res, parserOptions);\r\n\r\n        if (Array.isArray(reactSVGEl)) {\r\n            reactSVGEl = reactSVGEl.find(item => (\r\n                typeof item === 'object' && item.type === 'svg'\r\n            ));\r\n        }\r\n\r\n        const element = document.createElement('div');\r\n        // this is a temporary decision to convert html to dom\r\n        // maybe in the future it is need to use react way to import complex html tree\r\n        ReactDOM.render(reactSVGEl, element, () => {\r\n            ReactDOM.unmountComponentAtNode(element);\r\n            setContent(element.childNodes[0]);\r\n        });\r\n    };\r\n\r\n    const handleExport = () => {\r\n        const rootSVG = document.getElementById('editor-canvas');\r\n        const [width, height] = ['width', 'height'].map((attr) => (\r\n            rootSVG.getAttributeNS(null, attr)\r\n        ));\r\n\r\n        const rootHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${width}\" height=\"${height}\">\r\n            ${document.getElementById('editable-content').innerHTML}\r\n        </svg>`;\r\n\r\n        const blob = new Blob([rootHTML]);\r\n        saveAs(blob, `export_${(new Date()).toISOString()}.svg`);\r\n    };\r\n\r\n    const handleClearArea = () => {\r\n        setContent(!Boolean(content));\r\n    };\r\n\r\n    const appendNewItem = (_, nodeProps) => {\r\n        const element = document.createElement('div');\r\n\r\n        ReactDOM.render(\r\n            <svg>{React.createElement(...nodeProps)}</svg>,\r\n            element,\r\n            () => {\r\n                ReactDOM.unmountComponentAtNode(element);\r\n                document.querySelector('#editable-content').appendChild(element.childNodes[0].childNodes[0]);\r\n            }\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        setLeftOffset(open ? drawerWidth : 57);\r\n    }, [open]);\r\n\r\n    useState(() => {\r\n        props.eventBus.on('settings', (value) => setSettingsTab(value));\r\n    }, []);\r\n\r\n    return (\r\n        // <div style={{ paddingTop: '60px' }}></div>\r\n        <div>\r\n            <div className={classes.menu}>\r\n                <EditorMenu\r\n                    onImport={handleImport}\r\n                    onExport={handleExport}\r\n                    onClearArea={handleClearArea}\r\n                />\r\n            </div>\r\n            <div className={classes.root}>\r\n                <CssBaseline />\r\n                <Drawer\r\n                    open={open}\r\n                    variant='permanent'\r\n                    className={clsx(classes.drawer, {\r\n                        [classes.drawerOpen]: open,\r\n                        [classes.drawerClose]: !open\r\n                    })}\r\n                    classes={{\r\n                        paper: clsx(classes.drawerPaper, {\r\n                            [classes.drawerOpen]: open,\r\n                            [classes.drawerClose]: !open\r\n                        })\r\n                    }}\r\n                >\r\n                    <div className={classes.toolbar}>\r\n                        <IconButton onClick={handleDrawerClose}>\r\n                            {\r\n                                theme.direction === 'rtl'\r\n                                    ? <ChevronRightIcon />\r\n                                    : <ChevronLeftIcon />\r\n                            }\r\n                        </IconButton>\r\n                        <IconButton\r\n                            color='inherit'\r\n                            aria-label='open drawer'\r\n                            onClick={handleDrawerOpen}\r\n                            edge='start'\r\n                            className={clsx({\r\n                                [classes.hide]: open\r\n                            })}\r\n                        >\r\n                            <ChevronRightIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <EditorItems onDrop={appendNewItem} />\r\n                    <Divider />\r\n                </Drawer>\r\n                <div className={classes.canvasContainer}>\r\n                    <AppBar\r\n                        // position='fixed'\r\n                        className={clsx(classes.appBar, {\r\n                            [classes.appBarShift]: open\r\n                        })}\r\n                    >\r\n                        <EditorToolbar />\r\n                    </AppBar>\r\n                    {/* <div className={classes.content}> */}\r\n                    <div style={{ position: 'relative', height: '100%' }}>\r\n                        <EditorCanvas\r\n                            leftOffset={leftOffset}\r\n                            topOffset={87}\r\n                            rightOffset={drawerWidth}\r\n                            mouseAction='edit'\r\n                        >\r\n                            {content}\r\n                        </EditorCanvas>\r\n                        {showSettings === 'canvas'\r\n                            ? <CanvasSettings width={drawerWidth} />\r\n                            : <ItemSettings width={drawerWidth} />\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default connect(mapStateToProps)(Editor);","import React from 'react';\r\nimport Editor from './editor';\r\n\r\nexport default function Main() {\r\n    return (\r\n        <Editor />\r\n    );\r\n}","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport './App.css';\nimport store from './store';\nimport Main from './components/Main';\n\nconst outerTheme = createMuiTheme({\n    palette: {\n        primary: {\n            main: '#00a8ff', // '#0c9696',\n            auxiliary: '#0a7e95',\n            contrastText: '#fff'\n        },\n        secondary: {\n            main: '#43a047'\n        },\n        error: {\n            main: '#f33732',\n            hover: '#b71c1c'\n        },\n        warning: {\n            main: '#f57c00',\n            hover: '#ffa726'\n        },\n        text: {\n            primary: 'rgba(0, 0, 0, 0.87)',\n            secondary: 'rgba(0, 0, 0, 0.54)'\n        },\n        disabled: {\n            primary: '#1b202a',\n            secondary: '#757575'\n        }\n    },\n    typography: {\n        fontSize: 14,\n        fontWeight: 'normal',\n        fontFamily: '-apple-system,system-ui,BlinkMacSystemFont,' +\n            '\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif',\n        subtitle1: {\n            fontSize: 12,\n            fontWeight: 400\n        },\n        h6: {\n            fontSize: 18,\n            fontWeight: 400,\n            lineHeight: 1.5\n        },\n        h5: {\n            fontSize: 20,\n            fontWeight: 400\n        },\n        h4: {\n            fontSize: 22,\n            fontWeight: 400\n        },\n        overline: {\n            color: '#546e7a',\n            fontSize: 11,\n            fontWeight: 500,\n            lineHeight: '13px'\n        },\n        caption: {\n            fontSize: '0.8rem',\n            fontWeight: 400\n        }\n    },\n    MuiPaper: {\n        rounded: {\n            borderRadius: '0.2rem'\n        },\n        elevation1: {\n            boxShadow: '0 1px 5px 0 rgba(0,0,0,0.16), 0 1px 5px 0 rgba(0,0,0,0.12)'\n        },\n        elevation2: {\n            boxShadow: '0px 3px 1px -2px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 1px 5px 0px rgba(0,0,0,0.12)'\n        },\n        elevation4: {\n            boxShadow: '0 5px 10px -5px rgba(0,0,0,0.5)'\n        }\n    }\n});\n\nfunction App() {\n    return (\n        <Provider store={store}>\n            <ThemeProvider theme={outerTheme}>\n                <div className=\"App\">\n                    <Main />\n                </div>\n            </ThemeProvider>\n        </Provider>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}