{"version":3,"sources":["containers/UndoStack.js","reducers/index.js","store/index.js","components/helpers/ZoomableGroup.js","components/editor/EditorContent.js","actions/index.js","components/editor/EditorCanvas.js","components/editor/EditorToolbar.js","util/fileReader.js","components/editor/EditorMenu.js","components/editor/EditorItems.js","components/helpers/ColorPicker.js","components/editor/settings/CanvasSettings.js","components/editor/settings/ItemSettings.js","components/editor/settings/AnimationSettings.js","components/editor/Editor.js","components/Main.js","App.js","serviceWorker.js","index.js"],"names":["UndoStack","self","this","stack","step","length","push","data","shift","splice","item","initialState","editorAction","editorGrid","editorGridSize","editorPaperSize","width","height","allowDragging","allowResizing","allowRotating","allowProportions","allowRestrictions","allowRotationOrigin","snapSteps","x","y","angle","eventBus","EventBus","undoStack","items","globalData","WeakMap","rootReducer","state","action","type","store","createStore","ZoomableGroup","props","zoomEl","useRef","useState","transform","setTransform","mouse","oldX","oldY","button","matrix","scale","pos","view","m","dirty","applyTo","update","join","toFixed","pan","amount","scaleAt","at","prescale","mouseEvent","useCallback","event","enable","el","current","clientX","clientY","preventDefault","events","e","offset","parentNode","getBoundingClientRect","left","top","deltaY","useEffect","map","eventName","eventFunc","addEventListener","passive","removeEventListener","id","ref","children","textItemEvents","subjxConfiguration","container","controlsContainer","rotatorAnchor","rotatorOffset","EditorContainer","root","editable","selectable","currentGroup","ignoreStoring","nextProps","content","dropItems","childNodes","appendChild","firstChild","handleDropLayer","lastElementChild","removeChild","dropLayer","Boolean","makeSelectables","stop","handleClick","bind","handleDoubleClick","handleKeyDown","handleUndo","handleRedo","reloadDraggables","document","classList","add","subscribeToEvents","on","Object","entries","fill","stroke","thickness","opacity","letterSpacing","wordSpacing","lineHeight","textContent","attribute","val","forEach","undefined","elements","setAttributeNS","includes","fitControlsToSize","te","storage","handles","lx1","x1","baseVal","value","ly1","y1","lx2","x2","ly2","y2","lineLength","calcTooltipPosition","nextX","nextY","controls","querySelector","l","r","h","t","b","v","key","applyAlignment","target","nextDraggable","subjx","drag","restrict","draggable","resizable","rotatable","rotationPoint","proportions","snap","onInit","console","log","options","scalable","tagName","toLowerCase","tooltip","createElementNS","actionButton","removeDraggable","onResize","dx","dy","setEditable","_getVertices","tr","tl","revX","revY","doW","doH","setItem","name","onMove","onRotate","delta","onDrop","setTimeout","next","onDestroy","remove","start","emit","$setSelectedItems","newItems","disable","setDraggable","indexOf","direction","startPoint","lengthX","lengthY","theta","Math","atan2","PI","Number","cos","sin","ds","DragSelect","selectables","area","subscribe","selected","pop","find","child","contains","stopPropagation","ctrlKey","onLayerChange","getLayerPath","applyCurrentGroupOpacity","nextCurrentGroup","dropCurrentGroupOpacity","node","layerChain","getAttribute","nodeName","nextItems","keyCode","exeDrag","undo","handleAction","redo","revert","sjxEl","exeRotate","rest","exeResize","React","Component","connect","dispatch","act","useStyles","makeStyles","flex","visibility","workArea","overflow","canvas","position","canvasContent","backgroundColor","page","boxShadow","layerBar","zIndex","margin","EditorCanvas","classes","rightOffset","initialW","initialH","window","outerWidth","outerHeight","paperWidth","paperHeight","w","paperSize","setPaperSize","canvasEl","controlsRef","workAreaRef","containerAreaRef","rootSVG","localAction","setLocalAction","layersBar","setLayersBar","setParentLayer","setStartPoint","setDropItems","scrollTop","clientHeight","scrollLeft","clientWidth","scrollToRef","svgPoint","elem","p","createSVGPoint","matrixTransform","getScreenCTM","inverse","drawElement","rect","drawArea1","getElementById","drawRect","abs","endDraw","className","Button","style","marginLeft","variant","color","size","onMouseUp","right","bottom","cursor","onMouseMove","onMouseDown","display","xmlns","gridSize","grid","patternUnits","d","strokeWidth","vectorEffect","canvasGrid","EditorContent","div","defaultProps","mouseAction","alignItems","verticalDivider","toolbar","padding","marginRight","ExtendedButton","withStyles","IconButton","$setEditorAction","$activateEditorGrid","setEditorAction","activateEditorGrid","buttons","component","Layers","Navigation","PhotoSizeSelectSmall","PanTool","Search","GridOn","GridOff","Undo","Redo","index","disabled","onClick","justifyContent","readText","filePath","Promise","resolve","reject","File","FileReader","FileList","Blob","reader","output","files","onload","result","readAsText","theme","extendedIcon","spacing","EditorMenu","createElement","fileSelector","setFileSelector","setAttribute","loadFiles","a","res","onImport","click","onExport","onClearArea","Rectangle","Circle","Shape","Text","EditorItems","droppables","isCloneable","setAsCloneable","cloneConfig","appendTo","border","background","maxWidth","textColor","itemType","newItem","editorRef","cx","cy","rx","ry","strokeDasharray","points","clone","List","text","Icon","ListItem","data-type","ListItemIcon","ListItemText","primary","ColorPicker","displayColorPicker","currentColor","hex","initValue","popover","setState","handleClose","handleChange","onChange","wrapper","colorPicker","ReactDOM","createPortal","body","fontSize","boxSizing","minWidth","containerColumn","flexDirection","label","paddingLeft","TextInput","TextField","CheckboxLabel","FormControlLabel","$setEditorPaperSize","$setAllowDragging","$setAllowResizing","$setAllowRotating","$setAllowProportions","$setAllowRestrictions","$setSnapSteps","$setEditorGridSize","$setAllowRotationOrigin","dragging","setDragging","resizing","setResizing","rotating","setRotating","setProportions","restrictions","setRestrictions","rotatingOrigin","setRotatingOrigin","setSnap","setFill","handleSettings","checked","handleSnapChange","snapValues","getAttributeNS","FormGroup","aria-label","Typography","align","Grid","xs","Slider","valueLabelDisplay","Divider","control","Checkbox","labelPlacement","BootstrapInput","marginTop","input","borderRadius","palette","paper","transition","transitions","create","borderColor","InputBase","selectedItems","fillOptions","setFillOptions","setStroke","strokeOptions","setStrokeOptions","setThickness","setOpacity","setTextContent","textProperties","setTextProperties","setValue","isEmit","nextVal","changeTextContent","prev","textTag","Select","native","max","keyframes","setKeyframes","frameType","setFrameType","frameValue","setFrameValue","duration","setDuration","playAnimation","element","cloneNode","css","parseFloat","allowedSvgs","minHeight","justifyItems","menu","main","flexGrow","canvasContainer","appBar","borderTop","drawer","easing","sharp","leavingScreen","appBarShift","enteringScreen","menuButton","hide","flexShrink","whiteSpace","drawerPaper","drawerOpen","drawerClose","overflowX","breakpoints","up","useTheme","open","setOpen","leftOffset","setLeftOffset","setContent","settingsTab","setSettingsTab","parsedStyleSheet","CSSStyleSheet","getStyleRule","cssText","rules","cssRules","selectorText","propertyName","parserOptions","replace","domNode","styleSheet","rule","insertRule","attribs","href","parent","childNode","class","SettingsComponent","_","condition","reactSVGEl","parse","Array","isArray","render","unmountComponentAtNode","attr","rootHTML","innerHTML","blob","saveAs","Date","toISOString","CssBaseline","Drawer","clsx","edge","nodeProps","AppBar","topOffset","Main","outerTheme","createMuiTheme","auxiliary","contrastText","secondary","error","hover","warning","typography","fontWeight","fontFamily","subtitle1","h6","h5","h4","overline","caption","MuiPaper","rounded","elevation1","elevation2","elevation4","App","ThemeProvider","location","hostname","match","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"+UA8DeA,E,WA5DX,WAAYC,GAAO,oBACfC,KAAKC,MAAQ,CAAC,MACdD,KAAKE,MAAQ,EACbF,KAAKD,KAAOA,E,mDAGR,IACIE,EAAUD,KAAVC,MACwB,OAA5BA,EAAMA,EAAME,OAAS,KACrBH,KAAKE,OACLD,EAAMG,KAAK,S,8BAIXC,GAAO,IACHJ,EAAUD,KAAVC,MACRA,EAAMA,EAAME,OAAS,GAAKE,EAEtBJ,EAAME,OAAS,GACfF,EAAMK,U,2BAITD,GACDL,KAAKE,OAELF,KAAKC,MAAMM,OAAOP,KAAKE,MACvBF,KAAKC,MAAMG,KAAKC,K,6BAIhB,IAAIG,EACIP,EAAUD,KAAVC,MAER,OAAID,KAAKE,MAAQ,GACbM,EAAOP,EAAMD,KAAKE,MAClBF,KAAKE,OACEM,GAEA,O,6BAGP,IACIP,EAAUD,KAAVC,MAGR,OADAD,KAAKE,MAAsB,IAAfF,KAAKE,KAAc,EAAIF,KAAKE,KACpCD,EAAME,OAAS,EAAIH,KAAKE,KACjBD,EAAMD,KAAKE,QAEX,O,sCAKXF,KAAKC,MAAQ,GACbD,KAAKE,MAAQ,M,8kBCtDrB,IAAMO,EAAe,CACjBC,aAAc,OACdC,YAAY,EACZC,eAAgB,GAChBC,gBAAiB,CACbC,MAAO,IACPC,OAAQ,KAEZC,eAAe,EACfC,eAAe,EACfC,eAAe,EACfC,kBAAkB,EAClBC,mBAAmB,EACnBC,qBAAqB,EACrBC,UAAW,CACPC,EAAG,GACHC,EAAG,GACHC,MAAO,IAEXC,SAAU,IAAIC,IACdC,UAAW,IAAI9B,EACf+B,MAAO,GACPC,WAAY,IAAIC,SAwELC,MArEf,WAA2D,IAAtCC,EAAqC,4DAAxBxB,GAAgByB,EAAQ,uCACtD,OAAQA,EAAOC,MAEX,IAAK,oBACD,OAAO,EAAP,GACOF,EADP,CAEIvB,aAAcwB,EAAOxB,eAE7B,IAAK,uBACD,OAAO,EAAP,GACOuB,EADP,CAEItB,WAAYuB,EAAOvB,aAE3B,IAAK,uBACD,OAAO,EAAP,GACOsB,EADP,CAEIrB,eAAgBsB,EAAOtB,iBAE/B,IAAK,wBACD,OAAO,EAAP,GACOqB,EADP,CAEIpB,gBAAiBqB,EAAOrB,kBAEhC,IAAK,qBACD,OAAO,EAAP,GACOoB,EADP,CAEIjB,cAAekB,EAAOlB,gBAE9B,IAAK,qBACD,OAAO,EAAP,GACOiB,EADP,CAEIhB,cAAeiB,EAAOjB,gBAE9B,IAAK,qBACD,OAAO,EAAP,GACOgB,EADP,CAEIf,cAAegB,EAAOhB,gBAE9B,IAAK,wBACD,OAAO,EAAP,GACOe,EADP,CAEId,iBAAkBe,EAAOf,mBAEjC,IAAK,yBACD,OAAO,EAAP,GACOc,EADP,CAEIb,kBAAmBc,EAAOd,oBAElC,IAAK,4BACD,OAAO,EAAP,GACOa,EADP,CAEIZ,oBAAqBa,EAAOb,sBAEpC,IAAK,iBACD,OAAO,EAAP,GACOY,EADP,CAEIX,UAAWY,EAAOZ,YAE1B,IAAK,qBACD,OAAO,EAAP,GACOW,EADP,CAEIJ,MAAOK,EAAOL,QAEtB,QACI,OAAOI,ICvFJG,EAFDC,YAAYL,G,qKCiHXM,EAlHO,SAACC,GACnB,IAAIC,EAASC,iBAAO,MADS,EAEKC,mBAAS,uBAFd,mBAEtBC,EAFsB,KAEXC,EAFW,KAGvBC,EAAQ,CAAEtB,EAAG,EAAGC,EAAG,EAAGsB,KAAM,EAAGC,KAAM,EAAGC,QAAQ,GAChDC,EAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAC3BC,EAAQ,EACNC,EAAM,CAAE5B,EAAG,EAAGC,EAAG,GAEjB4B,EAAQ,WACV,IAAMC,EAAIJ,EAENK,GAAQ,EA8BZ,MA7BY,CACRC,QADQ,WAEAD,GAAStD,KAAKwD,SAClBZ,EAAa,UAAD,OAAWS,EAAEI,KAAK,KAAlB,OAEhBD,OALQ,WAMJF,GAAQ,EACRD,EAAE,GAAKA,EAAE,GAAKH,EAAMQ,QAAQ,GAC5BL,EAAE,GAAKA,EAAE,GAAK,EACdA,EAAE,GAAKF,EAAI5B,EAAEmC,QAAQ,GACrBL,EAAE,GAAKF,EAAI3B,EAAEkC,QAAQ,IAEzBC,IAZQ,SAYJC,GACIN,GAAStD,KAAKwD,SAClBL,EAAI5B,GAAKqC,EAAOrC,EAChB4B,EAAI3B,GAAKoC,EAAOpC,EAChB8B,GAAQ,GAEZO,QAlBQ,SAkBAC,EAAIF,GACR,IAAMG,EAAWb,EAAQU,EACrBG,EAAW,IAAOA,EAAW,IAE7BT,GAAStD,KAAKwD,SAClBN,GAASU,EACTT,EAAI5B,EAAIuC,EAAGvC,GAAKuC,EAAGvC,EAAI4B,EAAI5B,GAAKqC,EAChCT,EAAI3B,EAAIsC,EAAGtC,GAAKsC,EAAGtC,EAAI2B,EAAI3B,GAAKoC,EAChCN,GAAQ,KA9BN,GAoCRU,EAAaC,uBAAY,SAACC,GAC5B,IAAqB,IAAjB3B,EAAM4B,OAAV,CACA,IAAMC,EAAK5B,EAAO6B,QACC,cAAfH,EAAM/B,OAAwBU,EAAMG,QAAS,GAC9B,YAAfkB,EAAM/B,MAAqC,aAAf+B,EAAM/B,OAAuBU,EAAMG,QAAS,GAC5EH,EAAMC,KAAOD,EAAMtB,EACnBsB,EAAME,KAAOF,EAAMrB,EACnBqB,EAAMtB,EAAI2C,EAAMI,QAChBzB,EAAMrB,EAAI0C,EAAMK,QACZ1B,EAAMG,SACNI,EAAKO,IAAI,CAAEpC,EAAGsB,EAAMtB,EAAIsB,EAAMC,KAAMtB,EAAGqB,EAAMrB,EAAIqB,EAAME,OACvDK,EAAKG,QAAQa,IAEjBF,EAAMM,qBAyBJC,EAAS,CACX,CAAC,YAAaT,GACd,CAAC,YAAaA,GACd,CAAC,UAAWA,GACZ,CAAC,WAAYA,GACb,CAAC,QA3BmBC,uBAAY,SAACS,GACjC,IAAqB,IAAjBnC,EAAM4B,OAAV,CACA,IAAMC,EAAK5B,EAAO6B,QACZM,EAASP,EAAGQ,WAAWC,wBACvBtD,EAAImD,EAAEJ,QAAUK,EAAOG,KACvBtD,EAAIkD,EAAEH,QAAUI,EAAOI,IAE7B3B,EAAKS,QAAQ,CAAEtC,IAAGC,KAAKkD,EAAEM,OAAS,EAAI,IAAO,EAAI,KACjD5B,EAAKG,QAAQa,GACbM,EAAEF,oBACH,CAACjC,EAAM4B,UAkBN,CAAC,WAhBaF,uBAAY,WAC1Bf,EAAQ,EACRC,EAAI5B,EAAI4B,EAAI3B,EAAI,EAChByB,EAAO,GAAKA,EAAO,GAAK,EACxBA,EAAO,GAAKA,EAAO,GAAKA,EAAO,GAAKA,EAAO,GAAK,EAChDG,EAAKO,IAAIR,GACTC,EAAKS,QAAQ,CAAEtC,EAAG,EAAGC,EAAG,GAAK,GAC7B4B,EAAKG,QAAQf,EAAO6B,cA4BxB,OAhBAY,qBAAU,WACN,IAAMb,EAAK5B,EAAO6B,QAQlB,OANI9B,EAAM4B,QACNM,EAAOS,KAAI,YAA6B,IAAD,mBAA1BC,EAA0B,KAAfC,EAAe,KACnChB,EAAGQ,WAAWS,iBAAiBF,EAAWC,EAAW,CAAEE,SAAS,OAIjE,WACHb,EAAOS,KAAI,YAA6B,IAAD,mBAA1BC,EAA0B,KAAfC,EAAe,KACnChB,EAAGQ,WAAWW,oBAAoBJ,EAAWC,EAAW,CAAEE,SAAS,UAG5E,CAAC/C,EAAM4B,SAGN,uBAAGqB,GAAG,iBAAiBC,IAAKjD,EAAQG,UAAWA,GAC1CJ,EAAMmD,W,koBCzGnB,IAAMC,EAAiB,CACnB,gBACA,cACA,aACA,eAGEC,EAAqB,CACvBC,UAAW,oBACXC,kBAAmB,sBACnBC,cAAe,IACfC,cAAe,IAoBbC,E,2MAEFC,KAAO,K,EACPC,UAAW,E,EACXC,WAAa,K,EACbvE,MAAQ,G,EACRwE,aAAe,K,EACfC,eAAgB,E,qFAEMC,GAClB,GAAIvG,KAAKkG,MACDK,EAAUC,UAAYxG,KAAKuC,MAAMiE,QAIjC,GAHAxG,KAAKyG,YACLzG,KAAKqG,aAAerG,KAAKkG,KAErBK,EAAUC,SAAWD,EAAUC,QAAQE,WACvC,KAAOH,EAAUC,QAAQE,WAAWvG,QAChCH,KAAKkG,KAAKS,YAAYJ,EAAUC,QAAQI,iBAI5C,IADA5G,KAAK6G,kBACE7G,KAAKkG,KAAKY,kBACb9G,KAAKkG,KAAKa,YAAY/G,KAAKkG,KAAKY,kBA2BhD,OArBIP,EAAUS,WACVhH,KAAK6G,mBAIoB,IAAxBN,EAAUE,WAAuBF,EAAUJ,WAC5CnG,KAAK6B,MAAM1B,QAEXH,KAAKyG,YAGLF,EAAUH,aAAea,QAAQjH,KAAKoG,cAClCG,EAAUH,aACVpG,KAAKoG,WAAapG,KAAKkH,oBAEtBX,EAAUH,YAAcpG,KAAKoG,aAC9BpG,KAAKoG,WAAWe,OAChBnH,KAAKoG,WAAa,QAInB,I,0CAIPpG,KAAKqG,aAAerG,KAAKkG,KAEzBlG,KAAKoH,YAAcpH,KAAKoH,YAAYC,KAAKrH,MACzCA,KAAKsH,kBAAoBtH,KAAKsH,kBAAkBD,KAAKrH,MACrDA,KAAKuH,cAAgBvH,KAAKuH,cAAcF,KAAKrH,MAC7CA,KAAKwH,WAAaxH,KAAKwH,WAAWH,KAAKrH,MACvCA,KAAKyH,WAAazH,KAAKyH,WAAWJ,KAAKrH,MACvCA,KAAK0H,iBAAmB1H,KAAK0H,iBAAiBL,KAAKrH,MAEnDA,KAAKkG,KAAKb,iBAAiB,UAAWrF,KAAKoH,aAC3CpH,KAAKkG,KAAKb,iBAAiB,WAAYrF,KAAKsH,mBAC5CK,SAAStC,iBAAiB,UAAWrF,KAAKuH,eAE1CvH,KAAKkG,KAAK0B,UAAUC,IAAI,kBAExB7H,KAAK8H,sB,6CAIL9H,KAAKkG,KAAKX,oBAAoB,UAAWvF,KAAKoH,aAC9CpH,KAAKkG,KAAKX,oBAAoB,WAAYvF,KAAKsH,mBAC/CK,SAASpC,oBAAoB,UAAWvF,KAAKuH,iB,0CAG5B,IAAD,OACC7F,EAAe1B,KAAxBuC,MAASb,SACjBA,EAASqG,GAAG,OAAQ/H,KAAKwH,YACzB9F,EAASqG,GAAG,OAAQ/H,KAAKyH,YACzB/F,EAASqG,GAAG,iBAAkB/H,KAAK0H,kBAEnCM,OAAOC,QAAQ,CACXC,KAAM,OACNC,OAAQ,SACRC,UAAW,eACXC,QAAS,UACTC,cAAe,iBACfC,YAAa,eACbC,WAAY,cACZC,YAAa,iBACdvD,KAAI,mCAAEhB,EAAF,KAASwE,EAAT,YAAwBhH,EAASqG,GAAG7D,GAAO,SAACyE,GAC/C,EAAK9G,MAAM+G,SAAQ,SAAApI,GAEf,QADYqI,IAARF,GAAmBnI,EAAKsI,SAAS5D,KAAI,SAAAd,GAAE,OAAIA,EAAG2E,eAAe,KAAML,EAAWC,MAC9EhD,EAAeqD,SAAS9E,GAAQ,CAChC1D,EAAKyI,oBAD2B,IAExBC,EAAO1I,EAAK2I,QAAQC,QAApBF,GAEFG,EAAMH,EAAGI,GAAGC,QAAQC,MACpBC,EAAMP,EAAGQ,GAAGH,QAAQC,MACpBG,EAAMT,EAAGU,GAAGL,QAAQC,MACpBK,EAAMX,EAAGY,GAAGP,QAAQC,MAEpBO,EAAa,CAACV,EAAMM,EAAKF,EAAMI,GATL,EAWT,EAAKG,oBACxB,CAACL,EAAKE,GACNE,GACC,GACD,IAf4B,mBAWzBE,EAXyB,KAWlBC,EAXkB,KAkBhB1J,EAAK2J,SAASC,cAAc,oBACpCrB,eAAe,KAAM,YAA7B,oBAAuDkB,EAAQ,GAA/D,aAAsEC,EAAQ,GAA9E,gBAKZlC,OAAOC,QAAQ,CACXoC,EAAG,YACHC,EAAG,aACHC,EAAG,kBACHC,EAAG,WACHC,EAAG,cACHC,EAAG,kBACJxF,KAAI,mCAAEyF,EAAF,KAAOzG,EAAP,YAAkBxC,EAASqG,GAAG7D,GAAO,kBAAM,EAAK0G,eAAeD,W,kCAG9DnB,GACRxJ,KAAKmG,SAAWqD,I,mCAGPqB,GACT,IAAM9K,EAAOC,KAGTuC,GACAvC,KAFA6B,MAEA7B,KADAuC,OAIAX,EAQAW,EARAX,UACAZ,EAOAuB,EAPAvB,cACAC,EAMAsB,EANAtB,cACAC,EAKAqB,EALArB,cACAC,EAIAoB,EAJApB,iBACAC,EAGAmB,EAHAnB,kBACAC,EAEAkB,EAFAlB,oBACAC,EACAiB,EADAjB,UAGEwJ,EAAgBC,YAAMF,GAAQG,KAAd,KACfpF,EADe,GAEdxE,GAAqB,CAAE6J,SAAU,gBAFnB,CAGlBC,UAAWlK,EACXmK,UAAWlK,EACXmK,UAAWlK,EACXmK,cAAehK,EACfiK,YAAanK,EACboK,KAAM,CACFhK,EAAGD,EAAUC,EACbC,EAAGF,EAAUE,EACbC,MAAOH,EAAUE,GAErBgK,OAbkB,WAaR,IAAD,OAELC,QAAQC,IAAI,eAAgB1L,KAAK8I,UAEjC9I,KAAK2L,QAAQC,SAAoC,IAAzB5L,KAAK8I,SAAS3I,QAA2D,SAA3CH,KAAK8I,SAAS,GAAG+C,QAAQC,cAG3E/L,EAAKqG,YAAcrG,EAAKwC,MAAM6D,YAC9BrG,EAAKqG,WAAWe,OARf,IAWG+B,EAAOlJ,KAAKmJ,QAAQC,QAApBF,GAEFG,EAAMH,EAAGI,GAAGC,QAAQC,MACpBC,EAAMP,EAAGQ,GAAGH,QAAQC,MACpBG,EAAMT,EAAGU,GAAGL,QAAQC,MACpBK,EAAMX,EAAGY,GAAGP,QAAQC,MAEpBO,EAAa,CAACV,EAAMM,EAAKF,EAAMI,GAlBhC,EAoBkB9J,EAAKiK,oBACxB,CAACL,EAAKE,GACNE,GACC,GACD,IAxBC,mBAoBEE,EApBF,KAoBSC,EApBT,KA2BC6B,EAAUpE,SAASqE,gBAAgB,6BAA8B,KACvED,EAAQhD,eAAe,KAAM,YAA7B,oBAAuDkB,EAAQ,GAA/D,aAAsEC,EAAQ,GAA9E,MACA6B,EAAQnE,UAAUC,IAAI,mBAEtB,IAAMoE,EAAetE,SAASqE,gBAAgB,6BAA8B,QAC5EC,EAAalD,eAAe,KAAM,IAAK,4OACvCkD,EAAalD,eAAe,KAAM,iBAAkB,gBACpDkD,EAAalD,eAAe,KAAM,OAAQ,oBAE1CgD,EAAQ1G,iBAAiB,SAAS,WAC9BtF,EAAKmM,gBAAgB,MAEzBH,EAAQpF,YAAYsF,GAEpBjM,KAAKmK,SAASxD,YAAYoF,IAE9BI,SAxDkB,YAwDI,IAAXC,EAAU,EAAVA,GAAIC,EAAM,EAANA,GACXtM,EAAKuM,aAAY,GADA,MAGEtM,KAAKuM,eAAhBC,EAHS,EAGTA,GAAIC,EAHK,EAGLA,GAENpD,EAAMoD,EAAGlL,EACTkI,EAAMgD,EAAGjL,EACTmI,EAAM6C,EAAGjL,EACTsI,EAAM2C,EAAGhL,EAETuI,EAAa,CAACV,EAAMM,EAAKF,EAAMI,GAVpB,EAYM9J,EAAKiK,oBACxB,CAACL,EAAKE,GACNE,GACC,GACD,IAhBa,mBAYVE,EAZU,KAYHC,EAZG,KAsBjB,GAHgBlK,KAAKmK,SAASC,cAAc,oBACpCrB,eAAe,KAAM,YAA7B,oBAAuDkB,EAAQ,GAA/D,aAAsEC,EAAQ,GAA9E,MAEInK,EAAKuG,cAAe,OAAOvG,EAAKuG,eAAgB,EAtBnC,MAuBgBtG,KAAKmJ,QAA9BuD,EAvBS,EAuBTA,KAAMC,EAvBG,EAuBHA,KAAMC,EAvBH,EAuBGA,IAAKC,EAvBR,EAuBQA,IAEzBjL,EAAUkL,QAAQ,CACdC,KAAM,SACN3I,GAAIpE,KAAK8I,SACTzI,KAAM,CACF+L,KACAC,KACAK,OACAC,OACAC,MACAC,UAIZG,OA9FkB,YA8FE,IAAXZ,EAAU,EAAVA,GAAIC,EAAM,EAANA,GACTtM,EAAKuM,aAAY,GADF,MAGItM,KAAKuM,eAAhBC,EAHO,EAGPA,GAAIC,EAHG,EAGHA,GAENpD,EAAMoD,EAAGlL,EACTkI,EAAMgD,EAAGjL,EACTmI,EAAM6C,EAAGjL,EACTsI,EAAM2C,EAAGhL,EAETuI,EAAa,CAACV,EAAMM,EAAKF,EAAMI,GAVtB,EAYQ9J,EAAKiK,oBACxB,CAACL,EAAKE,GACNE,GACC,GACD,IAhBW,mBAYRE,EAZQ,KAYDC,EAZC,KAsBf,GAHgBlK,KAAKmK,SAASC,cAAc,oBACpCrB,eAAe,KAAM,YAA7B,oBAAuDkB,EAAQ,GAA/D,aAAsEC,EAAQ,GAA9E,MAEInK,EAAKuG,cAAe,OAAOvG,EAAKuG,eAAgB,EACpD1E,EAAUkL,QAAQ,CAAEC,KAAM,OAAQ3I,GAAIpE,KAAK8I,SAAUzI,KAAM,CAAC+L,EAAIC,MAEpEY,SAvHkB,YAuHG,IAAVC,EAAS,EAATA,MACPnN,EAAKuM,aAAY,GADD,MAGGtM,KAAKuM,eAAhBC,EAHQ,EAGRA,GAAIC,EAHI,EAGJA,GAENpD,EAAMoD,EAAGlL,EACTkI,EAAMgD,EAAGjL,EACTmI,EAAM6C,EAAGjL,EACTsI,EAAM2C,EAAGhL,EAETuI,EAAa,CAACV,EAAMM,EAAKF,EAAMI,GAVrB,EAYO9J,EAAKiK,oBACxB,CAACL,EAAKE,GACNE,GACC,GACD,IAhBY,mBAYTE,EAZS,KAYFC,EAZE,KAsBhB,GAHgBlK,KAAKmK,SAASC,cAAc,oBACpCrB,eAAe,KAAM,YAA7B,oBAAuDkB,EAAQ,GAA/D,aAAsEC,EAAQ,GAA9E,MAEInK,EAAKuG,cAAe,OAAOvG,EAAKuG,eAAgB,EACpD1E,EAAUkL,QAAQ,CAAEC,KAAM,SAAU1M,KAAM6M,EAAO9I,GAAIpE,KAAK8I,YAE9DqE,OAhJkB,WAuJd,GANAC,YAAW,kBACPrN,EAAKuM,aAAY,KAClB,KAICvM,EAAKuG,cAAe,OAAOvG,EAAKuG,eAAgB,EACpD1E,EAAUyL,QAEdC,UA1JkB,WA2JdF,YAAW,kBACPrN,EAAKuM,aAAY,KAClB,KACHtM,KAAK8I,SAAS5D,KAAI,SAACd,GAAD,OAAQA,EAAGwD,UAAU2F,OAAO,qBAE1CxN,EAAKqG,YAAcrG,EAAKwC,MAAM6D,YAC9BrG,EAAKqG,WAAWoH,YAO5B,OAFAxN,KAAKuC,MAAMb,SAAS+L,KAAK,WAAY,KAAM,QAC3CzN,KAAKuC,MAAMmL,kBAAkB,CAAE7L,MAAM,GAAD,mBAAM7B,KAAK6B,OAAX,CAAkBiJ,MAC/CA,I,yCAGS,IAEV6C,EADY3N,KAAV6B,MACeqD,KAAI,SAAC1E,GAExB,OADAA,EAAKoN,UACE,CAACpN,EAAKsI,aAGjB9I,KAAK6B,MAAL,YAAiB7B,KAAK6N,aAAaF,M,sCAGvBzC,GAAY,IAChBrJ,EAAU7B,KAAV6B,MAERA,EAAMtB,OAAOsB,EAAMiM,QAAQ5C,GAAY,GACvCA,EAAU0C,UAEV1C,EAAUpC,SAAS5D,KAAI,SAAAd,GAAE,OAAIA,EAAGQ,WAAWmC,YAAY3C,MACvDpE,KAAKuC,MAAMb,SAAS+L,KAAK,WAAY,KAAM,Y,qCAGhCM,GAAY,IAAD,OACtB/N,KAAK6B,MAAMqD,KAAI,SAAC1E,GACZA,EAAKoK,eAAemD,GADC,IAEb7E,EAAO1I,EAAK2I,QAAQC,QAApBF,GAEFG,EAAMH,EAAGI,GAAGC,QAAQC,MACpBC,EAAMP,EAAGQ,GAAGH,QAAQC,MACpBG,EAAMT,EAAGU,GAAGL,QAAQC,MACpBK,EAAMX,EAAGY,GAAGP,QAAQC,MAEpBO,EAAa,CAACV,EAAMM,EAAKF,EAAMI,GAThB,EAWE,EAAKG,oBACxB,CAACL,EAAKE,GACNE,GACC,GACD,IAfiB,mBAWdE,EAXc,KAWPC,EAXO,KAkBL1J,EAAK2J,SAASC,cAAc,oBACpCrB,eAAe,KAAM,YAA7B,oBAAuDkB,EAAQ,GAA/D,aAAsEC,EAAQ,GAA9E,W,0CAIY8D,EAAYjE,EAAYpF,EAAQlD,GAAQ,IAAD,cACxCuM,EADwC,GAChDzM,EADgD,KAC7CC,EAD6C,mBAE5BuI,EAF4B,GAEhDkE,EAFgD,KAEvCC,EAFuC,KAIjDC,EAAQC,KAAKC,MACfH,EACAD,GACCxM,EAAQ2M,KAAKE,GAAK,IAEvB,MAAO,CACHC,OAAOhN,GAAKoD,EAASyJ,KAAKI,IAAIL,GAC9BI,OAAO/M,GAAKmD,EAASyJ,KAAKK,IAAIN,M,wCAInB,IAAD,OACRO,EAAK,IAAIC,IAAW,CACtBC,YAAa5O,KAAKqG,aAAaX,SAC/BmJ,KAAM7O,KAAKuC,MAAM2D,KAAK7B,UAc1B,OAXAqK,EAAGI,UAAU,YAAY,YAGrB,IAH+C,IAAhBC,EAAe,EAAtBlN,MAChBA,EAAU,EAAVA,MAEDA,EAAM1B,OAAS,GAAG0B,EAAMmN,MAAMpB,UACrC,GAAKmB,EAAS5O,OAAd,CAEA,IAAMwN,EAAW,EAAKE,aAAakB,GAEnC,EAAKlN,MAAQ,CAAC8L,OAGXe,I,kCAGChK,GACR,IAAI1E,KAAKmG,UAAanG,KAAKuC,MAAM4D,SAAjC,CADW,IAIPE,EAEArG,KAFAqG,aACAxE,EACA7B,KADA6B,MAGEgJ,EAAS,YAAIxE,EAAaK,YAC3BuI,MAAK,SAACC,GAAD,QACAA,EAAMtH,WAAasH,EAAMtH,UAAUuH,SAAS,cAC9CD,EAAMC,SAASzK,EAAEmG,aACdxE,IAAiB3B,EAAEmG,OAASnG,EAAEmG,OAAS,MAKlD,GAAKA,EAAL,CAIA,GAFAnG,EAAE0K,mBAEG1K,EAAE2K,QACH,KAAOxN,EAAM1B,OAAS,GAAG0B,EAAMmN,MAAMpB,UAGzC,IAAMD,EAAW3N,KAAK6N,aAAahD,GAEnChJ,EAAMzB,KAAKuN,GACX3N,KAAK6B,MAAQA,M,wCAGC6C,GAEd,GADAA,EAAEF,kBACExE,KAAKmG,UAAanG,KAAKuC,MAAM4D,SAAjC,CAFiB,IAITE,EAAiBrG,KAAjBqG,aAEFwE,EAAS,YAAIxE,EAAaK,YAC3BuI,MAAK,SAACC,GAAD,OACDA,EAAMtH,WAAasH,EAAMtH,UAAUuH,SAAS,aAC7CD,EAAMC,SAASzK,EAAEmG,WAGrBA,GAA6B,MAAnBA,EAAOgB,UACjB7L,KAAKyG,YACLzG,KAAKqG,aAAewE,EACpB7K,KAAKuC,MAAM+M,cACPtP,KAAKuP,aAAa1E,IAEtBxE,EAAauB,UAAU2F,OAAO,kBAC9B1C,EAAOjD,UAAUC,IAAI,kBACrB7H,KAAKwP,yBAAyB3E,O,wCAInB,IACPxE,EAAiBrG,KAAjBqG,aACR,GAAIA,IAAiBrG,KAAKkG,KACtB,OAAOlG,KAAKuC,MAAM+M,cACdtP,KAAKuP,aAAalJ,IAI1BrG,KAAKyG,YACLJ,EAAauB,UAAU2F,OAAO,kBAC9B,IAAMkC,EAAmBpJ,EAAazB,WACtC5E,KAAKqG,aAAeoJ,EACpBzP,KAAKuC,MAAM+M,cACPtP,KAAKuP,aAAaE,IAGtBzP,KAAK0P,wBAAwBrJ,GAC7BrG,KAAKwP,yBAAyBC,GAC9BA,EAAiB7H,UAAUC,IAAI,oB,mCAGtBgD,GAIT,IAHA,IAAI8E,EAAO9E,EACP+E,EAAa,GAEVD,IAAS3P,KAAKkG,MACjB0J,GAAcD,EAAKE,aAAa,OAASF,EAAKG,UAAY,MAAQF,EAClED,EAAOA,EAAK/K,WAGhB,OAAOgL,I,kCAKP,IAFuB,IAAjBG,EAAgB,uDAAJ,GACVlO,EAAU7B,KAAV6B,MACDA,EAAM1B,OAAS,GAAG0B,EAAMmN,MAAMpB,UACrC5N,KAAK6B,MAAQkO,I,oCAGHrL,GAAI,IACN7C,EAAU7B,KAAV6B,MACR,GAAkB,KAAd6C,EAAEsL,QACF,KAAOnO,EAAM1B,OAAS,GAAG,CACrB,IAAMK,EAAOqB,EAAMmN,MACnBxO,EAAKoN,UACLpN,EAAK4D,GAAGQ,WAAWmC,YAAYvG,EAAK4D,SAErC,GAAkB,KAAdM,EAAEsL,SAAkBtL,EAAE2K,QAAS,CACtC,KAAOxN,EAAM1B,OAAS,GAAG0B,EAAMmN,MAAMpB,UACrClJ,EAAEF,sBACmB,KAAdE,EAAEsL,SAEY,KAAdtL,EAAEsL,SAEFtL,EAAEsL,QAAU,IAAMtL,EAAEsL,QAAU,KACrCtL,EAAEF,iBACF3C,EAAM+G,SAAQ,SAACpI,GACXA,EAAKyP,QAAQ,CACT7D,GAAkB,KAAd1H,EAAEsL,SAAgC,KAAdtL,EAAEsL,QAA+B,KAAdtL,EAAEsL,SAAkB,GAAK,GAAK,EACzE3D,GAAkB,KAAd3H,EAAEsL,SAAgC,KAAdtL,EAAEsL,QAA+B,KAAdtL,EAAEsL,SAAkB,GAAK,GAAK,U,+CAMhE5L,GACrBA,EAAG2E,eAAe,KAAM,UAAW,GAC/B3E,IAAOpE,KAAKkG,OAChB,YAAI9B,EAAGQ,WAAW8B,YAAYkC,SAAQ,SAAAsG,GACZ,MAAlBA,EAAMrD,SAAmBqD,IAAU9K,GAAI8K,EAAMnG,eAAe,KAAM,UAAW,OAErF/I,KAAKwP,yBAAyBpL,EAAGQ,e,8CAGbR,GACpB,YAAIA,EAAGQ,WAAW8B,YAAYkC,SAAQ,SAAAsG,GACZ,MAAlBA,EAAMrD,SAAmBqD,IAAU9K,GAAI8K,EAAMnG,eAAe,KAAM,UAAW,Q,mCAI3E,IAGJvI,EAFgBR,KAAKuC,MAAnBX,UAEesO,OAEnB1P,IACAR,KAAKsG,eAAgB,EACrBtG,KAAKmQ,aAAa3P,GAAM,M,mCAIlB,IAGJA,EAFgBR,KAAKuC,MAAnBX,UAEewO,OAEnB5P,IACAR,KAAKsG,eAAgB,EACrBtG,KAAKmQ,aAAa3P,GAAM,M,qCAIG,IAAtB0B,EAAqB,uDAAZ,GAAImO,EAAQ,uCAG9B,OAFArQ,KAAKyG,YAEGvE,EAAO6K,MAEX,IAAK,SACD,IAAMG,EAAQhL,EAAO7B,KACfiQ,EAAQtQ,KAAK6N,aAAa3L,EAAOkC,IAEvCkM,EAAMC,UAAU,CAAErD,MAAOA,GAASmD,GAAU,EAAI,KAChDC,EAAM1C,UAEN,MAEJ,IAAK,OAAS,IAAD,cACQ1L,EAAO7B,KADf,GACF+L,EADE,KACEC,EADF,KAEHiE,EAAQtQ,KAAK6N,aAAa3L,EAAOkC,IAEvCkM,EAAML,QAAQ,CACV7D,GAAIA,GAAMiE,GAAU,EAAI,GACxBhE,GAAIA,GAAMgE,GAAU,EAAI,KAE5BC,EAAM1C,UACN,MAEJ,IAAK,SAAW,IAAD,EACiB1L,EAAO7B,KAA3B+L,EADG,EACHA,GAAIC,EADD,EACCA,GAAOmE,EADR,2BAELF,EAAQtQ,KAAK6N,aAAa3L,EAAOkC,IAEvCkM,EAAMG,UAAN,GACIrE,GAAIA,GAAMiE,GAAU,EAAI,GACxBhE,GAAIA,GAAMgE,GAAU,EAAI,IACrBG,IAEPF,EAAM1C,a,+BAQR,IAAD,OACL,OACI,uBAAGpI,GAAG,mBAAmBC,IAAK,SAAArB,GAAE,OAAI,EAAK8B,KAAO9B,S,GA1lB9BsM,IAAMC,WAgmBrBC,eA7mBS,SAAC3O,GAAD,MAAY,CAChCrB,eAAgBqB,EAAMrB,eACtBI,cAAeiB,EAAMjB,cACrBC,cAAegB,EAAMhB,cACrBC,cAAee,EAAMf,cACrBC,iBAAkBc,EAAMd,iBACxBC,kBAAmBa,EAAMb,kBACzBC,oBAAqBY,EAAMZ,oBAC3BC,UAAWW,EAAMX,UACjBI,SAAUO,EAAMP,SAChBE,UAAWK,EAAML,cAdM,SAACiP,GAAD,MAAe,CACtCnD,kBAAmB,SAACoD,GAAD,OAASD,ECwBrB,CAAE1O,KAAM,qBAAsBN,MDxBiBiP,ECuBvBjP,YDylBpB+O,CAA6C3K,GE9nBtD8K,GAAYC,aAAW,iBAAO,CAChC9K,KAAM,CACF,mBAAoB,EACpB,WAAY,EACZ+K,KAAM,EACNC,WAAY,WAEhBC,SAAU,CACNC,SAAU,QAEdC,OAAQ,CACJC,SAAU,WACVvM,IAAK,EACLD,KAAM,GAEVyM,cAAe,CACXC,gBAAiB,SAErBC,KAAM,CACFC,UAAW,2BAEfC,SAAU,CACNL,SAAU,WACVM,OAAQ,MACRC,OAAQ,OAkDVC,GAAe,SAACvP,GAClB,IAAMwP,EAAUhB,KAEZrQ,EAQA6B,EARA7B,aACAC,EAOA4B,EAPA5B,WACAC,EAMA2B,EANA3B,eACAC,EAKA0B,EALA1B,gBAGAmR,EAEAzP,EAFAyP,YACUxL,EACVjE,EADAmD,SAIOuM,EAEPpR,EAFAC,MACQoR,EACRrR,EADAE,OAfwB,EAkBM,CAACoR,OAAOC,WAAYD,OAAOE,aAAtDC,EAlBqB,KAkBTC,EAlBS,OAoBM7P,mBAAS,CACvC8P,EAAGP,EACH1H,EAAG2H,EACH3Q,GAAI+Q,EAAaL,GAAY,EAC7BzQ,GAAI+Q,EAAcL,GAAY,IAxBN,mBAoBrBO,EApBqB,KAoBVC,EApBU,KA2BxBC,EAAW,KACXC,EAAc,KACZC,EAAcpQ,iBAAO,MACrBqQ,EAAmBrQ,iBAAO,MAC1BsQ,EAAUtQ,iBAAO,MA/BK,EAiCUC,mBAAS,MAjCnB,mBAiCrBsQ,EAjCqB,KAiCRC,EAjCQ,OAkCMvQ,mBAAS,MAlCf,mBAkCrBwQ,EAlCqB,KAkCVC,EAlCU,OAmCQzQ,oBAAS,GAnCjB,mBAmCrBsE,EAnCqB,KAmCVoM,EAnCU,OAoCQ1Q,mBAAS,CAAEnB,EAAG,EAAGC,EAAG,IApC5B,mBAoCrBwM,EApCqB,KAoCTqF,EApCS,OAsCM3Q,oBAAS,GAtCf,mBAsCrB+D,EAtCqB,KAsCV6M,EAtCU,KA8C5BrO,qBAAU,YANU,SAACQ,GACjB,IAAMI,EAAYiN,EAAiBzO,QACnCwB,EAAU0N,WAAa9N,EAAIpB,QAAQmP,aAAe3N,EAAU2N,cAAgB,EAC5E3N,EAAU4N,YAAchO,EAAIpB,QAAQqP,YAAc7N,EAAU6N,aAAe,EAI3EC,CAAYd,KACb,CAACJ,IAYJxN,qBAAU,WACNyN,EAAa,CACTF,EAAGP,EACH1H,EAAG2H,EACH3Q,GAAI+Q,EAAaL,GAAY,EAC7BzQ,GAAI+Q,EAAcL,GAAY,MAEnC,CAAC3P,EAAM1B,kBAEV,IA0EM+S,EAAW,SAACC,EAAMtS,EAAGC,GACvB,IAAIsS,EAAID,EAAKE,iBAGb,OAFAD,EAAEvS,EAAIA,EACNuS,EAAEtS,EAAIA,EACCsS,EAAEE,gBAAgBH,EAAKI,eAAeC,YAG3CC,EAAc,SAACjQ,GACjB,IAAMkQ,EAAOzM,SAASqE,gBAAgB,6BAA8B,QACpEoI,EAAKrL,eAAe,KAAM,eAAgB,GAC1CqL,EAAKrL,eAAe,KAAM,OAAQ,QAClCqL,EAAKrL,eAAe,KAAM,SAAU,QAEpC,IAAMsL,EAAY1M,SAAS2M,eAAe,qBAEpC9G,EAAQoG,EAASS,EAAWnQ,EAAMI,QAASJ,EAAMK,SACvDoD,SAAS2M,eAAe,oBAAoB3N,YAAYyN,GAExD,IAAMG,EAAW,SAAC7P,GACd,IAAIoP,EAAIF,EAASS,EAAW3P,EAAEJ,QAASI,EAAEH,SACrCiO,EAAIpE,KAAKoG,IAAIV,EAAEvS,EAAIiM,EAAMjM,GACzBgJ,EAAI6D,KAAKoG,IAAIV,EAAEtS,EAAIgM,EAAMhM,GACzBsS,EAAEvS,EAAIiM,EAAMjM,IACZuS,EAAEvS,EAAIiM,EAAMjM,GAGZuS,EAAEtS,EAAIgM,EAAMhM,IACZsS,EAAEtS,EAAIgM,EAAMhM,GAGhB4S,EAAKrL,eAAe,KAAM,IAAK+K,EAAEvS,GACjC6S,EAAKrL,eAAe,KAAM,IAAK+K,EAAEtS,GACjC4S,EAAKrL,eAAe,KAAM,QAASyJ,GACnC4B,EAAKrL,eAAe,KAAM,SAAUwB,IAQxC8J,EAAUhP,iBAAiB,YAAakP,GACxCF,EAAUhP,iBAAiB,WANX,SAAVoP,IACFJ,EAAU9O,oBAAoB,YAAagP,GAC3CF,EAAU9O,oBAAoB,UAAWkP,OAOjD,OACI,yBAAKC,UAAW3C,EAAQ7L,MAEhBgN,GACI,uBAAGwB,UAAW3C,EAAQJ,UACjBuB,EACD,kBAACyB,EAAA,EAAD,CACIC,MAAO,CAAEC,WAAY,GACrBC,QAAQ,YACRC,MAAM,UACNC,KAAK,QACLC,UA7DL,SAACvQ,GAChBA,EAAE0K,kBACFgE,GAAe,KAsDC,SAWZ,yBACI5N,GAAG,YACHC,IAAKqN,EACL4B,UAAW3C,EAAQZ,SACnByD,MAAO,CACH7P,IAAK,EACLD,KAAM,EACNoQ,MAAOlD,EACPmD,OAAQ,EACR7D,SAAU,WACV8D,OAAQ,OACRhE,SAAU,UAEdiE,YA9GY,SAAC3Q,GAGrB,OAFAA,EAAEF,iBAEMwO,GAEJ,IAAK,OACD,IAAM5G,EAAkC,GAA5B4B,EAAWzM,EAAImD,EAAEJ,SACvB+H,EAAkC,GAA5B2B,EAAWxM,EAAIkD,EAAEH,SAEvBsB,EAAYiN,EAAiBzO,QACnCwB,EAAU0N,UAAYvF,EAAWuF,UAAYlH,EAC7CxG,EAAU4N,WAAazF,EAAWyF,WAAarH,IAoG/CkJ,YAtJY,SAAC5Q,GAErB,OADAA,EAAEF,iBACM9D,GAEJ,IAAK,OACD,GAAIkS,EAAYzD,SAASzK,EAAEmG,QAAS,OAEpC,IAAK8H,EAASjN,SAAS,GAAGyJ,SAASzK,EAAEmG,QAGjC,OAFAyI,GAAa,GACb/Q,EAAMb,SAAS+L,KAAK,WAAY,KAAM,UAC/BL,YAAW,kBAAMkG,GAAa,KAAQ,KAEjD,MACJ,IAAK,OACD,IAAMzN,EAAYiN,EAAiBzO,QAEnCgP,EAAc,CACV9R,EAAGmD,EAAEJ,QACL9C,EAAGkD,EAAEH,QACLgP,UAAW1N,EAAU0N,UACrBE,WAAY5N,EAAU4N,aAE1B,MACJ,IAAK,SAGL,IAAK,OACD,MACJ,IAAK,WACDU,EAAYzP,GAOpBuO,EAAevS,IAmHPuU,UAtFU,WAClBhC,EAAe,QAuFP,yBACIxN,IAAKoN,EACL+B,MAAO,CACHW,QAAS,eACTjE,SAAU,WACVxQ,MAAOwR,EACPvR,OAAQwR,IAGZ,yBACI/M,GAAG,mBACHgQ,MAAM,6BACNd,UAAW3C,EAAQV,OACnBvQ,MAAM,OACNC,OAAO,OACPqQ,SAAS,UACT3L,IAAKsN,GAEL,kBAAC,EAAD,CAAe5O,OAAyB,SAAjBzD,GACnB,uBAAG8E,GAAG,UAAU7C,UAAS,oBAAe8P,EAAUlR,EAAzB,aAA+BkR,EAAUjR,EAAzC,MACrB,uBAAGgE,GAAG,qBACF,0BAAMA,GAAG,cAAcjE,EAAE,IAAIC,EAAE,IAAIV,MAAO2R,EAAUD,EAAGzR,OAAQ0R,EAAUlI,EAAGrC,KAAK,QAAQC,OAAO,SAE5FxH,EAnSrB,SAAC8R,EAAWgD,GAC3B,IAAMC,EAAkB,GAAXD,EACb,OACI,2BACI,8BACI,6BACIjQ,GAAG,YACH1E,MAAO2U,EACP1U,OAAQ0U,EACRvN,KAAK,QACLyN,aAAa,kBAEb,0BACIC,EAAC,YAAOH,EAAP,sBAA6BA,GAC9BvN,KAAK,OACLC,OAAO,OACP0N,YAAY,MACZC,aAAa,wBAGrB,6BAAStQ,GAAG,OAAO1E,MAAO4U,EAAM3U,OAAQ2U,EAAMC,aAAa,kBACvD,0BAAM7U,MAAO4U,EAAM3U,OAAQ2U,EAAMxN,KAAK,oBACtC,0BACI0N,EAAC,YAAOF,EAAP,sBAAyBA,GAC1BxN,KAAK,OACLC,OAAO,OACP0N,YAAY,IACZC,aAAa,yBAIzB,0BAAMvU,EAAE,IAAIC,EAAE,IAAIV,MAAO2R,EAAUD,EAAGzR,OAAQ0R,EAAUlI,EAAGrC,KAAK,gBAqQ9B6N,CAAWtD,EAAW7R,GACtB,MAGd,uBACI4E,GAAG,gBACHC,IAAK,SAAArB,GAAE,OAAIuO,EAAWvO,GACtBsQ,UAAW3C,EAAQN,MAEnB,kBAACuE,EAAD,CACI9P,KAAM6M,EACN5M,SAA2B,SAAjBzF,EACV0F,WAA6B,WAAjB1F,EACZ8F,QAASA,EACT8I,cAAe,SAAC9F,GACZ2J,EAAa3J,GACb4J,GAAe,IAEnBpM,UAAWA,EACXP,UAAWA,OAK3B,uBAAGjB,GAAG,qBAAqBC,IAAK,SAAAwQ,GAAG,OAAIrD,EAAcqD,UAS7EnE,GAAaoE,aAAe,CACxBR,MAAM,EACNS,YAAa,OACblE,SAAU,IACVC,SAAU,KAGCtB,oBAxSS,SAAC3O,GACrB,MAAO,CACHvB,aAAcuB,EAAMvB,aACpBC,WAAYsB,EAAMtB,WAClBC,eAAgBqB,EAAMrB,eACtBC,gBAAiBoB,EAAMpB,gBACvBa,SAAUO,EAAMP,YAkSTkP,CAAyBkB,I,oJCtVlCf,GAAYC,aAAW,iBAAO,CAChC9K,KAAM,CACFqP,QAAS,OACTa,WAAY,SACZrV,OAAQ,QAEZkQ,KAAM,CACFsE,QAAS,OACTa,WAAY,SACZrV,OAAQ,OACR8T,WAAY,IAEhBwB,gBAAiB,CACbvV,MAAO,MACP0Q,gBAAiB,QACjBzQ,OAAQ,QAEZuV,QAAS,CACLf,QAAS,OACTa,WAAY,SACZG,QAAS,EACTC,YAAa,OAIfC,GAAiBC,aAAW,CAC9BxQ,KAAM,CACF6O,MAAO,mBACPwB,QAAS,IAHMG,CAKpBC,KAsFY/F,gBApFS,SAAC3O,GACrB,MAAO,CACHvB,aAAcuB,EAAMvB,aACpBC,WAAYsB,EAAMtB,WAClBe,SAAUO,EAAMP,aAIG,SAACmP,GAAD,MAAe,CACtC+F,iBAAkB,SAAC9F,GAAD,OAASD,EFjEpB,CAAE1O,KAAM,oBAAqBzB,aEiEgBoQ,EFlEtBpQ,gBEmE9BmW,oBAAqB,SAAC/F,GAAD,OAASD,EF9DvB,CAAE1O,KAAM,uBAAwBxB,WE8DmBmQ,EF/DzBnQ,iBEyItBiQ,EAvEO,SAACrO,GACnB,IAAMwP,EAAUhB,KAGZrQ,EAGA6B,EAHA7B,aACAC,EAEA4B,EAFA5B,WACAe,EACAa,EADAb,SAGEoV,EAAkB,SAACpW,GAAD,OAAkB,WACtC6B,EAAMqU,iBAAiB,CAAElW,mBAGvBqW,EAAqB,SAACpW,GACxB4B,EAAMsU,oBAAoB,CAAElW,gBAG1BqW,EAAU,CACZ,CAAE7U,KAAM,SAAU4M,SAA2B,eAAjBrO,EAA+BuW,UAAW,kBAACC,GAAA,EAAD,MAAgBhV,OAAQ,iBAAM,eACpG,CAAEC,KAAM,WACR,CAAEA,KAAM,SAAU4M,SAA2B,SAAjBrO,EAAyBuW,UAAW,kBAACE,GAAA,EAAD,MAAoBjV,OAAQ4U,EAAgB,SAC5G,CAAE3U,KAAM,SAAU4M,SAA2B,WAAjBrO,EAA2BuW,UAAW,kBAACG,GAAA,EAAD,MAA8BlV,OAAQ4U,EAAgB,WACxH,CAAE3U,KAAM,SAAU4M,SAA2B,SAAjBrO,EAAyBuW,UAAW,kBAACI,GAAA,EAAD,MAAiBnV,OAAQ4U,EAAgB,SACzG,CAAE3U,KAAM,SAAU4M,SAA2B,SAAjBrO,EAAyBuW,UAAW,kBAACK,GAAA,EAAD,MAAgBpV,OAAQ4U,EAAgB,SACxG,CAAE3U,KAAM,WAGR,CAAEA,KAAM,SAAU4M,SAA2B,cAAjBrO,EAA8BuW,UAAW,kBAAC,KAAD,CAAWtU,UAAU,eAAiBT,OAAQ,kBAAMR,EAAS+L,KAAK,eACvI,CAAEtL,KAAM,SAAU4M,SAA2B,oBAAjBrO,EAAoCuW,UAAW,kBAAC,KAAD,CAAatU,UAAU,eAAiBT,OAAQ,kBAAMR,EAAS+L,KAAK,qBAC/I,CAAEtL,KAAM,SAAU4M,SAA2B,eAAjBrO,EAA+BuW,UAAW,kBAAC,KAAD,CAAWtU,UAAU,gBAAkBT,OAAQ,kBAAMR,EAAS+L,KAAK,gBACzI,CAAEtL,KAAM,SAAU4M,SAA2B,aAAjBrO,EAA6BuW,UAAW,kBAAC,KAAD,CAAWtU,UAAU,gBAAkBT,OAAQ,kBAAMR,EAAS+L,KAAK,cACvI,CAAEtL,KAAM,SAAU4M,SAA2B,kBAAjBrO,EAAkCuW,UAAW,kBAAC,KAAD,CAAatU,UAAU,gBAAkBT,OAAQ,kBAAMR,EAAS+L,KAAK,mBAC9I,CAAEtL,KAAM,SAAU4M,SAA2B,gBAAjBrO,EAAgCuW,UAAW,kBAAC,KAAD,MAAe/U,OAAQ,kBAAMR,EAAS+L,KAAK,iBAClH,CAAEtL,KAAM,WACR,CAAEA,KAAM,SAAU4M,UAAyB,IAAfpO,EAAqBsW,UAAW,kBAACM,GAAA,EAAD,MAAgBrV,OAAQ,kBAAM6U,GAAmB,KAC7G,CAAE5U,KAAM,SAAU4M,UAAyB,IAAfpO,EAAsBsW,UAAW,kBAACO,GAAA,EAAD,MAAiBtV,OAAQ,kBAAM6U,GAAmB,KAC/G,CAAE5U,KAAM,WACR,CAAEA,KAAM,SAAU4M,UAAU,EAAOkI,UAAW,kBAACQ,GAAA,EAAD,MAAcvV,OAAQ,kBAAMR,EAAS+L,KAAK,UACxF,CAAEtL,KAAM,SAAU4M,UAAU,EAAOkI,UAAW,kBAACS,GAAA,EAAD,MAAcxV,OAAQ,kBAAMR,EAAS+L,KAAK,WAGtF9B,EAAU,CACZ,CAAExJ,KAAM,SAAU4M,UAAU,EAAOkI,UAAW,kBAAC,KAAD,MAAuB/U,OAAQ,kBAAMR,EAAS+L,KAAK,WAAY,KAAM,UACnH,CAAEtL,KAAM,SAAU4M,UAAU,EAAOkI,UAAW,kBAAC,KAAD,MAAwB/U,OAAQ,kBAAMR,EAAS+L,KAAK,WAAY,KAAM,YACpH,CAAEtL,KAAM,SAAU4M,UAAU,EAAOkI,UAAW,kBAAC,KAAD,MAAmB/U,OAAQ,kBAAMR,EAAS+L,KAAK,WAAY,KAAM,gBAGnH,OACI,yBAAKiH,UAAW3C,EAAQ7L,MACpB,yBAAKwO,UAAW3C,EAAQd,MACnB+F,EAAQ9R,KAAI,WAA+CyS,GAA/C,IAAGxV,EAAH,EAAGA,KAAM8U,EAAT,EAASA,UAAW/U,EAApB,EAAoBA,OAAQ6M,EAA5B,EAA4BA,SAA5B,EAAsCvF,MAAtC,OACT,yBAAKmB,IAAG,UAAKgN,EAAL,UAAoBjD,UAAW3C,EAAQuE,SAClC,YAATnU,EACM,kBAACsU,GAAD,CAAgBmB,SAAU7I,EAAU8I,QAAS,kBAAM3V,MAAW+U,GAC9D,yBAAKvC,UAAW3C,EAAQsE,uBAI1C,yBAAK3B,UAAW3C,EAAQd,KAAM2D,MAAO,CAAE9T,MAAO,OAAQgX,eAAgB,aACjEnM,EAAQzG,KAAI,WAA+CyS,GAA/C,IAAGxV,EAAH,EAAGA,KAAM8U,EAAT,EAASA,UAAW/U,EAApB,EAAoBA,OAAQ6M,EAA5B,EAA4BA,SAA5B,EAAsCvF,MAAtC,OACT,yBAAKmB,IAAG,UAAKgN,EAAL,UAAoBjD,UAAW3C,EAAQuE,SAClC,YAATnU,EACM,kBAACsU,GAAD,CAAgBmB,SAAU7I,EAAU8I,QAAS,kBAAM3V,MAAW+U,GAC9D,yBAAKvC,UAAW3C,EAAQsE,2B,8FCrI/C,SAAS0B,GAASC,GACrB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GACzB,GAAIhG,OAAOiG,MAAQjG,OAAOkG,YAAclG,OAAOmG,UAAYnG,OAAOoG,KAAM,CACpE,IAAMC,EAAS,IAAIH,WACfI,EAAS,GACTT,EAASU,OAASV,EAASU,MAAM,KACjCF,EAAOG,OAAS,SAACjU,GACb+T,EAAS/T,EAAEmG,OAAO+N,OAClBV,EAAQO,IAEZD,EAAOK,WAAWb,EAASU,MAAM,UAGrCP,OCLZ,IAAMpH,GAAYC,aAAW,SAAA8H,GAAK,MAAK,CACnC5S,KAAM,CACFqP,QAAS,OACTuC,eAAgB,SAChBvB,QAAS,SAEbwC,aAAc,CACVvC,YAAasC,EAAME,QAAQ,QAI7BvC,GAAiBC,aAAW,CAC9BxQ,KAAM,CACF6O,MAAO,OACPyB,YAAa,SAHEE,CAKpBC,KAwDYsC,GAtDI,SAAC1W,GAChB,IAAMwP,EAAUhB,KADU,EAGcrO,mBACpCiF,SAASuR,cAAc,UAJD,mBAGnBC,EAHmB,KAGLC,EAHK,KAO1BnU,qBAAU,WACN,IAAMkU,EAAexR,SAASuR,cAAc,SAC5CC,EAAaE,aAAa,OAAQ,QAClCF,EAAaE,aAAa,SAAU,WACpCF,EAAaE,aAAa,KAAM,eAChCF,EAAavE,MAAMW,QAAU,OAE7B6D,EAAgBD,GAEhB,IAAMG,EAAS,yCAAG,WAAO5U,GAAP,gBAAA6U,EAAA,+EAEQxB,GAASrT,EAAEmG,QAFnB,OAEJ2O,EAFI,OAGVjX,EAAMkX,SAASD,GAHL,gDAMV/N,QAAQC,IAAR,MANU,yDAAH,sDAUfyN,EAAa9T,iBAAiB,SAAUiU,GAAW,KACpD,CAAC/W,IAYJ,OACI,yBAAKmS,UAAW3C,EAAQ7L,MACpB,kBAAC,GAAD,CAAgB2R,QAZC,SAACnT,GACtByU,EAAaO,QACbhV,EAAEF,iBACFE,EAAEmG,OAAOrB,MAAQ,KAUT,kBAAC,KAAD,OAEJ,kBAAC,GAAD,CAAgBqO,QATC,WACrBtV,EAAMoX,aASE,kBAAC,KAAD,OAEJ,kBAAC,GAAD,CAAgB9B,QAAS,kBAAMtV,EAAMqX,gBACjC,kBAAC,KAAD,S,gFC1DV/X,GAAQ,CACV,CAAC,YAAagY,MACd,CAAC,SAAUC,MACX,CAAC,QAASC,MACV,CAAC,OAAQC,OA0IEC,GAtIK,SAAC1X,GACjB,IAAM2X,EAAa,GADQ,EAEWxX,oBAAS,GAFpB,mBAEpByX,EAFoB,KAEPC,EAFO,KAIrBC,EAAc,CAChBC,SAAU,OACVra,MAAO,qBACP2U,MAAO,CACH2F,OAAQ,OACRC,WAAY,cACZC,SAAU,QACVC,UAAW,eAEflP,OATgB,aAUhB2B,OAVgB,SAUTzI,GACH,IAAMiW,EAAW3a,KAAK8I,SAAS,GAAG+G,aAAa,aAC3C+K,EAAU,KAERC,EAAYlT,SAASyC,cAAc,sBAEnCzF,EAASkW,EAAUhW,wBACrBtD,EAAImD,EAAEJ,QAAUK,EAAOG,KAAO+V,EAAUpH,WACxCjS,EAAIkD,EAAEH,QAAUI,EAAOI,IAAM8V,EAAUtH,UAE3C,OAAQoH,GAEJ,IAAK,YACDC,EAAU,CACN,OACA,CACIrZ,IACAC,IACAV,MAAO,IACPC,OAAQ,IACRoH,OAAQ,QACRD,KAAM,gBAGd,MACJ,IAAK,SACD0S,EAAU,CACN,UACA,CACIE,GAAIvZ,EACJwZ,GAAIvZ,EACJwZ,GAAI,GACJC,GAAI,GACJ9S,OAAQ,QACRD,KAAM,gBAGd,MACJ,IAAK,QACD0S,EAAU,CACN,UACA,CACI/E,YAAa,IACb1N,OAAQ,QACRD,KAAM,cACNgT,gBAAiB,IACjBC,OAAO,GAAD,OAAK5Z,EAAI,GAAT,YAAeC,EAAf,YAAoBD,EAAI,IAAxB,YAA+BC,EAAI,GAAnC,YAAyCD,EAAI,GAA7C,YAAmDC,EAAI,IAAvD,YAA8DD,EAA9D,YAAmEC,EAAI,KAEjF,IAEJ,MACJ,IAAK,QACDoZ,EAAU,CACN,gBACA,CACIrZ,IACAC,IACAV,MAAO,IACPC,OAAQ,IACRoH,OAAQ,QACRD,KAAM,eAEV,CACI,CACI,MACA,CACIqN,QAAS,SAEb,CAAC,WAIb,MACJ,IAAK,OACDqF,EAAU,CACN,OACA,CACIrZ,IACAC,KAEJ,QAQZe,EAAM4K,OACFzI,EACAkW,KAWZ,OANA3V,qBAAU,WACFkV,IACJD,EAAWtR,SAAQ,SAAAxE,GAAE,OAAI2G,YAAM3G,GAAIgX,MAAMf,MACzCD,GAAe,MAChB,CAACF,EAAYC,EAAaE,IAGzB,kBAACgB,GAAA,EAAD,KACKxZ,GAAMqD,KAAI,mCAAEoW,EAAF,KAAQC,EAAR,YACP,kBAACC,GAAA,EAAD,CACIC,YAAWH,EACX7V,IAAK,SAACrB,GAAD,OAAQ8V,EAAW9Z,KAAKgE,IAC7BpB,QAAM,EACN2H,IAAK2Q,GAEL,kBAACI,GAAA,EAAD,KACI,kBAACH,EAAD,OAEJ,kBAACI,GAAA,EAAD,CAAcC,QAASN,U,4pBClJ3C,IAsCMO,G,2MAEF5Z,MAAQ,CACJ6Z,oBAAoB,EACpBC,aAAc,CACVC,IAAK,EAAKzZ,MAAM0Z,WAAa,EAAK1Z,MAAMiH,OAAS,eAErD0S,QAAS,CACL5K,SAAU,WACVM,OAAQ,OACR7M,IAAK,EACLD,KAAM,I,EAUdsC,YAAc,SAAC1C,GAAO,IACVJ,EAAqBI,EAArBJ,QAASC,EAAYG,EAAZH,QADA,EAEqBG,EAAEmG,OAAhC6I,EAFS,EAETA,YAFS,EAEIF,aACrB,EAAK2I,SAAS,CACVL,oBAAqB,EAAK7Z,MAAM6Z,mBAChCI,QAAQ,MACD,EAAKja,MAAMia,QADX,CAEHpX,KAAMR,EAAUoP,EAChB3O,IAAKR,O,EAKjB6X,YAAc,WACV,EAAKD,SAAS,CAAEL,oBAAoB,K,EAGxCO,aAAe,SAACtH,GACZ,EAAKoH,SAAS,CAAEJ,aAAchH,IAC9B,EAAKxS,MAAM+Z,SAASvH,I,oFAxBhB/U,KAAKuC,MAAMiH,QAAUxJ,KAAKiC,MAAM8Z,aAAaC,KAC7Chc,KAAKmc,SAAS,CAAEJ,aAAc,CAAEC,IAAKhc,KAAKuC,MAAMiH,W,+BAmCpD,OACI,yBAAKkL,UAAW1U,KAAKuC,MAAMwP,QAAQ7L,MAC/B,yBAAKwO,UAAW1U,KAAKuC,MAAMwP,QAAQwK,SAC/B,yBAAK7H,UAAW1U,KAAKuC,MAAMwP,QAAQyK,YAAa3E,QAAS7X,KAAKoH,YAAawN,MAAO,CAAEpD,gBAAiBxR,KAAKiC,MAAM8Z,aAAaC,QAEhIhc,KAAKiC,MAAM6Z,mBACRW,IAASC,aACL,yBAAK9H,MAAO5U,KAAKiC,MAAMia,SACnB,yBAAKtH,MAhBX,CACVtD,SAAU,QACVvM,IAAK,MACLmQ,MAAO,MACPC,OAAQ,MACRrQ,KAAM,OAW6B+S,QAAS7X,KAAKoc,cACjC,kBAAC,KAAD,CAAcrH,MAAO/U,KAAKiC,MAAM8Z,aAAcO,SAAUtc,KAAKqc,gBAEjE1U,SAASgV,MACT,U,GAhEEjM,IAAMC,WAuEjB+F,iBA7GA,yBAAO,CAClBxQ,MAAI,GACApF,MAAO,MACPyV,QAAS,EACTgE,OAAQ,EACR1I,OAAQ,EACR0D,QAAS,eALT,wBAMS,GANT,yBAOU,YAPV,8BAQe,UARf,8BASe,OATf,GAWJgH,QAAS,CACLhG,QAAS,GACTxB,MAAO,sBACPK,OAAQ,OACRG,QAAS,cACTjE,SAAU,WACVsL,SAAU,OACVC,UAAW,aACXzG,WAAY,SACZ5N,WAAY,YAEhBgU,aAAW,GACPvL,KAAM,WACNsJ,OAAQ,EACRxZ,OAAQ,WACR8Q,OAAQ,EACR0D,QAAS,QACTgB,QAAS,YACTuG,SAAU,EACVtC,WAAY,OACZqC,UAAW,eATJ,uBAUC,qBAVD,6BAWO,GAXP,MAsFAnG,CAAmBmF,I,+NCrFlC,IAAM9K,GAAYC,aAAW,iBAAO,CAChC9K,KAAM,CACFoL,SAAU,WACV4D,MAAO,EACPnQ,IAAK,EACLoQ,OAAQ,EACR3D,gBAAiB,UACjBI,OAAQ,KAEZ/L,UAAW,CACP0P,QAAS,OACTtE,KAAM,GAEV8L,gBAAiB,CACbxH,QAAS,OACTyH,cAAe,UAEnBzG,QAAS,CACLA,QAAS,IAEb0G,MAAO,CACHC,YAAa,QAIfC,GAAYzG,aAAW,CACzBxQ,KAAM,CACF2L,OAAQ,GACR,4BAA6B,CACzB0E,QAAS,eAJHG,CAOf0G,MAEGC,GAAgB3G,aAAW,CAC7BxQ,KAAM,CACF2L,OAAQ,MAFM6E,CAInB4G,MAqNY1M,gBAnNS,SAAC3O,GAAD,MAAY,CAChCpB,gBAAiBoB,EAAMpB,gBACvBG,cAAeiB,EAAMjB,cACrBC,cAAegB,EAAMhB,cACrBC,cAAee,EAAMf,cACrBC,iBAAkBc,EAAMd,iBACxBC,kBAAmBa,EAAMb,kBACzBC,oBAAqBY,EAAMZ,oBAC3BC,UAAWW,EAAMX,UACjBV,eAAgBqB,EAAMrB,eACtBc,SAAUO,EAAMP,aAGO,SAACmP,GAAD,MAAe,CACtC0M,oBAAqB,SAACzM,GAAD,OAASD,EPtEvB,CAAE1O,KAAM,wBAAyBtB,gBOsEkBiQ,EPvEzBjQ,mBOwEjC2c,kBAAmB,SAAC1M,GAAD,OAASD,EPnErB,CAAE1O,KAAM,qBAAsBnB,cOmEiB8P,EPpEvB9P,iBOqE/Byc,kBAAmB,SAAC3M,GAAD,OAASD,EPhErB,CAAE1O,KAAM,qBAAsBlB,cOgEiB6P,EPjEvB7P,iBOkE/Byc,kBAAmB,SAAC5M,GAAD,OAASD,EP7DrB,CAAE1O,KAAM,qBAAsBjB,cO6DiB4P,EP9DvB5P,iBO+D/Byc,qBAAsB,SAAC7M,GAAD,OAASD,EP1DxB,CAAE1O,KAAM,wBAAyBhB,iBO0DoB2P,EP3D1B3P,oBO4DlCyc,sBAAuB,SAAC9M,GAAD,OAASD,EPvDzB,CAAE1O,KAAM,yBAA0Bf,kBOuDqB0P,EPxD3B1P,qBOyDnCyc,cAAe,SAAC/M,GAAD,OAASD,EPhDjB,CAAE1O,KAAM,iBAAkBb,UOgDawP,EPjDnBxP,aOkD3Bwc,mBAAoB,SAAChN,GAAD,OAASD,EPjFtB,CAAE1O,KAAM,uBAAwBvB,eOiFiBkQ,EPlFxBlQ,kBOmFhCmd,wBAAyB,SAACjN,GAAD,OAASD,EPtD3B,CAAE1O,KAAM,4BAA6Bd,oBOsDsByP,EPvD7BzP,0BOoP1BuP,EA1LQ,SAACrO,GACpB,IAAMwP,EAAUhB,KADc,EAa1BxO,EATA1B,gBAAmBC,EAJO,EAIPA,MAAOC,EAJA,EAIAA,OAC1BC,EAQAuB,EARAvB,cACAC,EAOAsB,EAPAtB,cACAC,EAMAqB,EANArB,cACAC,EAKAoB,EALApB,iBACAC,EAIAmB,EAJAnB,kBACAC,EAGAkB,EAHAlB,oBACAT,EAEA2B,EAFA3B,eACAU,EACAiB,EADAjB,UAZ0B,EAeIoB,mBAAS,CAAE5B,QAAOC,WAftB,mBAevB0R,EAfuB,KAeZC,EAfY,OAgBEhQ,mBAAS1B,GAhBX,mBAgBvBgd,EAhBuB,KAgBbC,EAhBa,OAiBEvb,mBAASzB,GAjBX,mBAiBvBid,EAjBuB,KAiBbC,EAjBa,OAkBEzb,mBAASxB,GAlBX,mBAkBvBkd,EAlBuB,KAkBbC,EAlBa,OAmBQ3b,mBAASvB,GAnBjB,mBAmBvBmK,EAnBuB,KAmBVgT,EAnBU,OAoBU5b,mBAAStB,GApBnB,mBAoBvBmd,EApBuB,KAoBTC,EApBS,OAqBc9b,mBAASrB,GArBvB,mBAqBvBod,EArBuB,KAqBPC,EArBO,OAsBNhc,mBAASpB,GAtBH,mBAsBvBiK,EAtBuB,KAsBjBoT,EAtBiB,OAuBNjc,mBAAS,QAvBH,mBAuBvBwF,EAvBuB,KAuBjB0W,EAvBiB,KAyBxBvC,GAAe,SAAC,GAAY,IAAD,mBAAV7J,EAAU,KAAPjI,EAAO,KAC7B,KAAIgE,OAAOiE,GAAK,GAAKjE,OAAOhE,GAAK,GAAjC,CAEA,IAAM1J,EAAkB,CAAEC,MAAO0R,EAAGzR,OAAQwJ,GAC5CmI,EAAa7R,GACb0B,EAAMgb,oBAAoB,CAAE1c,sBAG1Bge,GAAiB,SAAC9R,GAAD,OAAU,SAACrI,GAC9B,IAAM8E,EAAQ9E,EAAEmG,OAAOiU,QAEvB,OAAQ/R,GAEJ,IAAK,OACDkR,EAAYzU,GACZjH,EAAMib,kBAAkB,CAAExc,cAAewI,IACzC,MAGJ,IAAK,SACD2U,EAAY3U,GACZjH,EAAMkb,kBAAkB,CAAExc,cAAeuI,IACzC,MAGJ,IAAK,SACD6U,EAAY7U,GACZjH,EAAMmb,kBAAkB,CAAExc,cAAesI,IACzC,MAGJ,IAAK,cACD8U,EAAe9U,GACfjH,EAAMob,qBAAqB,CAAExc,iBAAkBqI,IAC/C,MAGJ,IAAK,eACDgV,EAAgBhV,GAChBjH,EAAMqb,sBAAsB,CAAExc,kBAAmBoI,IACjD,MAGJ,IAAK,iBACDkV,EAAkBlV,GAClBjH,EAAMwb,wBAAwB,CAAE1c,oBAAqBmI,OAU3DuV,GAAmB,SAACvV,GACtB,IAAMwV,E,2WAAU,IAAQzT,EAAR,GAAiB/B,GACjCmV,EAAQK,GACRzc,EAAMsb,cAAc,CAAEvc,UAAW0d,KAarC,OALA/Z,qBAAU,WACN,IAAMuV,EAAa7S,SAAS2M,eAAe,eAC3CsK,EAAQpE,EAAWyE,eAAe,KAAM,WACzC,IAGC,yBACIvK,UAAW3C,EAAQ7L,KACnB0O,MAAO,CAAE9T,MAAOyB,EAAMzB,QAEtB,8BACI,kBAACoe,GAAA,EAAD,CAAWC,aAAW,YAClB,yBAAKzK,UAAW3C,EAAQwE,SACpB,kBAAC6I,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,UACA,yBAAK3K,UAAW3C,EAAQlM,WACpB,kBAACsX,GAAD,CAAWF,MAAM,QAAQzT,MAAOiJ,EAAU3R,MAAOgU,QAAQ,WAAWE,KAAK,QAAQsH,SAAU,SAAC5X,GAAD,OAAO2X,GAAa,CAAC3X,EAAEmG,OAAOrB,MAAOiJ,EAAU1R,YAC1I,kBAACoc,GAAD,CAAWF,MAAM,SAASzT,MAAOiJ,EAAU1R,OAAQ+T,QAAQ,WAAWE,KAAK,QAAQsH,SAAU,SAAC5X,GAAD,OAAO2X,GAAa,CAAC5J,EAAU3R,MAAO4D,EAAEmG,OAAOrB,YAEhJ,yBAAKkL,UAAW3C,EAAQlM,WACpB,kBAAC,GAAD,CAAa2D,MAAOtB,EAAMoU,SAxBxB,SAAC9S,GACvBoV,EAAQpV,EAAMwS,KACdrU,SAAS2M,eAAe,eAAevL,eAAe,KAAM,OAAQS,EAAMwS,SAwB1D,kBAACsD,GAAA,EAAD,CAAMzZ,WAAS,GACX,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,IACX,kBAACH,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,aACA,yBAAKzK,MAAO,CAAEW,QAAS,OAAQa,WAAY,SAAUG,QAAS,WAC1D,kBAACiJ,GAAA,EAAD,CAAQC,kBAAkB,OAAOjW,MAAO5I,EAAgB0b,SAAU,SAAC5X,EAAGiE,GAAJ,OAAYpG,EAAMub,mBAAmB,CAAEld,eAAgB+H,KAAQzI,KAAM,SAKvJ,kBAACwf,EAAA,EAAD,MACA,yBAAKhL,UAAW3C,EAAQwE,SACpB,kBAAC6I,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,WACA,yBAAK3K,UAAW3C,EAAQgL,iBACpB,kBAACM,GAAD,CACI7T,MAAOwU,EACP2B,QAAS,kBAACC,GAAA,EAAD,CAAUd,QAASd,EAAUjJ,MAAM,UAAUuH,SAAUuC,GAAe,UAC/E5B,MAAM,iBACN4C,eAAe,QAEnB,kBAACxC,GAAD,CACI7T,MAAO0U,EACPyB,QAAS,kBAACC,GAAA,EAAD,CAAUd,QAASZ,EAAUnJ,MAAM,UAAUuH,SAAUuC,GAAe,YAC/E5B,MAAM,iBACN4C,eAAe,QAEnB,kBAACxC,GAAD,CACI7T,MAAO4U,EACPuB,QAAS,kBAACC,GAAA,EAAD,CAAUd,QAASV,EAAUrJ,MAAM,UAAUuH,SAAUuC,GAAe,YAC/E5B,MAAM,iBACN4C,eAAe,QAEnB,kBAACxC,GAAD,CACI7T,MAAO8B,EACPqU,QAAS,kBAACC,GAAA,EAAD,CAAUd,QAASxT,EAAayJ,MAAM,UAAUuH,SAAUuC,GAAe,iBAClF5B,MAAM,oBACN4C,eAAe,QAEnB,kBAACxC,GAAD,CACI7T,MAAO+U,EACPoB,QAAS,kBAACC,GAAA,EAAD,CAAUd,QAASP,EAAcxJ,MAAM,UAAUuH,SAAUuC,GAAe,kBACnF5B,MAAM,yBACN4C,eAAe,QAEnB,kBAACxC,GAAD,CACI7T,MAAOiV,EACPkB,QAAS,kBAACC,GAAA,EAAD,CAAUd,QAASL,EAAgB1J,MAAM,UAAUuH,SAAUuC,GAAe,oBACrF5B,MAAM,sBACN4C,eAAe,UAI3B,kBAACH,EAAA,EAAD,MACA,yBAAKhL,UAAW3C,EAAQwE,SACpB,kBAAC6I,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,QACA,kBAACC,GAAA,EAAD,CAAMzZ,WAAS,GACX,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,GACX,kBAACpC,GAAD,CAAWF,MAAM,cAAczT,MAAO+B,EAAKhK,EAAGuT,QAAQ,WAAWE,KAAK,QAAQsH,SAAU,SAAC5X,GAAD,OAAOqa,GAAiB,CAAExd,EAAGgN,OAAO7J,EAAEmG,OAAOrB,aAEzI,kBAAC8V,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,GACX,kBAACpC,GAAD,CAAWF,MAAM,cAAczT,MAAO+B,EAAK/J,EAAGsT,QAAQ,WAAWE,KAAK,QAAQsH,SAAU,SAAC5X,GAAD,OAAOqa,GAAiB,CAAEvd,EAAG+M,OAAO7J,EAAEmG,OAAOrB,cAG7I,kBAAC8V,GAAA,EAAD,CAAMzZ,WAAS,GACX,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,GACX,kBAACpC,GAAD,CAAWF,MAAM,aAAazT,MAAO+B,EAAK9J,MAAOqT,QAAQ,WAAWE,KAAK,QAAQsH,SAAU,SAAC5X,GAAD,OAAOqa,GAAiB,CAAEtd,MAAO8M,OAAO7J,EAAEmG,OAAOrB,qB,imBC9P5K,IAAMsW,GAAiBpJ,cAAW,SAACoC,GAAD,MAAY,CAC1C5S,KAAM,CACF,YAAa,CACT6Z,UAAWjH,EAAME,QAAQ,KAGjCgH,MAAO,CACHC,aAAc,EACd3O,SAAU,WACVE,gBAAiBsH,EAAMoH,QAAQ1F,WAAW2F,MAC1C5F,OAAQ,oBACRqC,SAAU,GACVM,YAAa,GACbkD,WAAYtH,EAAMuH,YAAYC,OAAO,CAAC,eAAgB,eACtD,UAAW,CACPL,aAAc,EACdM,YAAa,UACb7O,UAAW,wCAjBAgF,CAoBnB8J,MAEEzP,GAAYC,aAAW,iBAAO,CAChC9K,KAAM,CACFoL,SAAU,WACV4D,MAAO,EACPnQ,IAAK,EACLoQ,OAAQ,EACR3D,gBAAiB,UACjBI,OAAQ,KAEZ/L,UAAW,CACP0P,QAAS,OACTtE,KAAM,GAEV8L,gBAAiB,CACbxH,QAAS,OACTyH,cAAe,UAEnBzG,QAAS,CACLA,QAAS,IAEb0G,MAAO,CACHC,YAAa,GACbpc,MAAO,WA8PA8P,gBA1PS,SAAC3O,GAAD,MAAY,CAChCP,SAAUO,EAAMP,SAChB+e,cAAexe,EAAMJ,SAwPV+O,EArPM,SAACrO,GAClB,IAAMwP,EAAUhB,KAERrP,EAA4Ba,EAA5Bb,SAAU+e,EAAkBle,EAAlBke,cAHU,EAKJ/d,mBAAS,QALL,mBAKrBwF,EALqB,KAKf0W,EALe,OAMUlc,mBAAS,QANnB,mBAMrBge,EANqB,KAMRC,EANQ,OAOAje,mBAAS,QAPT,mBAOrByF,EAPqB,KAObyY,EAPa,OAQcle,mBAAS,QARvB,mBAQrBme,EARqB,KAQNC,EARM,OASMpe,mBAAS,GATf,mBASrB0F,EATqB,KASV2Y,EATU,OAUEre,mBAAS,KAVX,mBAUrB2F,EAVqB,KAUZ2Y,EAVY,OAYUte,mBAAS,MAZnB,mBAYrB+F,EAZqB,KAYRwY,EAZQ,OAagBve,mBAAS,CACjD4F,cAAe,EACfC,YAAa,EACbC,WAAY,IAhBY,mBAarB0Y,EAbqB,KAaLC,EAbK,KAmBtBC,EAAW,SAACrU,EAAMvD,GAA0B,IAAnB6X,IAAkB,yDAC7C,OAAQtU,GAEJ,IAAK,OACD6R,EAAQpV,GACJ6X,GAAQ3f,EAAS+L,KAAKV,EAAM,KAAMvD,GACtC,MAEJ,IAAK,cACD,IAAM8X,EAAoB,UAAV9X,EAAoBtB,EAAO,OAC3CyY,EAAenX,GACX6X,GAAQ3f,EAAS+L,KAAK,OAAQ,KAAM6T,GACxC,MAEJ,IAAK,SACDV,EAAUpX,GACN6X,GAAQ3f,EAAS+L,KAAKV,EAAM,KAAMvD,GACtC,MAEJ,IAAK,gBACD,IAAM8X,EAAoB,UAAV9X,EAAoBrB,EAAS,OAC7C2Y,EAAiBtX,GACb6X,GAAQ3f,EAAS+L,KAAK,SAAU,KAAM6T,GAC1C,MAEJ,IAAK,YACD,IAAMA,EAAoB,OAAV9X,EAAiB,EAAIA,EACrCuX,EAAaxS,OAAO+S,IAChBD,GAAQ3f,EAAS+L,KAAKV,EAAM,KAAMuU,GACtC,MAEJ,IAAK,UACD,IAAMA,EAAoB,OAAV9X,EAAiB,EAAIA,EACrCwX,EAA6B,IAAlBzS,OAAO+S,IACdD,GAAQ3f,EAAS+L,KAAKV,EAAM,KAAMuU,GACtC,MAEJ,IAAK,cACDC,EAAkB/X,GACd6X,GAAQ3f,EAAS+L,KAAKV,GAC1B,MAEJ,IAAK,gBACL,IAAK,cACL,IAAK,aACDoU,GAAkB,SAACK,GAAD,aAAgBA,EAAhB,eAAuBzU,EAAiB,OAAVvD,EAAiBgY,EAAKzU,GAAQwB,OAAO/E,QACjF6X,GAAQ3f,EAAS+L,KAAKV,EAAM,KAAMvD,KAWlDvE,qBAAU,WACN,GAAKwb,EAActgB,OAAnB,CAEA,IAAMshB,EAL+C,SAK3BhB,EAAc,GAAG3X,SAAS,GALzB+C,QAAQC,cAOnC9D,OAAOC,QAAP,IACIC,KAAM,OACNC,OAAQ,SACRC,UAAW,eACXC,QAAS,WACLoZ,GAAW,CACXnZ,cAAe,iBACfC,YAAa,eACbC,WAAY,iBAEjBtD,KAAI,YAAyB,IAAD,mBAAtBhB,EAAsB,KAAfwE,EAAe,KAC3B0Y,EACIld,EACAuc,EAAc,GAAG3X,SAAS,GAAGmW,eAAe,KAAMvW,IAClD,MAKJuY,EADAQ,EACehB,EAAc,GAAG3X,SAAS,GAAGL,aAAe,GAE5C,SAEpB,CAACgY,IAEJ,IAAMc,EAAoB,SAAC9Y,GACvBwY,EAAexY,GACfgY,EAAc,GAAG3X,SAAS,GAAGL,YAAcA,GAG/C,OACI,yBACIiM,UAAW3C,EAAQ7L,KACnB0O,MAAO,CAAE9T,MAAOyB,EAAMzB,QAEtB,0BAAM8T,MAAO,CAAE9T,MAAO,SAClB,kBAACoe,GAAA,EAAD,CAAWC,aAAW,YAClB,yBAAKzK,UAAW3C,EAAQwE,SACpB,yBAAK7B,UAAW3C,EAAQlM,WACpB,kBAACuZ,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,SAIJ,yBAAK3K,UAAW3C,EAAQlM,WACpB,kBAAC,GAAD,CAAa2D,MAAOtB,EAAMoU,SAAU,SAAC9S,GAAD,OAAW4X,EAAS,OAAQ5X,EAAMwS,QACtE,kBAAC0F,GAAA,EAAD,CACI9M,MAAO,CAAE9T,MAAO,MAAOyV,QAAS,IAChCzB,QAAQ,WACR6M,QAAM,EACNnY,MAAOkX,EACPpE,SAAU,SAAC5X,GAAD,OAAO0c,EAAS,cAAe1c,EAAEmG,OAAOrB,QAClDuD,KAAK,MACLiT,MAAO,kBAACF,GAAD,CAAgBtW,MAAOkX,KAE9B,4BAAQlX,MAAO,QAAf,QACA,4BAAQA,MAAO,SAAf,WAGR,yBAAKkL,UAAW3C,EAAQlM,WACpB,kBAACuZ,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,WAEJ,yBAAK3K,UAAW3C,EAAQlM,WACpB,kBAAC,GAAD,CAAa2D,MAAOrB,EAAQmU,SAAU,SAAC9S,GAAD,OAAW4X,EAAS,SAAU5X,EAAMwS,QAC1E,kBAAC0F,GAAA,EAAD,CACI9M,MAAO,CAAE9T,MAAO,MAAOyV,QAAS,IAChCzB,QAAQ,WACR6M,QAAM,EACNnY,MAAOqX,EACPvE,SAAU,SAAC5X,GAAD,OAAO0c,EAAS,gBAAiB1c,EAAEmG,OAAOrB,QACpDuD,KAAK,MACLiT,MAAO,kBAACF,GAAD,CAAgBtW,MAAOqX,KAE9B,4BAAQrX,MAAO,QAAf,QACA,4BAAQA,MAAO,SAAf,WAGR,yBAAKkL,UAAW3C,EAAQlM,WACpB,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,IACX,kBAACH,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,aACA,yBAAKzK,MAAO,CAAEW,QAAS,OAAQa,WAAY,SAAUG,QAAS,WAC1D,kBAACiJ,GAAA,EAAD,CACIC,kBAAkB,OAClBmC,IAAK,GACLpY,MAAOpB,EACPkU,SAAU,SAAC5X,EAAGiE,GAAJ,OAAYyY,EAAS,YAAazY,IAAMzI,KAAM,QAM5E,kBAACwf,EAAA,EAAD,MACA,yBAAKhL,UAAW3C,EAAQwE,SACpB,yBAAK7B,UAAW3C,EAAQlM,WACpB,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,IACX,kBAACH,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,WACA,yBAAKzK,MAAO,CAAEW,QAAS,OAAQa,WAAY,SAAUG,QAAS,WAC1D,kBAACiJ,GAAA,EAAD,CACIC,kBAAkB,OAClBmC,IAAK,IACLpY,MAAOnB,EACPiU,SAAU,SAAC5X,EAAGiE,GAAJ,OAAYyY,EAAS,UAAWzY,EAAM,MAAMzI,KAAM,QAMhF,kBAACwf,EAAA,EAAD,MACkB,OAAhBjX,GAAyB,yBAAKiM,UAAW3C,EAAQwE,SAC/C,yBAAK7B,UAAW3C,EAAQlM,WACpB,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,IACX,kBAACH,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,QACA,kBAACS,GAAD,CACIlL,MAAO,CAAE2B,QAAS,IAClB/M,MAAOf,EACP6T,SAAU,SAAC5X,GAAD,OAAO0c,EAAS,cAAe1c,EAAEmG,OAAOrB,YAI9D,yBAAKkL,UAAW3C,EAAQlM,WACpB,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,IACX,kBAACH,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,gBACA,yBAAKzK,MAAO,CAAEW,QAAS,OAAQa,WAAY,SAAUG,QAAS,WAC1D,kBAACiJ,GAAA,EAAD,CACIC,kBAAkB,OAClBmC,IAAK,GACLpY,MAAO0X,EAAe5Y,cACtBgU,SAAU,SAAC5X,EAAGiE,GAAJ,OAAYyY,EAAS,gBAAiBzY,IAAMzI,KAAM,OAK5E,yBAAKwU,UAAW3C,EAAQlM,WACpB,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,IACX,kBAACH,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,cACA,yBAAKzK,MAAO,CAAEW,QAAS,OAAQa,WAAY,SAAUG,QAAS,WAC1D,kBAACiJ,GAAA,EAAD,CACIC,kBAAkB,OAClBmC,IAAK,IACLpY,MAAO0X,EAAe3Y,YACtB+T,SAAU,SAAC5X,EAAGiE,GAAJ,OAAYyY,EAAS,cAAezY,IAAMzI,KAAM,OAK1E,yBAAKwU,UAAW3C,EAAQlM,WACpB,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,IACX,kBAACH,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,eACA,yBAAKzK,MAAO,CAAEW,QAAS,OAAQa,WAAY,SAAUG,QAAS,WAC1D,kBAACiJ,GAAA,EAAD,CACIC,kBAAkB,OAClBmC,IAAK,IACLpY,MAAO0X,EAAe1Y,WACtB8T,SAAU,SAAC5X,EAAGiE,GAAJ,OAAYyY,EAAS,aAAczY,IAAMzI,KAAM,c,0CC1R3Fid,GAAYzG,aAAW,CACzBxQ,KAAM,CACF2L,OAAQ,GACR,4BAA6B,CACzB0E,QAAS,eAJHG,CAOf0G,MAEG0C,GAAiBpJ,cAAW,SAACoC,GAAD,MAAY,CAC1C5S,KAAM,CACF,YAAa,CACT6Z,UAAWjH,EAAME,QAAQ,KAGjCgH,MAAO,CACHC,aAAc,EACd3O,SAAU,WACVE,gBAAiBsH,EAAMoH,QAAQ1F,WAAW2F,MAC1C5F,OAAQ,oBACRqC,SAAU,GACVM,YAAa,GACbkD,WAAYtH,EAAMuH,YAAYC,OAAO,CAAC,eAAgB,eACtD,UAAW,CACPL,aAAc,EACdM,YAAa,UACb7O,UAAW,wCAjBAgF,CAoBnB8J,MAEEzP,GAAYC,aAAW,iBAAO,CAChC9K,KAAM,CACFoL,SAAU,WACV4D,MAAO,EACPnQ,IAAK,EACLoQ,OAAQ,EACR3D,gBAAiB,UACjBI,OAAQ,KAEZ/L,UAAW,CACP0P,QAAS,OACTtE,KAAM,GAEV8L,gBAAiB,CACbxH,QAAS,OACTyH,cAAe,UAEnBzG,QAAS,CACLA,QAAS,IAEb0G,MAAO,CACHC,YAAa,GACbpc,MAAO,WA2JA8P,gBAvJS,SAAC3O,GAAD,MAAY,CAChCH,WAAYG,EAAMH,WAClB2e,cAAexe,EAAMJ,SAqJV+O,EAlJW,SAACrO,GACvB,IAAMwP,EAAUhB,KACI0P,GAAkBle,EAA9BT,WAA8BS,EAAlBke,eAFa,EAIC/d,mBAAS,IAJV,mBAI1Bmf,EAJ0B,KAIfC,EAJe,OAKCpf,mBAAS,cALV,mBAK1Bqf,EAL0B,KAKfC,EALe,OAMGtf,mBAAS,IANZ,mBAM1Buf,EAN0B,KAMdC,EANc,OAODxf,mBAAS,KAPR,mBAO1Byf,EAP0B,KAOhBC,EAPgB,KA2B3BhB,EAAW,SAACrU,EAAMvD,GACpB,OAAQuD,GAEJ,IAAK,YACDiV,EAAaxY,GACb,MAGJ,IAAK,aACD0Y,EAAc1Y,GACd,MAGJ,IAAK,WACD4Y,EAAY5Y,KAqBlB6Y,EAAgBpe,uBAAY,WAC9B,GAAKwc,EAActgB,OAEJ,YAAIsgB,EAAc,GAAG3X,UAAU5D,KAAI,SAACod,GAC/C,IAAMle,EAAKke,EAAQC,WAAU,GAG7B,OAFAxX,YAAM3G,GAAIoe,IAAI,CAAE7f,UAAWyB,EAAG6a,eAAe,KAAM,eACnDqD,EAAQ1d,WAAW+B,YAAYvC,GACxBA,OAEZ,CAACqc,EAAeoB,IAMnB,OAJA5c,qBAAU,WACDwb,EAActgB,SACpB,CAACsgB,IAGA,yBACI/L,UAAW3C,EAAQ7L,KACnB0O,MAAO,CAAE9T,MAAOyB,EAAMzB,QAEtB,0BAAM8T,MAAO,CAAE9T,MAAO,SAClB,kBAACoe,GAAA,EAAD,CAAWC,aAAW,YAClB,yBAAKzK,UAAW3C,EAAQwE,SACpB,kBAAC+I,GAAA,EAAD,CAAMzZ,WAAS,GACX,kBAACuZ,GAAA,EAAD,CAAY1K,UAAW3C,EAAQkL,MAAOnI,QAAQ,YAAYuK,MAAM,QAAhE,cAIJ,kBAACC,GAAA,EAAD,CAAMzZ,WAAS,GACX,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,GACX,kBAACmC,GAAA,EAAD,CACI9M,MAAO,CAAE/C,OAAQ,IACjBiD,QAAQ,WACR6M,QAAM,EACNnY,MAAOuY,EACPzF,SAAU,SAAC5X,GAAD,OAAO0c,EAAS,YAAa1c,EAAEmG,OAAOrB,QAChDuD,KAAK,MACLiT,MAAO,kBAAC,GAAD,CAAgBxW,MAAO,KA1F3C,CACf,aACA,aACA,aACA,SACA,UACA,UACA,UACA,QACA,SACA,SACA,SACA,OACA,QACA,QACA,eA6EwCtE,KAAI,SAAC/C,GAAD,OAAU,4BAAQwI,IAAKxI,EAAMqH,MAAOrH,GAAOA,QAGnE,kBAACmd,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,GACX,kBAAC,GAAD,CACItC,MAAM,QACNnI,QAAQ,WACRE,KAAK,QACLxL,MAAOyY,EACP3F,SAAU,SAAC5X,GAAD,OAAO0c,EAAS,aAAc1c,EAAEmG,OAAOrB,YAI7D,kBAAC8V,GAAA,EAAD,CAAMzZ,WAAS,GACX,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,GACX,kBAAC,GAAD,CACItC,MAAM,WACNnI,QAAQ,WACRE,KAAK,QACLxL,MAAO2Y,EACP7F,SAAU,SAAC5X,GAAD,OAAO0c,EAAS,WAAY1c,EAAEmG,OAAOrB,YAI3D,yBAAKoL,MAAO,CAAEW,QAAS,OAAQuC,eAAgB,QAC3C,kBAAC,KAAD,CAASD,QA3Eb,WAChBiK,EAAa,GAAD,mBACLD,GADK,CAER,CACIE,YACAE,WAAYQ,WAAWR,GACvBE,SAAUM,WAAWN,WAuEb,kBAAC7C,GAAA,EAAD,CAAMzZ,WAAS,GACVgc,EAAU3c,KAAI,WAA0ByS,GAA1B,IAAGoK,EAAH,EAAGA,UAAWI,EAAd,EAAcA,SAAd,OACX,kBAAC7C,GAAA,EAAD,CAAM3U,IAAG,UAAKgN,EAAL,YAAcoK,GAAalc,WAAS,GACzC,kBAACyZ,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,GAAIwC,GACnB,kBAACzC,GAAA,EAAD,CAAM9e,MAAI,EAAC+e,GAAI,GAAI4C,QAI/B,kBAACxL,EAAA,EAAD,CAAY7B,QAAQ,WAAW+C,QAASwK,GACpC,kBAAC,KAAD,c,6kBCjM5B,IAAMK,GAAc,CAChB,IAAK,OAAQ,OAAQ,UAAW,WAChC,SAAU,UAAW,OAAQ,OAAQ,iBASnC3R,GAAYC,aAAW,SAAC8H,GAAD,MAAY,CACrC5S,KAAM,CACFqP,QAAS,OACTwK,UAAW,GACX4C,UAAW,qBACX5hB,OAAQ,qBACR6hB,aAAc,SACdpR,gBAAiB,WAErBqR,KAAM,CACFtN,QAAS,OACTjE,SAAU,WACVvM,IAAK,EACLD,KAAM,EACN/D,OAAQ,GACRD,MAAO,OACP8Q,OAAQ,IACRJ,gBAAiBsH,EAAMoH,QAAQtE,QAAQkH,MAE3CzR,OAAQ,CACJ0R,SAAU,GAGdC,gBAAiB,CACbzN,QAAS,OACTtE,KAAM,EACN+L,cAAe,UAEnBiG,OAAQ,CACJC,UAAW,iBACXnO,MAAO,mBACPvD,gBAAiB,mBACjBI,OAAQkH,EAAMlH,OAAOuR,OAAS,EAC9B/C,WAAYtH,EAAMuH,YAAYC,OAAO,CAAC,QAAS,UAAW,CACtD8C,OAAQtK,EAAMuH,YAAY+C,OAAOC,MACjClB,SAAUrJ,EAAMuH,YAAY8B,SAASmB,gBAEzChS,SAAU,WACVvQ,OAAQ,IAEZwiB,YAAa,CAGTnD,WAAYtH,EAAMuH,YAAYC,OAAO,CAAC,QAAS,UAAW,CACtD8C,OAAQtK,EAAMuH,YAAY+C,OAAOC,MACjClB,SAAUrJ,EAAMuH,YAAY8B,SAASqB,kBAG7CC,WAAY,CACRjN,YAAa,IAEjBkN,KAAM,CACFnO,QAAS,QAEb4N,OAAQ,CACJriB,MA7DY,IA8DZ6iB,WAAY,EACZC,WAAY,UAEhBC,YAAa,CACTvS,SAAU,WACVE,gBAAiB,WAErBsS,WAAY,CACRhjB,MAtEY,IAuEZsf,WAAYtH,EAAMuH,YAAYC,OAAO,QAAS,CAC1C8C,OAAQtK,EAAMuH,YAAY+C,OAAOC,MACjClB,SAAUrJ,EAAMuH,YAAY8B,SAASqB,kBAG7CO,YAAY,aACR3D,WAAYtH,EAAMuH,YAAYC,OAAO,QAAS,CAC1C8C,OAAQtK,EAAMuH,YAAY+C,OAAOC,MACjClB,SAAUrJ,EAAMuH,YAAY8B,SAASmB,gBAEzCU,UAAW,SACXljB,MAAOgY,EAAME,QAAQ,GAAK,GACzBF,EAAMmL,YAAYC,GAAG,MAAQ,CAC1BpjB,MAAOgY,EAAME,QAAQ,GAAK,IAGlC1C,QAAS,CACLf,QAAS,OACTa,WAAY,SACZ0B,eAAgB,WAChBvB,QAASuC,EAAME,QAAQ,EAAG,IAE9BxS,QAAS,CACLuc,SAAU,EACVxM,QAASuC,EAAME,QAAQ,QAyOhBpI,gBAtUS,SAAC3O,GAAD,MAAY,CAChCP,SAAUO,EAAMP,YAqULkP,EArOA,SAACrO,GAAW,IAAD,IAChBwP,EAAUhB,KACV+H,EAAQqL,cAFQ,EAGEzhB,oBAAS,GAHX,mBAGf0hB,EAHe,KAGTC,EAHS,OAIc3hB,mBAAS,IAJvB,mBAIf4hB,EAJe,KAIHC,EAJG,OAKQ7hB,mBAAS,MALjB,mBAKf8D,EALe,KAKNge,EALM,OAMgB9hB,mBAAS,UANzB,mBAMf+hB,EANe,KAMFC,EANE,KAQhBC,EAAmB,IAAIC,cAUvBC,EAAe,SAACnQ,GAGlB,IAFA,IAAIoQ,EAAU,GACR/S,EAAU4S,EAAiBI,OAASJ,EAAiBK,SAClDzjB,EAAI,EAAGA,EAAIwQ,EAAQ5R,OAAQoB,IAChC,GAAIwQ,EAAQxQ,GAAG0jB,eAAiBvQ,EAC5B,IAAK,IAAIiD,EAAQ,EAAGA,EAAQ5F,EAAQxQ,GAAGqT,MAAMzU,OAAQwX,IAAS,CAC1D,IAAMuN,EAAenT,EAAQxQ,GAAGqT,MAAMpU,KAAKmX,GAC3CmN,EAAO,MACAA,EADA,eAEFI,EAAenT,EAAQxQ,GAAGqT,MAAMsQ,KAKjD,OAAOJ,GAGLK,EAAgB,CAClBC,QADkB,SACVC,GACJ,GAAqB,UAAjBA,EAAQtY,KAAkB,CAC1B,IAAMuY,EAAa,IAAIV,cAOvB,OANAU,EAAWF,QAAQC,EAAQ3f,SAAS,GAAGrF,MAEvC,YAAIilB,EAAWP,OAAO7f,KAAI,SAACqgB,GAAD,OACtBZ,EAAiBa,WAAWD,EAAKT,QAASH,EAAiBK,SAAS7kB,WAGjE,qCAGX,GAAqB,QAAjBklB,EAAQtY,KAAgB,CACxB,IAAMtH,EAAM4f,EAAQI,QAAQ,eAAiBJ,EAAQI,QAAQC,KAE7D,IAAKjgB,EAAK,OAAO4f,EACFA,EAAQM,OAAOjgB,SAASuJ,MAAK,SAAC2W,GACzC,OAAOA,EAAUH,SAAY,IAAMG,EAAUH,QAAQjgB,KAAOC,KAIpE,GAAqB,QAAjB4f,EAAQljB,OAAyD,IAAvCugB,GAAY5U,QAAQuX,EAAQtY,MAAc,CACpEsY,EAAQI,QAAUJ,EAAQI,SAAW,GAD+B,MAGlCJ,EAAQI,QAAlCI,MAAOnR,OAHqD,MAGzC,GAHyC,EAK/C,MAAjB2Q,EAAQtY,KACRsY,EAAQI,QAAR,MACOJ,EAAQI,QADf,GAEOZ,EAAa,IAAD,OAAKQ,EAAQI,QAAQI,QAFxC,CAGIA,MAAM,SAAD,OAAWnR,KAGpB2Q,EAAQI,QAAR,MACOJ,EAAQI,QADf,GAEOZ,EAAa,IAAD,OAAKQ,EAAQI,QAAQI,QAFxC,CAGIA,MAAOnR,IAInB,OAAO2Q,IAqDfpgB,qBAAU,WACNsf,EAAcH,EArOF,IAqOuB,MACpC,CAACA,IAEJ1hB,oBAAS,WACLH,EAAMb,SAASqG,GAAG,YAAY,SAACyB,GAAD,OAAWkb,EAAelb,QACzD,IAvImB,IAyIHsc,EAAsB,CACrC,CACI7O,UAAW,SAAA8O,GAAC,OAAI,kBAAC,GAAmBA,IACpCC,UAA2B,WAAhBvB,GAEf,CACIxN,UAAW,SAAA8O,GAAC,OAAI,kBAAC,GAAiBA,IAClCC,UAA2B,SAAhBvB,GAEf,CACIxN,UAAW,SAAA8O,GAAC,OAAI,kBAAC,GAAsBA,IACvCC,UAA2B,cAAhBvB,IAEjBxV,MAAK,sBAAG+W,aAbF/O,UAeR,OAEI,6BACI,yBAAKvC,UAAW3C,EAAQ8Q,MACpB,kBAAC,GAAD,CACIpJ,SA7EK,SAACD,GAClB,IAAIyM,EAAaC,IAAM1M,EAAK2L,GAExBgB,MAAMC,QAAQH,KACdA,EAAaA,EAAWhX,MAAK,SAAAzO,GAAI,MACb,kBAATA,GAAmC,QAAdA,EAAK2B,SAIzC,IAAMmgB,EAAU3a,SAASuR,cAAc,OAGvCuD,IAAS4J,OAAOJ,EAAY3D,GAAS,WACjC7F,IAAS6J,uBAAuBhE,GAChCkC,EAAWlC,EAAQ5b,WAAW,QAgEtBiT,SA5DK,WACjB,IAAM5G,EAAUpL,SAAS2M,eAAe,iBADjB,EAEC,CAAC,QAAS,UAAUpP,KAAI,SAACqhB,GAAD,OAC5CxT,EAAQkM,eAAe,KAAMsH,MAHV,mBAEhBzlB,EAFgB,KAETC,EAFS,KAMjBylB,EAAQ,yDAAqD1lB,EAArD,qBAAuEC,EAAvE,2BACR4G,SAAS2M,eAAe,oBAAoBmS,UADpC,oBAIRC,EAAO,IAAInO,KAAK,CAACiO,IACvBG,iBAAOD,EAAD,kBAAkB,IAAIE,MAAQC,cAA9B,UAkDMjN,YA/CQ,WACpB4K,GAAYvd,QAAQT,QAiDhB,yBAAKkO,UAAW3C,EAAQ7L,MACpB,kBAAC4gB,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,CACI3C,KAAMA,EACNtP,QAAQ,YACRJ,UAAWsS,YAAKjV,EAAQoR,QAAT,mBACVpR,EAAQ+R,WAAaM,GADX,cAEVrS,EAAQgS,aAAeK,GAFb,IAIfrS,QAAS,CACLoO,MAAO6G,YAAKjV,EAAQ8R,aAAT,mBACN9R,EAAQ+R,WAAaM,GADf,cAENrS,EAAQgS,aAAeK,GAFjB,MAMf,yBAAK1P,UAAW3C,EAAQuE,SACpB,kBAACK,EAAA,EAAD,CAAYkB,QArKN,WACtBwM,GAAQ,KAsKoC,QAApBvL,EAAM/K,UACA,kBAAC,IAAD,MACA,kBAAC,IAAD,OAGd,kBAAC4I,EAAA,EAAD,CACI5B,MAAM,UACNoK,aAAW,cACXtH,QAnLC,WACrBwM,GAAQ,IAmLY4C,KAAK,QACLvS,UAAWsS,YAAK,eACXjV,EAAQ2R,KAAOU,KAGpB,kBAAC,IAAD,QAGR,kBAAC1E,EAAA,EAAD,MACA,kBAAC,GAAD,CAAavS,OAnFP,SAAC4Y,EAAGmB,GACtB,IAAM5E,EAAU3a,SAASuR,cAAc,OAEvCuD,IAAS4J,OACL,6BAAM3V,IAAMwI,cAAN,MAAAxI,IAAK,YAAkBwW,KAC7B5E,GACA,WACI7F,IAAS6J,uBAAuBhE,GAChC3a,SAASyC,cAAc,qBAAqBzD,YAAY2b,EAAQ5b,WAAW,GAAGA,WAAW,UA4ErF,kBAACgZ,EAAA,EAAD,OAEJ,yBAAKhL,UAAW3C,EAAQiR,iBACpB,kBAACmE,EAAA,EAAD,CAEIzS,UAAWsS,YAAKjV,EAAQkR,OAAT,eACVlR,EAAQwR,YAAca,KAG3B,kBAAC,GAAD,OAGJ,yBAAKxP,MAAO,CAAEtD,SAAU,WAAYvQ,OAAQ,SACxC,kBAAC,GAAD,CACIujB,WAAYA,EACZ8C,UAAW,GACXpV,YA3TR,IA4TQmE,YAAY,QAEX3P,GAEL,kBAACsf,EAAD,CAAmBhlB,MAhUvB,aC5BL,SAASumB,KACpB,OACI,kBAAC,GAAD,MCGR,IAAMC,GAAaC,YAAe,CAC9BrH,QAAS,CACLtE,QAAS,CACLkH,KAAM,UACN0E,UAAW,UACXC,aAAc,QAElBC,UAAW,CACP5E,KAAM,WAEV6E,MAAO,CACH7E,KAAM,UACN8E,MAAO,WAEXC,QAAS,CACL/E,KAAM,UACN8E,MAAO,WAEXtM,KAAM,CACFM,QAAS,sBACT8L,UAAW,uBAEf9P,SAAU,CACNgE,QAAS,UACT8L,UAAW,YAGnBI,WAAY,CACRlL,SAAU,GACVmL,WAAY,SACZC,WAAY,iGAEZC,UAAW,CACPrL,SAAU,GACVmL,WAAY,KAEhBG,GAAI,CACAtL,SAAU,GACVmL,WAAY,IACZvf,WAAY,KAEhB2f,GAAI,CACAvL,SAAU,GACVmL,WAAY,KAEhBK,GAAI,CACAxL,SAAU,GACVmL,WAAY,KAEhBM,SAAU,CACNtT,MAAO,UACP6H,SAAU,GACVmL,WAAY,IACZvf,WAAY,QAEhB8f,QAAS,CACL1L,SAAU,SACVmL,WAAY,MAGpBQ,SAAU,CACNC,QAAS,CACLvI,aAAc,UAElBwI,WAAY,CACR/W,UAAW,8DAEfgX,WAAY,CACRhX,UAAW,wGAEfiX,WAAY,CACRjX,UAAW,sCAiBRkX,OAZf,WACI,OACI,kBAAC,IAAD,CAAUxmB,MAAOA,GACb,kBAACymB,EAAA,EAAD,CAAe/P,MAAOwO,IAClB,yBAAK5S,UAAU,OACX,kBAAC2S,GAAD,UC7EApgB,QACW,cAA7BkL,OAAO2W,SAASC,UAEe,UAA7B5W,OAAO2W,SAASC,UAEhB5W,OAAO2W,SAASC,SAASC,MACvB,2DCZNvM,IAAS4J,OAAO,kBAAC,GAAD,MAAS1e,SAAS2M,eAAe,SD2H3C,kBAAmB2U,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.234aab43.chunk.js","sourcesContent":["class UndoStack {\r\n\r\n    constructor(self) {\r\n        this.stack = [null];\r\n        this.step = -1;\r\n        this.self = self;\r\n    }\r\n\r\n    next() {\r\n        const { stack } = this;\r\n        if (stack[stack.length - 1] !== null) {\r\n            this.step++;\r\n            stack.push(null);\r\n        }\r\n    }\r\n\r\n    setItem(data) {\r\n        const { stack } = this;\r\n        stack[stack.length - 1] = data;\r\n\r\n        if (stack.length > 9) {\r\n            stack.shift();\r\n        };\r\n    }\r\n\r\n    push(data) {\r\n        this.step++;\r\n\r\n        this.stack.splice(this.step);\r\n        this.stack.push(data);\r\n    }\r\n\r\n    undo() {\r\n        let item;\r\n        const { stack } = this;\r\n\r\n        if (this.step >= 0) {\r\n            item = stack[this.step];\r\n            this.step--;\r\n            return item;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    redo() {\r\n        const { stack } = this;\r\n\r\n        this.step = this.step === -1 ? 0 : this.step;\r\n        if (stack.length - 1 > this.step) {\r\n            return stack[this.step++];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    invalidateAll() {\r\n        this.stack = [];\r\n        this.step = -1;\r\n    }\r\n\r\n}\r\n\r\nexport default UndoStack;","import EventBus from 'js-event-bus';\r\nimport UndoStack from '../containers/UndoStack';\r\n\r\nconst initialState = {\r\n    editorAction: 'edit',\r\n    editorGrid: true,\r\n    editorGridSize: 10,\r\n    editorPaperSize: {\r\n        width: 800,\r\n        height: 600\r\n    },\r\n    allowDragging: true,\r\n    allowResizing: true,\r\n    allowRotating: true,\r\n    allowProportions: true,\r\n    allowRestrictions: false,\r\n    allowRotationOrigin: false,\r\n    snapSteps: {\r\n        x: 10,\r\n        y: 10,\r\n        angle: 15\r\n    },\r\n    eventBus: new EventBus(),\r\n    undoStack: new UndoStack(),\r\n    items: [],\r\n    globalData: new WeakMap()\r\n};\r\n\r\nfunction rootReducer(state = { ...initialState }, action) {\r\n    switch (action.type) {\r\n\r\n        case 'SET_EDITOR_ACTION':\r\n            return {\r\n                ...state,\r\n                editorAction: action.editorAction\r\n            };\r\n        case 'ACTIVATE_EDITOR_GRID':\r\n            return {\r\n                ...state,\r\n                editorGrid: action.editorGrid\r\n            };\r\n        case 'SET_EDITOR_GRID_SIZE':\r\n            return {\r\n                ...state,\r\n                editorGridSize: action.editorGridSize\r\n            };\r\n        case 'SET_EDITOR_PAPER_SIZE':\r\n            return {\r\n                ...state,\r\n                editorPaperSize: action.editorPaperSize\r\n            };\r\n        case 'SET_ALLOW_DRAGGING':\r\n            return {\r\n                ...state,\r\n                allowDragging: action.allowDragging\r\n            };\r\n        case 'SET_ALLOW_RESIZING':\r\n            return {\r\n                ...state,\r\n                allowResizing: action.allowResizing\r\n            };\r\n        case 'SET_ALLOW_ROTATING':\r\n            return {\r\n                ...state,\r\n                allowRotating: action.allowRotating\r\n            };\r\n        case 'SET_ALLOW_PROPORTIONS':\r\n            return {\r\n                ...state,\r\n                allowProportions: action.allowProportions\r\n            };\r\n        case 'SET_ALLOW_RESTRICTIONS':\r\n            return {\r\n                ...state,\r\n                allowRestrictions: action.allowRestrictions\r\n            };\r\n        case 'SET_ALLOW_ROTATION_ORIGIN':\r\n            return {\r\n                ...state,\r\n                allowRotationOrigin: action.allowRotationOrigin\r\n            };\r\n        case 'SET_SNAP_STEPS':\r\n            return {\r\n                ...state,\r\n                snapSteps: action.snapSteps\r\n            };\r\n        case 'SET_SELECTED_ITEMS':\r\n            return {\r\n                ...state,\r\n                items: action.items\r\n            };\r\n        default:\r\n            return state;\r\n\r\n    }\r\n};\r\n\r\nexport default rootReducer;","import { createStore } from 'redux';\r\nimport rootReducer from '../reducers';\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nexport default store;","import React, { useEffect, useState, useRef, useCallback } from 'react';\n\nconst ZoomableGroup = (props) => {\n    let zoomEl = useRef(null);\n    const [transform, setTransform] = useState('matrix(1,0,0,1,0,0)');\n    const mouse = { x: 0, y: 0, oldX: 0, oldY: 0, button: false };\n    const matrix = [1, 0, 0, 1, 0, 0];\n    let scale = 1;\n    const pos = { x: 0, y: 0 };\n\n    const view = (() => {\n        const m = matrix;\n\n        let dirty = true;\n        const API = {\n            applyTo() {\n                if (dirty) { this.update(); }\n                setTransform(`matrix(${m.join(',')})`);\n            },\n            update() {\n                dirty = false;\n                m[3] = m[0] = scale.toFixed(5);\n                m[2] = m[1] = 0;\n                m[4] = pos.x.toFixed(5);\n                m[5] = pos.y.toFixed(5);\n            },\n            pan(amount) {\n                if (dirty) { this.update(); }\n                pos.x += amount.x;\n                pos.y += amount.y;\n                dirty = true;\n            },\n            scaleAt(at, amount) {\n                const prescale = scale * amount;\n                if (prescale < 0.4 || prescale > 5) return;\n\n                if (dirty) { this.update(); }\n                scale *= amount;\n                pos.x = at.x - (at.x - pos.x) * amount;\n                pos.y = at.y - (at.y - pos.y) * amount;\n                dirty = true;\n            }\n        };\n        return API;\n    })();\n\n    const mouseEvent = useCallback((event) => {\n        if (props.enable === false) return;\n        const el = zoomEl.current;\n        if (event.type === 'mousedown') { mouse.button = true; }\n        if (event.type === 'mouseup' || event.type === 'mouseout') { mouse.button = false; }\n        mouse.oldX = mouse.x;\n        mouse.oldY = mouse.y;\n        mouse.x = event.clientX;\n        mouse.y = event.clientY;\n        if (mouse.button) {\n            view.pan({ x: mouse.x - mouse.oldX, y: mouse.y - mouse.oldY });\n            view.applyTo(el);\n        }\n        event.preventDefault();\n    });\n\n    const mouseWheelEvent = useCallback((e) => {\n        if (props.enable === false) return;\n        const el = zoomEl.current;\n        const offset = el.parentNode.getBoundingClientRect();\n        const x = e.clientX - offset.left;\n        const y = e.clientY - offset.top;\n\n        view.scaleAt({ x, y }, e.deltaY < 0 ? 1.1 : (1 / 1.1));\n        view.applyTo(el);\n        e.preventDefault();\n    }, [props.enable]);\n\n    const resetZoom = useCallback(() => {\n        scale = 1;\n        pos.x = pos.y = 0;\n        matrix[0] = matrix[3] = 1;\n        matrix[1] = matrix[2] = matrix[4] = matrix[5] = 0;\n        view.pan(pos);\n        view.scaleAt({ x: 0, y: 0 }, 1);\n        view.applyTo(zoomEl.current);\n    });\n\n    const events = [\n        ['mousemove', mouseEvent],\n        ['mousedown', mouseEvent],\n        ['mouseup', mouseEvent],\n        ['mouseout', mouseEvent],\n        ['wheel', mouseWheelEvent],\n        ['dblclick', resetZoom]\n    ];\n\n    useEffect(() => {\n        const el = zoomEl.current;\n\n        if (props.enable) {\n            events.map(([eventName, eventFunc]) => {\n                el.parentNode.addEventListener(eventName, eventFunc, { passive: false });\n            });\n        }\n\n        return () => {\n            events.map(([eventName, eventFunc]) => {\n                el.parentNode.removeEventListener(eventName, eventFunc, { passive: false });\n            });\n        };\n    }, [props.enable]);\n\n    return (\n        <g id='zoom-container' ref={zoomEl} transform={transform}>\n            {props.children}\n        </g>\n    );\n};\n\nexport default ZoomableGroup;","import React from 'react';\nimport { connect } from 'react-redux';\nimport subjx from 'subjx';\nimport DragSelect from 'dragselect';\nimport { setSelectedItems } from '../../actions';\n\nconst textItemEvents = [\n    'letterSpacing',\n    'wordSpacing',\n    'lineHeight',\n    'textContent'\n];\n\nconst subjxConfiguration = {\n    container: '#editor-container',\n    controlsContainer: '#controls-container',\n    rotatorAnchor: 'n',\n    rotatorOffset: 30\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n    $setSelectedItems: (act) => dispatch(setSelectedItems(act))\n});\n\nconst mapStateToProps = (state) => ({\n    editorGridSize: state.editorGridSize,\n    allowDragging: state.allowDragging,\n    allowResizing: state.allowResizing,\n    allowRotating: state.allowRotating,\n    allowProportions: state.allowProportions,\n    allowRestrictions: state.allowRestrictions,\n    allowRotationOrigin: state.allowRotationOrigin,\n    snapSteps: state.snapSteps,\n    eventBus: state.eventBus,\n    undoStack: state.undoStack\n});\n\nclass EditorContainer extends React.Component {\n\n    root = null;\n    editable = false;\n    selectable = null;\n    items = [];\n    currentGroup = null;\n    ignoreStoring = false;\n\n    shouldComponentUpdate(nextProps) {\n        if (this.root) {\n            if (nextProps.content !== this.props.content) {\n                this.dropItems();\n                this.currentGroup = this.root;\n\n                if (nextProps.content && nextProps.content.childNodes) {\n                    while (nextProps.content.childNodes.length) {\n                        this.root.appendChild(nextProps.content.firstChild);\n                    }\n                } else {\n                    this.handleDropLayer();\n                    while (this.root.lastElementChild) {\n                        this.root.removeChild(this.root.lastElementChild);\n                    }\n                }\n            }\n        }\n\n        if (nextProps.dropLayer) {\n            this.handleDropLayer();\n        }\n\n        if (\n            (nextProps.dropItems === true || !nextProps.editable) &&\n            this.items.length\n        ) {\n            this.dropItems();\n        }\n\n        if (nextProps.selectable !== Boolean(this.selectable)) {\n            if (nextProps.selectable) {\n                this.selectable = this.makeSelectables();\n            }\n            if (!nextProps.selectable && this.selectable) {\n                this.selectable.stop();\n                this.selectable = null;\n            }\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        this.currentGroup = this.root;\n\n        this.handleClick = this.handleClick.bind(this);\n        this.handleDoubleClick = this.handleDoubleClick.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n        this.handleUndo = this.handleUndo.bind(this);\n        this.handleRedo = this.handleRedo.bind(this);\n        this.reloadDraggables = this.reloadDraggables.bind(this);\n\n        this.root.addEventListener('mouseup', this.handleClick);\n        this.root.addEventListener('dblclick', this.handleDoubleClick);\n        document.addEventListener('keydown', this.handleKeyDown);\n\n        this.root.classList.add('isolated-layer');\n\n        this.subscribeToEvents();\n    }\n\n    componentWillUnmount() {\n        this.root.removeEventListener('mouseup', this.handleClick);\n        this.root.removeEventListener('dblclick', this.handleDoubleClick);\n        document.removeEventListener('keydown', this.handleKeyDown);\n    }\n\n    subscribeToEvents() {\n        const { props: { eventBus } } = this;\n        eventBus.on('undo', this.handleUndo);\n        eventBus.on('redo', this.handleRedo);\n        eventBus.on('settingUpdated', this.reloadDraggables);\n\n        Object.entries({\n            fill: 'fill',\n            stroke: 'stroke',\n            thickness: 'stroke-width',\n            opacity: 'opacity',\n            letterSpacing: 'letter-spacing',\n            wordSpacing: 'word-spacing',\n            lineHeight: 'line-height',\n            textContent: 'text-content'\n        }).map(([event, attribute]) => eventBus.on(event, (val) => {\n            this.items.forEach(item => {\n                if (val !== undefined) item.elements.map(el => el.setAttributeNS(null, attribute, val));\n                if (textItemEvents.includes(event)) {\n                    item.fitControlsToSize();\n                    const { te } = item.storage.handles;\n\n                    const lx1 = te.x1.baseVal.value;\n                    const ly1 = te.y1.baseVal.value;\n                    const lx2 = te.x2.baseVal.value;\n                    const ly2 = te.y2.baseVal.value;\n\n                    const lineLength = [lx1 - lx2, ly1 - ly2];\n\n                    const [nextX, nextY] = this.calcTooltipPosition(\n                        [lx2, ly2],\n                        lineLength,\n                        -30,\n                        45\n                    );\n\n                    const tooltip = item.controls.querySelector('.delete-sjx-item');\n                    tooltip.setAttributeNS(null, 'transform', `translate(${nextX - 12}, ${nextY - 12})`);\n                }\n            });\n        }));\n\n        Object.entries({\n            l: 'alignLeft',\n            r: 'alignRight',\n            h: 'alignHorizontal',\n            t: 'alignTop',\n            b: 'alignBottom',\n            v: 'alignVertical'\n        }).map(([key, event]) => eventBus.on(event, () => this.applyAlignment(key)));\n    }\n\n    setEditable(value) {\n        this.editable = value;\n    }\n\n    setDraggable(target) {\n        const self = this;\n        const {\n            items,\n            props\n        } = this;\n\n        const {\n            undoStack,\n            allowDragging,\n            allowResizing,\n            allowRotating,\n            allowProportions,\n            allowRestrictions,\n            allowRotationOrigin,\n            snapSteps\n        } = props;\n\n        const nextDraggable = subjx(target).drag({\n            ...subjxConfiguration,\n            ...(allowRestrictions && { restrict: '#editor-grid' }),\n            draggable: allowDragging,\n            resizable: allowResizing,\n            rotatable: allowRotating,\n            rotationPoint: allowRotationOrigin,\n            proportions: allowProportions,\n            snap: {\n                x: snapSteps.x,\n                y: snapSteps.y,\n                angle: snapSteps.y\n            },\n            onInit() {\n                // eslint-disable-next-line no-console\n                console.log('Draggable:: ', this.elements);\n\n                this.options.scalable = this.elements.length === 1 && this.elements[0].tagName.toLowerCase() === 'text';\n\n                // disables selection if active\n                if (self.selectable && self.props.selectable) {\n                    self.selectable.stop();\n                }\n\n                const { te } = this.storage.handles;\n\n                const lx1 = te.x1.baseVal.value;\n                const ly1 = te.y1.baseVal.value;\n                const lx2 = te.x2.baseVal.value;\n                const ly2 = te.y2.baseVal.value;\n\n                const lineLength = [lx1 - lx2, ly1 - ly2];\n\n                const [nextX, nextY] = self.calcTooltipPosition(\n                    [lx2, ly2],\n                    lineLength,\n                    -30,\n                    45\n                );\n\n                const tooltip = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n                tooltip.setAttributeNS(null, 'transform', `translate(${nextX - 12}, ${nextY - 12})`);\n                tooltip.classList.add('delete-sjx-item');\n\n                const actionButton = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n                actionButton.setAttributeNS(null, 'd', 'M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8');\n                actionButton.setAttributeNS(null, 'pointer-events', 'bounding-box');\n                actionButton.setAttributeNS(null, 'fill', 'rgb(237, 28, 36)');\n\n                tooltip.addEventListener('click', () => {\n                    self.removeDraggable(this);\n                });\n                tooltip.appendChild(actionButton);\n\n                this.controls.appendChild(tooltip);\n            },\n            onResize({ dx, dy }) {\n                self.setEditable(true);\n\n                const { tr, tl } = this._getVertices();\n\n                const lx1 = tl.x;\n                const ly1 = tl.y;\n                const lx2 = tr.x;\n                const ly2 = tr.y;\n\n                const lineLength = [lx1 - lx2, ly1 - ly2];\n\n                const [nextX, nextY] = self.calcTooltipPosition(\n                    [lx2, ly2],\n                    lineLength,\n                    -30,\n                    45\n                );\n\n                const tooltip = this.controls.querySelector('.delete-sjx-item');\n                tooltip.setAttributeNS(null, 'transform', `translate(${nextX - 12}, ${nextY - 12})`);\n\n                if (self.ignoreStoring) return self.ignoreStoring = false;\n                const { revX, revY, doW, doH } = this.storage;\n\n                undoStack.setItem({\n                    name: 'resize',\n                    el: this.elements,\n                    data: {\n                        dx,\n                        dy,\n                        revX,\n                        revY,\n                        doW,\n                        doH\n                    }\n                });\n            },\n            onMove({ dx, dy }) {\n                self.setEditable(true);\n\n                const { tr, tl } = this._getVertices();\n\n                const lx1 = tl.x;\n                const ly1 = tl.y;\n                const lx2 = tr.x;\n                const ly2 = tr.y;\n\n                const lineLength = [lx1 - lx2, ly1 - ly2];\n\n                const [nextX, nextY] = self.calcTooltipPosition(\n                    [lx2, ly2],\n                    lineLength,\n                    -30,\n                    45\n                );\n\n                const tooltip = this.controls.querySelector('.delete-sjx-item');\n                tooltip.setAttributeNS(null, 'transform', `translate(${nextX - 12}, ${nextY - 12})`);\n\n                if (self.ignoreStoring) return self.ignoreStoring = false;\n                undoStack.setItem({ name: 'move', el: this.elements, data: [dx, dy] });\n            },\n            onRotate({ delta }) {\n                self.setEditable(true);\n\n                const { tr, tl } = this._getVertices();\n\n                const lx1 = tl.x;\n                const ly1 = tl.y;\n                const lx2 = tr.x;\n                const ly2 = tr.y;\n\n                const lineLength = [lx1 - lx2, ly1 - ly2];\n\n                const [nextX, nextY] = self.calcTooltipPosition(\n                    [lx2, ly2],\n                    lineLength,\n                    -30,\n                    45\n                );\n\n                const tooltip = this.controls.querySelector('.delete-sjx-item');\n                tooltip.setAttributeNS(null, 'transform', `translate(${nextX - 12}, ${nextY - 12})`);\n\n                if (self.ignoreStoring) return self.ignoreStoring = false;\n                undoStack.setItem({ name: 'rotate', data: delta, el: this.elements });\n            },\n            onDrop() {\n                setTimeout(() => (\n                    self.setEditable(false)\n                ), 100);\n\n                //this.elements.map(el => subjx(el).css({ transform: el.getAttribute('transform') }));\n\n                if (self.ignoreStoring) return self.ignoreStoring = false;\n                undoStack.next();\n            },\n            onDestroy() {\n                setTimeout(() => (\n                    self.setEditable(false)\n                ), 100);\n                this.elements.map((el) => el.classList.remove('subjx-selected'));\n                // enables selection if active\n                if (self.selectable && self.props.selectable) {\n                    self.selectable.start();\n                }\n            }\n        });\n\n        this.props.eventBus.emit('settings', null, 'item');\n        this.props.$setSelectedItems({ items: [...this.items, nextDraggable] });\n        return nextDraggable;\n    }\n\n    reloadDraggables() {\n        const { items } = this;\n        const newItems = items.map((item) => {\n            item.disable();\n            return [item.elements];\n        });\n\n        this.items = [...this.setDraggable(newItems)];\n    }\n\n    removeDraggable(draggable) {\n        const { items } = this;\n\n        items.splice(items.indexOf(draggable), 1);\n        draggable.disable();\n\n        draggable.elements.map(el => el.parentNode.removeChild(el));\n        this.props.eventBus.emit('settings', null, 'canvas');\n    }\n\n    applyAlignment(direction) {\n        this.items.map((item) => {\n            item.applyAlignment(direction);\n            const { te } = item.storage.handles;\n\n            const lx1 = te.x1.baseVal.value;\n            const ly1 = te.y1.baseVal.value;\n            const lx2 = te.x2.baseVal.value;\n            const ly2 = te.y2.baseVal.value;\n\n            const lineLength = [lx1 - lx2, ly1 - ly2];\n\n            const [nextX, nextY] = this.calcTooltipPosition(\n                [lx2, ly2],\n                lineLength,\n                -30,\n                45\n            );\n\n            const tooltip = item.controls.querySelector('.delete-sjx-item');\n            tooltip.setAttributeNS(null, 'transform', `translate(${nextX - 12}, ${nextY - 12})`);\n        });\n    }\n\n    calcTooltipPosition(startPoint, lineLength, offset, angle) {\n        const [x, y] = startPoint;\n        const [lengthX, lengthY] = lineLength;\n\n        const theta = Math.atan2(\n            lengthY,\n            lengthX\n        ) - (angle * Math.PI / 180);\n\n        return [\n            Number(x) + offset * Math.cos(theta),\n            Number(y) + offset * Math.sin(theta)\n        ];\n    }\n\n    makeSelectables() {\n        const ds = new DragSelect({\n            selectables: this.currentGroup.children,\n            area: this.props.root.current\n        });\n\n        ds.subscribe('callback', ({ items: selected }) => {\n            const { items } = this;\n\n            while (items.length > 0) items.pop().disable();\n            if (!selected.length) return;\n\n            const newItems = this.setDraggable(selected);\n\n            this.items = [newItems];\n        });\n\n        return ds;\n    }\n\n    handleClick(e) {\n        if (this.editable || !this.props.editable) return;\n\n        const {\n            currentGroup,\n            items\n        } = this;\n\n        const target = [...currentGroup.childNodes]\n            .find((child) => (\n                !(child.classList && child.classList.contains('sjx-drag')) &&\n                child.contains(e.target)\n            )) || (currentGroup === e.target ? e.target : null);\n\n        //console.log('Target:: ', target);\n        //console.log('Current group:: ', currentGroup);\n\n        if (!target) return;\n\n        e.stopPropagation();\n\n        if (!e.ctrlKey) {\n            while (items.length > 0) items.pop().disable();\n        }\n\n        const newItems = this.setDraggable(target);\n\n        items.push(newItems);\n        this.items = items;\n    }\n\n    handleDoubleClick(e) {\n        e.preventDefault();\n        if (this.editable || !this.props.editable) return;\n\n        const { currentGroup } = this;\n\n        const target = [...currentGroup.childNodes]\n            .find((child) => (\n                (child.classList && child.classList.contains('sjx-drag')) &&\n                child.contains(e.target)\n            ));\n\n        if (target && target.tagName === 'g') {\n            this.dropItems();\n            this.currentGroup = target;\n            this.props.onLayerChange(\n                this.getLayerPath(target)\n            );\n            currentGroup.classList.remove('isolated-layer');\n            target.classList.add('isolated-layer');\n            this.applyCurrentGroupOpacity(target);\n        }\n    }\n\n    handleDropLayer() {\n        const { currentGroup } = this;\n        if (currentGroup === this.root) {\n            return this.props.onLayerChange(\n                this.getLayerPath(currentGroup)\n            );\n        }\n\n        this.dropItems();\n        currentGroup.classList.remove('isolated-layer');\n        const nextCurrentGroup = currentGroup.parentNode;\n        this.currentGroup = nextCurrentGroup;\n        this.props.onLayerChange(\n            this.getLayerPath(nextCurrentGroup)\n        );\n\n        this.dropCurrentGroupOpacity(currentGroup);\n        this.applyCurrentGroupOpacity(nextCurrentGroup);\n        nextCurrentGroup.classList.add('isolated-layer');\n    }\n\n    getLayerPath(target) {\n        let node = target;\n        let layerChain = '';\n\n        while (node !== this.root) {\n            layerChain = (node.getAttribute('id') || node.nodeName) + ' / ' + layerChain;\n            node = node.parentNode;\n        }\n\n        return layerChain;\n    }\n\n    dropItems(nextItems = []) {\n        const { items } = this;\n        while (items.length > 0) items.pop().disable();\n        this.items = nextItems;\n    }\n\n    handleKeyDown(e) {\n        const { items } = this;\n        if (e.keyCode === 46) {\n            while (items.length > 0) {\n                const item = items.pop();\n                item.disable();\n                item.el.parentNode.removeChild(item.el);\n            }\n        } else if (e.keyCode === 65 && e.ctrlKey) {\n            while (items.length > 0) items.pop().disable();\n            e.preventDefault();\n        } else if (e.keyCode === 67) {\n            // c\n        } else if (e.keyCode === 86) {\n            // v\n        } else if (e.keyCode > 36 && e.keyCode < 41) {\n            e.preventDefault();\n            items.forEach((item) => {\n                item.exeDrag({\n                    dx: e.keyCode === 37 || e.keyCode === 39 ? e.keyCode === 37 ? -10 : 10 : 0,\n                    dy: e.keyCode === 38 || e.keyCode === 40 ? e.keyCode === 38 ? -10 : 10 : 0\n                });\n            });\n        }\n    }\n\n    applyCurrentGroupOpacity(el) {\n        el.setAttributeNS(null, 'opacity', 1);\n        if (el === this.root) return;\n        [...el.parentNode.childNodes].forEach(child => {\n            if (child.tagName === 'g' && child !== el) child.setAttributeNS(null, 'opacity', 0.3);\n        });\n        this.applyCurrentGroupOpacity(el.parentNode);\n    }\n\n    dropCurrentGroupOpacity(el) {\n        [...el.parentNode.childNodes].forEach(child => {\n            if (child.tagName === 'g' && child !== el) child.setAttributeNS(null, 'opacity', 1);\n        });\n    }\n\n    handleUndo() {\n        const { undoStack } = this.props;\n\n        const item = undoStack.undo();\n\n        if (item) {\n            this.ignoreStoring = true;\n            this.handleAction(item, true);\n        }\n    }\n\n    handleRedo() {\n        const { undoStack } = this.props;\n\n        const item = undoStack.redo();\n\n        if (item) {\n            this.ignoreStoring = true;\n            this.handleAction(item, false);\n        }\n    }\n\n    handleAction(action = {}, revert) {\n        this.dropItems();\n\n        switch (action.name) {\n\n            case 'rotate': {\n                const delta = action.data;\n                const sjxEl = this.setDraggable(action.el);\n\n                sjxEl.exeRotate({ delta: delta * (revert ? -1 : 1) });\n                sjxEl.disable();\n\n                break;\n            }\n            case 'move': {\n                const [dx, dy] = action.data;\n                const sjxEl = this.setDraggable(action.el);\n\n                sjxEl.exeDrag({\n                    dx: dx * (revert ? -1 : 1),\n                    dy: dy * (revert ? -1 : 1)\n                });\n                sjxEl.disable();\n                break;\n            }\n            case 'resize': {\n                const { dx, dy, ...rest } = action.data;\n                const sjxEl = this.setDraggable(action.el);\n\n                sjxEl.exeResize({\n                    dx: dx * (revert ? -1 : 1),\n                    dy: dy * (revert ? -1 : 1),\n                    ...rest\n                });\n                sjxEl.disable();\n            }\n            default:\n                break;\n\n        }\n    }\n\n    render() {\n        return (\n            <g id='editable-content' ref={el => this.root = el} />\n        );\n    }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditorContainer);","export function setEditorAction({ editorAction }) {\r\n    return { type: 'SET_EDITOR_ACTION', editorAction };\r\n}\r\n\r\nexport function activateEditorGrid({ editorGrid }) {\r\n    return { type: 'ACTIVATE_EDITOR_GRID', editorGrid };\r\n}\r\n\r\nexport function setEditorGridSize({ editorGridSize }) {\r\n    return { type: 'SET_EDITOR_GRID_SIZE', editorGridSize };\r\n}\r\n\r\nexport function setEditorPaperSize({ editorPaperSize }) {\r\n    return { type: 'SET_EDITOR_PAPER_SIZE', editorPaperSize };\r\n}\r\n\r\nexport function setAllowDragging({ allowDragging }) {\r\n    return { type: 'SET_ALLOW_DRAGGING', allowDragging };\r\n}\r\n\r\nexport function setAllowResizing({ allowResizing }) {\r\n    return { type: 'SET_ALLOW_RESIZING', allowResizing };\r\n}\r\n\r\nexport function setAllowRotating({ allowRotating }) {\r\n    return { type: 'SET_ALLOW_ROTATING', allowRotating };\r\n}\r\n\r\nexport function setAllowProportions({ allowProportions }) {\r\n    return { type: 'SET_ALLOW_PROPORTIONS', allowProportions };\r\n}\r\n\r\nexport function setAllowRestrictions({ allowRestrictions }) {\r\n    return { type: 'SET_ALLOW_RESTRICTIONS', allowRestrictions };\r\n}\r\n\r\nexport function setAllowRotationOrigin({ allowRotationOrigin }) {\r\n    return { type: 'SET_ALLOW_ROTATION_ORIGIN', allowRotationOrigin };\r\n}\r\n\r\nexport function setSnapSteps({ snapSteps }) {\r\n    return { type: 'SET_SNAP_STEPS', snapSteps };\r\n}\r\n\r\nexport function setSelectedItems({ items }) {\r\n    return { type: 'SET_SELECTED_ITEMS', items };\r\n}","import React, { useState, useRef, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport ZoomableGroup from '../helpers/ZoomableGroup';\r\nimport EditorContent from './EditorContent';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    root: {\r\n        '-webkit-box-flex': 1,\r\n        '-ms-flex': 1,\r\n        flex: 1,\r\n        visibility: 'visible'\r\n    },\r\n    workArea: {\r\n        overflow: 'auto'\r\n    },\r\n    canvas: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0\r\n    },\r\n    canvasContent: {\r\n        backgroundColor: 'white'\r\n    },\r\n    page: {\r\n        boxShadow: '0px 0px 2px 1px #d1d1d1'\r\n    },\r\n    layerBar: {\r\n        position: 'absolute',\r\n        zIndex: 99999,\r\n        margin: 4\r\n    }\r\n}));\r\n\r\nconst canvasGrid = (paperSize, gridSize) => {\r\n    const grid = gridSize * 10;\r\n    return (\r\n        <g>\r\n            <defs>\r\n                <pattern\r\n                    id='smallGrid'\r\n                    width={gridSize}\r\n                    height={gridSize}\r\n                    fill='white'\r\n                    patternUnits='userSpaceOnUse'\r\n                >\r\n                    <path\r\n                        d={`M ${gridSize} 0 L 0 0 0 ${gridSize}`}\r\n                        fill='none'\r\n                        stroke='gray'\r\n                        strokeWidth='0.5'\r\n                        vectorEffect='non-scaling-stroke'\r\n                    />\r\n                </pattern>\r\n                <pattern id='grid' width={grid} height={grid} patternUnits='userSpaceOnUse'>\r\n                    <rect width={grid} height={grid} fill='url(#smallGrid)' />\r\n                    <path\r\n                        d={`M ${grid} 0 L 0 0 0 ${grid}`}\r\n                        fill='none'\r\n                        stroke='gray'\r\n                        strokeWidth='1'\r\n                        vectorEffect='non-scaling-stroke'\r\n                    />\r\n                </pattern>\r\n            </defs>\r\n            <rect x='0' y='0' width={paperSize.w} height={paperSize.h} fill='url(#grid)' />\r\n        </g>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        editorAction: state.editorAction,\r\n        editorGrid: state.editorGrid,\r\n        editorGridSize: state.editorGridSize,\r\n        editorPaperSize: state.editorPaperSize,\r\n        eventBus: state.eventBus\r\n    };\r\n};\r\n\r\nconst EditorCanvas = (props) => {\r\n    const classes = useStyles();\r\n    const {\r\n        editorAction,\r\n        editorGrid,\r\n        editorGridSize,\r\n        editorPaperSize,\r\n        // leftOffset,\r\n        // topOffset,\r\n        rightOffset,\r\n        children: content\r\n    } = props;\r\n\r\n    const {\r\n        width: initialW,\r\n        height: initialH\r\n    } = editorPaperSize;\r\n\r\n    const [paperWidth, paperHeight] = [window.outerWidth, window.outerHeight];\r\n\r\n    const [paperSize, setPaperSize] = useState({\r\n        w: initialW,\r\n        h: initialH,\r\n        x: (paperWidth - initialW) / 2,\r\n        y: (paperHeight - initialH) / 2\r\n    });\r\n\r\n    let canvasEl = null;\r\n    let controlsRef = null;\r\n    const workAreaRef = useRef(null);\r\n    const containerAreaRef = useRef(null);\r\n    const rootSVG = useRef(null);\r\n\r\n    const [localAction, setLocalAction] = useState(null);\r\n    const [layersBar, setLayersBar] = useState(null);\r\n    const [dropLayer, setParentLayer] = useState(false);\r\n    const [startPoint, setStartPoint] = useState({ x: 0, y: 0 });\r\n\r\n    const [dropItems, setDropItems] = useState(false);\r\n\r\n    const scrollToRef = (ref) => {\r\n        const container = containerAreaRef.current;\r\n        container.scrollTop = (ref.current.clientHeight - container.clientHeight) / 2;\r\n        container.scrollLeft = (ref.current.clientWidth - container.clientWidth) / 2;\r\n    };\r\n\r\n    useEffect(() => {\r\n        scrollToRef(workAreaRef);\r\n    }, [paperSize]);\r\n\r\n    // TODO: adopt to size of imported SVG\r\n    // useEffect(() => {\r\n    //     setPaperSize({\r\n    //         w: contentWidth > initialW ? contentWidth : initialW,\r\n    //         h: contentHeight > initialH ? contentHeight : initialH,\r\n    //         x: contentWidth > initialW ?  (paperWidth - contentWidth) / 2 : (paperWidth - initialW) / 2,\r\n    //         y: contentHeight > initialH ? (paperHeight - contentHeight) / 2 : (paperHeight - initialH) / 2\r\n    //     });\r\n    // }, [props.children]);\r\n\r\n    useEffect(() => {\r\n        setPaperSize({\r\n            w: initialW,\r\n            h: initialH,\r\n            x: (paperWidth - initialW) / 2,\r\n            y: (paperHeight - initialH) / 2\r\n        });\r\n    }, [props.editorPaperSize]);\r\n\r\n    const handleMouseDown = (e) => {\r\n        e.preventDefault();\r\n        switch (editorAction) {\r\n\r\n            case 'edit':\r\n                if (controlsRef.contains(e.target)) return;\r\n\r\n                if (!canvasEl.children[0].contains(e.target)) {\r\n                    setDropItems(true);\r\n                    props.eventBus.emit('settings', null, 'canvas');\r\n                    return setTimeout(() => setDropItems(false), 100);\r\n                }\r\n                break;\r\n            case 'grab':\r\n                const container = containerAreaRef.current;\r\n\r\n                setStartPoint({\r\n                    x: e.clientX,\r\n                    y: e.clientY,\r\n                    scrollTop: container.scrollTop,\r\n                    scrollLeft: container.scrollLeft\r\n                });\r\n                break;\r\n            case 'select':\r\n                //onCanvasDown(e);\r\n                break;\r\n            case 'zoom':\r\n                break;\r\n            case 'drawRect':\r\n                drawElement(e);\r\n                break;\r\n            default:\r\n                break;\r\n\r\n        }\r\n\r\n        setLocalAction(editorAction);\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        e.preventDefault();\r\n\r\n        switch (localAction) {\r\n\r\n            case 'grab': {\r\n                const dx = (startPoint.x - e.clientX) * 1; // scale\r\n                const dy = (startPoint.y - e.clientY) * 1; // scale\r\n\r\n                const container = containerAreaRef.current;\r\n                container.scrollTop = startPoint.scrollTop + dy;\r\n                container.scrollLeft = startPoint.scrollLeft + dx;\r\n                break;\r\n            }\r\n            case 'zoom': {\r\n                break;\r\n            }\r\n            case 'draw':\r\n                //drawSvgElement(e);\r\n                break;\r\n            default:\r\n                break;\r\n\r\n        }\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        setLocalAction(null);\r\n    };\r\n\r\n    const dropLayers = (e) => {\r\n        e.stopPropagation();\r\n        setParentLayer(true);\r\n    };\r\n\r\n    const svgPoint = (elem, x, y) => {\r\n        let p = elem.createSVGPoint();\r\n        p.x = x;\r\n        p.y = y;\r\n        return p.matrixTransform(elem.getScreenCTM().inverse());\r\n    };\r\n\r\n    const drawElement = (event) => {\r\n        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        rect.setAttributeNS(null, 'stroke-width', 2);\r\n        rect.setAttributeNS(null, 'fill', 'none');\r\n        rect.setAttributeNS(null, 'stroke', '#000');\r\n\r\n        const drawArea1 = document.getElementById('editor-background');\r\n\r\n        const start = svgPoint(drawArea1, event.clientX, event.clientY);\r\n        document.getElementById('editable-content').appendChild(rect);\r\n\r\n        const drawRect = (e) => {\r\n            let p = svgPoint(drawArea1, e.clientX, e.clientY);\r\n            let w = Math.abs(p.x - start.x);\r\n            let h = Math.abs(p.y - start.y);\r\n            if (p.x > start.x) {\r\n                p.x = start.x;\r\n            }\r\n\r\n            if (p.y > start.y) {\r\n                p.y = start.y;\r\n            }\r\n\r\n            rect.setAttributeNS(null, 'x', p.x);\r\n            rect.setAttributeNS(null, 'y', p.y);\r\n            rect.setAttributeNS(null, 'width', w);\r\n            rect.setAttributeNS(null, 'height', h);\r\n        };\r\n\r\n        const endDraw = () => {\r\n            drawArea1.removeEventListener('mousemove', drawRect);\r\n            drawArea1.removeEventListener('mouseup', endDraw);\r\n        };\r\n\r\n        drawArea1.addEventListener('mousemove', drawRect);\r\n        drawArea1.addEventListener('mouseup', endDraw);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {\r\n                layersBar && (\r\n                    <p className={classes.layerBar}>\r\n                        {layersBar}\r\n                        <Button\r\n                            style={{ marginLeft: 2 }}\r\n                            variant='contained'\r\n                            color='primary'\r\n                            size='small'\r\n                            onMouseUp={dropLayers}>\r\n                            Exit\r\n                        </Button>\r\n                    </p>\r\n                )\r\n            }\r\n            <div\r\n                id='work-area'\r\n                ref={containerAreaRef}\r\n                className={classes.workArea}\r\n                style={{\r\n                    top: 0, // topOffset,\r\n                    left: 0, // leftOffset,\r\n                    right: rightOffset,\r\n                    bottom: 0,\r\n                    position: 'absolute',\r\n                    cursor: 'auto',\r\n                    overflow: 'scroll'\r\n                }}\r\n                onMouseMove={handleMouseMove}\r\n                onMouseDown={handleMouseDown}\r\n                onMouseUp={handleMouseUp}\r\n            >\r\n                <div\r\n                    ref={workAreaRef}\r\n                    style={{\r\n                        display: 'inline-block',\r\n                        position: 'relative',\r\n                        width: paperWidth,\r\n                        height: paperHeight\r\n                    }}\r\n                >\r\n                    <svg\r\n                        id='editor-container'\r\n                        xmlns='http://www.w3.org/2000/svg'\r\n                        className={classes.canvas}\r\n                        width='100%'\r\n                        height='100%'\r\n                        overflow='visible'\r\n                        ref={rootSVG}\r\n                    >\r\n                        <ZoomableGroup enable={editorAction === 'zoom'}>\r\n                            <g id='content' transform={`translate(${paperSize.x}, ${paperSize.y})`}>\r\n                                <g id='editor-background'>\r\n                                    <rect id='editor-grid' x='0' y='0' width={paperSize.w} height={paperSize.h} fill='white' stroke='grey' />\r\n                                    {\r\n                                        editorGrid\r\n                                            ? canvasGrid(paperSize, editorGridSize)\r\n                                            : null\r\n                                    }\r\n                                </g>\r\n                                <g\r\n                                    id='editor-canvas'\r\n                                    ref={el => canvasEl = el}\r\n                                    className={classes.page}\r\n                                >\r\n                                    <EditorContent\r\n                                        root={rootSVG}\r\n                                        editable={editorAction === 'edit'}\r\n                                        selectable={editorAction === 'select'}\r\n                                        content={content}\r\n                                        onLayerChange={(value) => {\r\n                                            setLayersBar(value);\r\n                                            setParentLayer(false);\r\n                                        }}\r\n                                        dropLayer={dropLayer}\r\n                                        dropItems={dropItems}\r\n                                    />\r\n                                </g>\r\n                            </g>\r\n                        </ZoomableGroup>\r\n                        <g id='controls-container' ref={div => controlsRef = div} />\r\n                    </svg>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nEditorCanvas.defaultProps = {\r\n    grid: true,\r\n    mouseAction: 'edit',\r\n    initialW: 800,\r\n    initialH: 600\r\n};\r\n\r\nexport default connect(mapStateToProps)(EditorCanvas);","import React from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux';\r\nimport { IconButton } from '@material-ui/core';\r\n\r\nimport {\r\n    Layers as LayersIcon,\r\n    VerticalAlignCenter as AlignCenter,\r\n    VerticalAlignBottom as AlignIcon,\r\n    GridOn as GridOnIcon,\r\n    GridOff as GridOffIcon,\r\n    Undo as UndoIcon,\r\n    Redo as RedoIcon,\r\n    Navigation as NavigationIcon,\r\n    PanTool as PanToolIcon,\r\n    PhotoSizeSelectSmall as PhotoSizeSelectSmallIcon,\r\n    Search as SearchIcon,\r\n    Crop32Outlined as Rectangle,\r\n    FormatShapes as ShapeSettingsIcon,\r\n    Tune as CanvasSettingsIcon,\r\n    ControlCamera as AnimationIcon\r\n} from '@material-ui/icons';\r\n\r\nimport { setEditorAction, activateEditorGrid } from '../../actions';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    root: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        height: '100%'\r\n    },\r\n    flex: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        height: '100%',\r\n        marginLeft: 10\r\n    },\r\n    verticalDivider: {\r\n        width: '1px',\r\n        backgroundColor: 'white',\r\n        height: '30px'\r\n    },\r\n    toolbar: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: 2,\r\n        marginRight: 5\r\n    }\r\n}));\r\n\r\nconst ExtendedButton = withStyles({\r\n    root: {\r\n        color: 'rgba(0,0,0,0.65)',\r\n        padding: 6\r\n    }\r\n})(IconButton);\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        editorAction: state.editorAction,\r\n        editorGrid: state.editorGrid,\r\n        eventBus: state.eventBus\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    $setEditorAction: (act) => dispatch(setEditorAction(act)),\r\n    $activateEditorGrid: (act) => dispatch(activateEditorGrid(act))\r\n});\r\n\r\nconst EditorToolbar = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const {\r\n        editorAction,\r\n        editorGrid,\r\n        eventBus\r\n    } = props;\r\n\r\n    const setEditorAction = (editorAction) => () => {\r\n        props.$setEditorAction({ editorAction });\r\n    };\r\n\r\n    const activateEditorGrid = (editorGrid) => {\r\n        props.$activateEditorGrid({ editorGrid });\r\n    };\r\n\r\n    const buttons = [\r\n        { type: 'button', selected: editorAction === 'showLayers', component: <LayersIcon />, action: () => 'showLayers' },\r\n        { type: 'divider' },\r\n        { type: 'button', selected: editorAction === 'edit', component: <NavigationIcon />, action: setEditorAction('edit') },\r\n        { type: 'button', selected: editorAction === 'select', component: <PhotoSizeSelectSmallIcon />, action: setEditorAction('select') },\r\n        { type: 'button', selected: editorAction === 'grab', component: <PanToolIcon />, action: setEditorAction('grab') },\r\n        { type: 'button', selected: editorAction === 'zoom', component: <SearchIcon />, action: setEditorAction('zoom') },\r\n        { type: 'divider' },\r\n        // { type: 'button', selected: editorAction === 'zoom', component: <Rectangle />, action: setEditorAction('drawRect') },\r\n        // { type: 'divider' },\r\n        { type: 'button', selected: editorAction === 'alignLeft', component: <AlignIcon transform='rotate(90)' />, action: () => eventBus.emit('alignLeft') },\r\n        { type: 'button', selected: editorAction === 'alignHorizontal', component: <AlignCenter transform='rotate(90)' />, action: () => eventBus.emit('alignHorizontal') },\r\n        { type: 'button', selected: editorAction === 'alignRight', component: <AlignIcon transform='rotate(-90)' />, action: () => eventBus.emit('alignRight') },\r\n        { type: 'button', selected: editorAction === 'alignTop', component: <AlignIcon transform='rotate(180)' />, action: () => eventBus.emit('alignTop') },\r\n        { type: 'button', selected: editorAction === 'alignVertical', component: <AlignCenter transform='rotate(180)' />, action: () => eventBus.emit('alignVertical') },\r\n        { type: 'button', selected: editorAction === 'alignBottom', component: <AlignIcon />, action: () => eventBus.emit('alignBottom') },\r\n        { type: 'divider' },\r\n        { type: 'button', selected: editorGrid === true, component: <GridOnIcon />, action: () => activateEditorGrid(true) },\r\n        { type: 'button', selected: editorGrid === false, component: <GridOffIcon />, action: () => activateEditorGrid(false) },\r\n        { type: 'divider' },\r\n        { type: 'button', selected: false, component: <UndoIcon />, action: () => eventBus.emit('undo') },\r\n        { type: 'button', selected: false, component: <RedoIcon />, action: () => eventBus.emit('redo') }\r\n    ];\r\n\r\n    const options = [\r\n        { type: 'button', selected: false, component: <ShapeSettingsIcon />, action: () => eventBus.emit('settings', null, 'item') },\r\n        { type: 'button', selected: false, component: <CanvasSettingsIcon />, action: () => eventBus.emit('settings', null, 'canvas') },\r\n        { type: 'button', selected: false, component: <AnimationIcon />, action: () => eventBus.emit('settings', null, 'animation') }\r\n    ];\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.flex}>\r\n                {buttons.map(({ type, component, action, selected, value }, index) => (\r\n                    <div key={`${index}button`} className={classes.toolbar}>{\r\n                        type !== 'divider'\r\n                            ? <ExtendedButton disabled={selected} onClick={() => action()}>{component}</ExtendedButton>\r\n                            : <div className={classes.verticalDivider} />\r\n                    }</div>\r\n                ))}\r\n            </div>\r\n            <div className={classes.flex} style={{ width: '100%', justifyContent: 'flex-end' }}>\r\n                {options.map(({ type, component, action, selected, value }, index) => (\r\n                    <div key={`${index}button`} className={classes.toolbar}>{\r\n                        type !== 'divider'\r\n                            ? <ExtendedButton disabled={selected} onClick={() => action()}>{component}</ExtendedButton>\r\n                            : <div className={classes.verticalDivider} />\r\n                    }</div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EditorToolbar);","export function readText(filePath) {\r\n    return new Promise((resolve, reject) => {\r\n        if (window.File && window.FileReader && window.FileList && window.Blob) {\r\n            const reader = new FileReader();\r\n            let output = '';\r\n            if (filePath.files && filePath.files[0]) {\r\n                reader.onload = (e) => {\r\n                    output = e.target.result;\r\n                    resolve(output);\r\n                };\r\n                reader.readAsText(filePath.files[0]);\r\n            }\r\n        } else {\r\n            reject();\r\n        }\r\n    });\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ImportIcon from '@material-ui/icons/GetApp';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport Delete from '@material-ui/icons/Delete';\r\nimport { readText } from '../../util/fileReader';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: '0 8px'\r\n    },\r\n    extendedIcon: {\r\n        marginRight: theme.spacing(1)\r\n    }\r\n}));\r\n\r\nconst ExtendedButton = withStyles({\r\n    root: {\r\n        color: '#fff',\r\n        marginRight: '10px'\r\n    }\r\n})(IconButton);\r\n\r\nconst EditorMenu = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [fileSelector, setFileSelector] = useState(\r\n        document.createElement('input')\r\n    );\r\n\r\n    useEffect(() => {\r\n        const fileSelector = document.createElement('input');\r\n        fileSelector.setAttribute('type', 'file');\r\n        fileSelector.setAttribute('accept', 'image/*');\r\n        fileSelector.setAttribute('id', 'file-upload');\r\n        fileSelector.style.display = 'none';\r\n\r\n        setFileSelector(fileSelector);\r\n\r\n        const loadFiles = async (e) => {\r\n            try {\r\n                const res = await readText(e.target);\r\n                props.onImport(res);\r\n            } catch (err) {\r\n                // eslint-disable-next-line no-console\r\n                console.log(err);\r\n            }\r\n        };\r\n\r\n        fileSelector.addEventListener('change', loadFiles, false);\r\n    }, [props]);\r\n\r\n    const handleFileSelect = (e) => {\r\n        fileSelector.click();\r\n        e.preventDefault();\r\n        e.target.value = '';\r\n    };\r\n\r\n    const handleExportFile = () => {\r\n        props.onExport();\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <ExtendedButton onClick={handleFileSelect}>\r\n                <ImportIcon />\r\n            </ExtendedButton>\r\n            <ExtendedButton onClick={handleExportFile}>\r\n                <SaveIcon />\r\n            </ExtendedButton>\r\n            <ExtendedButton onClick={() => props.onClearArea()}>\r\n                <Delete />\r\n            </ExtendedButton>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EditorMenu;","import React, { useState, useEffect } from 'react';\r\nimport subjx from 'subjx';\r\nimport {\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText\r\n} from '@material-ui/core';\r\nimport {\r\n    Crop32Outlined as Rectangle,\r\n    RadioButtonUnchecked as Circle,\r\n    GradeOutlined as Shape,\r\n    //CropOriginalOutlined as Image,\r\n    TextFormat as Text\r\n} from '@material-ui/icons';\r\n\r\nconst items = [\r\n    ['rectangle', Rectangle],\r\n    ['circle', Circle],\r\n    ['shape', Shape],\r\n    ['text', Text]\r\n    // ['image', Image]\r\n];\r\n\r\nconst EditorItems = (props) => {\r\n    const droppables = [];\r\n    const [isCloneable, setAsCloneable] = useState(false);\r\n\r\n    const cloneConfig = {\r\n        appendTo: 'body',\r\n        stack: '#editor-background',\r\n        style: {\r\n            border: 'none',\r\n            background: 'transparent',\r\n            maxWidth: '150px',\r\n            textColor: 'transparent'\r\n        },\r\n        onInit() { },\r\n        onDrop(e) {\r\n            const itemType = this.elements[0].getAttribute('data-type');\r\n            let newItem = null;\r\n\r\n            const editorRef = document.querySelector('#editor-background');\r\n\r\n            const offset = editorRef.getBoundingClientRect(),\r\n                x = e.clientX - offset.left + editorRef.scrollLeft,\r\n                y = e.clientY - offset.top + editorRef.scrollTop;\r\n\r\n            switch (itemType) {\r\n\r\n                case 'rectangle':\r\n                    newItem = [\r\n                        'rect',\r\n                        {\r\n                            x,\r\n                            y,\r\n                            width: 150,\r\n                            height: 100,\r\n                            stroke: 'black',\r\n                            fill: 'transparent'\r\n                        }\r\n                    ];\r\n                    break;\r\n                case 'circle':\r\n                    newItem = [\r\n                        'ellipse',\r\n                        {\r\n                            cx: x,\r\n                            cy: y,\r\n                            rx: 45,\r\n                            ry: 45,\r\n                            stroke: 'black',\r\n                            fill: 'transparent'\r\n                        }\r\n                    ];\r\n                    break;\r\n                case 'shape':\r\n                    newItem = [\r\n                        'polygon',\r\n                        {\r\n                            strokeWidth: '1',\r\n                            stroke: 'black',\r\n                            fill: \"transparent\",\r\n                            strokeDasharray: \"0\",\r\n                            points: `${x + 80},${y} ${x + 160},${y + 50} ${x + 80},${y + 100} ${x},${y + 50}`\r\n                        },\r\n                        []\r\n                    ];\r\n                    break;\r\n                case 'image':\r\n                    newItem = [\r\n                        'foreignObject',\r\n                        {\r\n                            x,\r\n                            y,\r\n                            width: 150,\r\n                            height: 100,\r\n                            stroke: 'black',\r\n                            fill: 'transparent'\r\n                        },\r\n                        [\r\n                            [\r\n                                'div',\r\n                                {\r\n                                    display: 'block'\r\n                                },\r\n                                ['text']\r\n                            ]\r\n                        ]\r\n                    ];\r\n                    break;\r\n                case 'text':\r\n                    newItem = [\r\n                        'text',\r\n                        {\r\n                            x,\r\n                            y\r\n                        },\r\n                        'text'\r\n                    ];\r\n                    break;\r\n                default:\r\n                    break;\r\n\r\n            }\r\n\r\n            props.onDrop(\r\n                e,\r\n                newItem\r\n            );\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isCloneable) return;\r\n        droppables.forEach(el => subjx(el).clone(cloneConfig));\r\n        setAsCloneable(true);\r\n    }, [droppables, isCloneable, cloneConfig]);\r\n\r\n    return (\r\n        <List>\r\n            {items.map(([text, Icon]) => (\r\n                <ListItem\r\n                    data-type={text}\r\n                    ref={(el) => droppables.push(el)}\r\n                    button\r\n                    key={text}\r\n                >\r\n                    <ListItemIcon>\r\n                        <Icon />\r\n                    </ListItemIcon>\r\n                    <ListItemText primary={text} />\r\n                </ListItem>\r\n            ))}\r\n        </List>\r\n    );\r\n};\r\n\r\nexport default EditorItems;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ChromePicker } from 'react-color';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () => ({\n    root: {\n        width: '50%',\n        padding: 0,\n        border: 0,\n        margin: 0,\n        display: 'inline-flex',\n        padding: 0,\n        position: 'relative',\n        flexDirection: 'column',\n        verticalAlign: 'top'\n    },\n    wrapper: {\n        padding: 10,\n        color: 'rgba(0, 0, 0, 0.87)',\n        cursor: 'text',\n        display: 'inline-flex',\n        position: 'relative',\n        fontSize: '1rem',\n        boxSizing: 'border-box',\n        alignItems: 'center',\n        lineHeight: '1.0876em'\n    },\n    colorPicker: {\n        flex: '0 1 100%',\n        border: 0,\n        height: '1.0876em',\n        margin: 0,\n        display: 'block',\n        padding: '6px 0 7px',\n        minWidth: 0,\n        background: 'none',\n        boxSizing: 'content-box',\n        border: '2px solid #c7c7c7',\n        borderRadius: 4\n    }\n});\n\nclass ColorPicker extends React.Component {\n\n    state = {\n        displayColorPicker: false,\n        currentColor: {\n            hex: this.props.initValue || this.props.value || 'transparent'\n        },\n        popover: {\n            position: 'absolute',\n            zIndex: '9999',\n            top: 0,\n            left: 0\n        }\n    };\n\n    componentDidUpdate() {\n        if (this.props.value !== this.state.currentColor.hex) {\n            this.setState({ currentColor: { hex: this.props.value } });\n        }\n    }\n\n    handleClick = (e) => {\n        const { clientX, clientY } = e;\n        const { clientWidth, clientHeight } = e.target;\n        this.setState({\n            displayColorPicker: !this.state.displayColorPicker,\n            popover: {\n                ...this.state.popover,\n                left: clientX - clientWidth,\n                top: clientY\n            }\n        });\n    };\n\n    handleClose = () => {\n        this.setState({ displayColorPicker: false });\n    };\n\n    handleChange = (color) => {\n        this.setState({ currentColor: color });\n        this.props.onChange(color);\n    };\n\n    render() {\n        const cover = {\n            position: 'fixed',\n            top: '0px',\n            right: '0px',\n            bottom: '0px',\n            left: '0px'\n        };\n\n        return (\n            <div className={this.props.classes.root}>\n                <div className={this.props.classes.wrapper}>\n                    <div className={this.props.classes.colorPicker} onClick={this.handleClick} style={{ backgroundColor: this.state.currentColor.hex }} />\n                </div>\n                {this.state.displayColorPicker ?\n                    ReactDOM.createPortal(\n                        <div style={this.state.popover}>\n                            <div style={cover} onClick={this.handleClose} />\n                            <ChromePicker color={this.state.currentColor} onChange={this.handleChange} />\n                        </div>,\n                        document.body\n                    ) : null}\n            </div>\n        );\n    }\n\n};\n\nexport default withStyles(styles)(ColorPicker);","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport {\n    TextField,\n    Checkbox,\n    FormGroup,\n    FormControlLabel,\n    Divider,\n    Typography,\n    Grid,\n    Slider\n} from '@material-ui/core';\n\nimport ColorPicker from '../../helpers/ColorPicker';\n\nimport {\n    setEditorPaperSize,\n    setAllowDragging,\n    setAllowResizing,\n    setAllowRotating,\n    setAllowProportions,\n    setAllowRestrictions,\n    setSnapSteps,\n    setEditorGridSize,\n    setAllowRotationOrigin\n} from '../../../actions';\n\nconst useStyles = makeStyles(() => ({\n    root: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n        bottom: 0,\n        backgroundColor: '#fdfdfd',\n        zIndex: 999\n    },\n    container: {\n        display: 'flex',\n        flex: 1\n    },\n    containerColumn: {\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    padding: {\n        padding: 10\n    },\n    label: {\n        paddingLeft: 10\n    }\n}));\n\nconst TextInput = withStyles({\n    root: {\n        margin: 10,\n        '& .MuiOutlinedInput-input': {\n            padding: '10px 10px'\n        }\n    }\n})(TextField);\n\nconst CheckboxLabel = withStyles({\n    root: {\n        margin: '0'\n    }\n})(FormControlLabel);\n\nconst mapStateToProps = (state) => ({\n    editorPaperSize: state.editorPaperSize,\n    allowDragging: state.allowDragging,\n    allowResizing: state.allowResizing,\n    allowRotating: state.allowRotating,\n    allowProportions: state.allowProportions,\n    allowRestrictions: state.allowRestrictions,\n    allowRotationOrigin: state.allowRotationOrigin,\n    snapSteps: state.snapSteps,\n    editorGridSize: state.editorGridSize,\n    eventBus: state.eventBus\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    $setEditorPaperSize: (act) => dispatch(setEditorPaperSize(act)),\n    $setAllowDragging: (act) => dispatch(setAllowDragging(act)),\n    $setAllowResizing: (act) => dispatch(setAllowResizing(act)),\n    $setAllowRotating: (act) => dispatch(setAllowRotating(act)),\n    $setAllowProportions: (act) => dispatch(setAllowProportions(act)),\n    $setAllowRestrictions: (act) => dispatch(setAllowRestrictions(act)),\n    $setSnapSteps: (act) => dispatch(setSnapSteps(act)),\n    $setEditorGridSize: (act) => dispatch(setEditorGridSize(act)),\n    $setAllowRotationOrigin: (act) => dispatch(setAllowRotationOrigin(act))\n});\n\nconst CanvasSettings = (props) => {\n    const classes = useStyles();\n\n    const {\n        editorPaperSize: { width, height },\n        allowDragging,\n        allowResizing,\n        allowRotating,\n        allowProportions,\n        allowRestrictions,\n        allowRotationOrigin,\n        editorGridSize,\n        snapSteps\n    } = props;\n\n    const [paperSize, setPaperSize] = useState({ width, height });\n    const [dragging, setDragging] = useState(allowDragging);\n    const [resizing, setResizing] = useState(allowResizing);\n    const [rotating, setRotating] = useState(allowRotating);\n    const [proportions, setProportions] = useState(allowProportions);\n    const [restrictions, setRestrictions] = useState(allowRestrictions);\n    const [rotatingOrigin, setRotatingOrigin] = useState(allowRotationOrigin);\n    const [snap, setSnap] = useState(snapSteps);\n    const [fill, setFill] = useState('none');\n\n    const handleChange = ([w, h]) => {\n        if (Number(w) < 1 || Number(h) < 1) return;\n\n        const editorPaperSize = { width: w, height: h };\n        setPaperSize(editorPaperSize);\n        props.$setEditorPaperSize({ editorPaperSize });\n    };\n\n    const handleSettings = (name) => (e) => {\n        const value = e.target.checked;\n\n        switch (name) {\n\n            case 'drag': {\n                setDragging(value);\n                props.$setAllowDragging({ allowDragging: value });\n                break;\n            }\n\n            case 'resize': {\n                setResizing(value);\n                props.$setAllowResizing({ allowResizing: value });\n                break;\n            }\n\n            case 'rotate': {\n                setRotating(value);\n                props.$setAllowRotating({ allowRotating: value });\n                break;\n            }\n\n            case 'proportions': {\n                setProportions(value);\n                props.$setAllowProportions({ allowProportions: value });\n                break;\n            }\n\n            case 'restrictions': {\n                setRestrictions(value);\n                props.$setAllowRestrictions({ allowRestrictions: value });\n                break;\n            }\n\n            case 'rotationOrigin': {\n                setRotatingOrigin(value);\n                props.$setAllowRotationOrigin({ allowRotationOrigin: value });\n                break;\n            }\n\n            default:\n                break;\n\n        }\n    };\n\n    const handleSnapChange = (value) => {\n        const snapValues = { ...snap, ...value };\n        setSnap(snapValues);\n        props.$setSnapSteps({ snapSteps: snapValues });\n    };\n\n    const handleColorPicker = (value) => {\n        setFill(value.hex);\n        document.getElementById('editor-grid').setAttributeNS(null, 'fill', value.hex);\n    };\n\n    useEffect(() => {\n        const background = document.getElementById('editor-grid');\n        setFill(background.getAttributeNS(null, 'fill'));\n    }, []);\n\n    return (\n        <div\n            className={classes.root}\n            style={{ width: props.width }}\n        >\n            <form>\n                <FormGroup aria-label='position'>\n                    <div className={classes.padding}>\n                        <Typography className={classes.label} variant='subtitle1' align='left'>Canvas</Typography>\n                        <div className={classes.container}>\n                            <TextInput label='width' value={paperSize.width} variant='outlined' size='small' onChange={(e) => handleChange([e.target.value, paperSize.height])} />\n                            <TextInput label='height' value={paperSize.height} variant='outlined' size='small' onChange={(e) => handleChange([paperSize.width, e.target.value])} />\n                        </div>\n                        <div className={classes.container}>\n                            <ColorPicker value={fill} onChange={handleColorPicker} />\n                        </div>\n                        <Grid container>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Grid size</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider valueLabelDisplay='auto' value={editorGridSize} onChange={(e, val) => props.$setEditorGridSize({ editorGridSize: val })} step={10} />\n                                </div>\n                            </Grid>\n                        </Grid>\n                    </div>\n                    <Divider />\n                    <div className={classes.padding}>\n                        <Typography className={classes.label} variant='subtitle1' align='left'>Effects</Typography>\n                        <div className={classes.containerColumn}>\n                            <CheckboxLabel\n                                value={dragging}\n                                control={<Checkbox checked={dragging} color='primary' onChange={handleSettings('drag')} />}\n                                label='Allow dragging'\n                                labelPlacement='end'\n                            />\n                            <CheckboxLabel\n                                value={resizing}\n                                control={<Checkbox checked={resizing} color='primary' onChange={handleSettings('resize')} />}\n                                label='Allow resizing'\n                                labelPlacement='end'\n                            />\n                            <CheckboxLabel\n                                value={rotating}\n                                control={<Checkbox checked={rotating} color='primary' onChange={handleSettings('rotate')} />}\n                                label='Allow rotating'\n                                labelPlacement='end'\n                            />\n                            <CheckboxLabel\n                                value={proportions}\n                                control={<Checkbox checked={proportions} color='primary' onChange={handleSettings('proportions')} />}\n                                label='Keep aspect ratio'\n                                labelPlacement='end'\n                            />\n                            <CheckboxLabel\n                                value={restrictions}\n                                control={<Checkbox checked={restrictions} color='primary' onChange={handleSettings('restrictions')} />}\n                                label='Activate bounding area'\n                                labelPlacement='end'\n                            />\n                            <CheckboxLabel\n                                value={rotatingOrigin}\n                                control={<Checkbox checked={rotatingOrigin} color='primary' onChange={handleSettings('rotationOrigin')} />}\n                                label='Use rotation origin'\n                                labelPlacement='end'\n                            />\n                        </div>\n                    </div>\n                    <Divider />\n                    <div className={classes.padding}>\n                        <Typography className={classes.label} variant='subtitle1' align='left'>Snap</Typography>\n                        <Grid container>\n                            <Grid item xs={6}>\n                                <TextInput label='grid step x' value={snap.x} variant='outlined' size='small' onChange={(e) => handleSnapChange({ x: Number(e.target.value) })} />\n                            </Grid>\n                            <Grid item xs={6}>\n                                <TextInput label='grid step y' value={snap.y} variant='outlined' size='small' onChange={(e) => handleSnapChange({ y: Number(e.target.value) })} />\n                            </Grid>\n                        </Grid>\n                        <Grid container>\n                            <Grid item xs={6}>\n                                <TextInput label='snap angle' value={snap.angle} variant='outlined' size='small' onChange={(e) => handleSnapChange({ angle: Number(e.target.value) })} />\n                            </Grid>\n                        </Grid>\n                    </div>\n                </FormGroup>\n            </form>\n        </div>\n    );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CanvasSettings);","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport ColorPicker from '../../helpers/ColorPicker';\n\nimport {\n    FormGroup,\n    FormControl,\n    Divider,\n    Typography,\n    Grid,\n    Slider,\n    Select,\n    InputBase\n} from '@material-ui/core';\n\nconst BootstrapInput = withStyles((theme) => ({\n    root: {\n        'label + &': {\n            marginTop: theme.spacing(3)\n        }\n    },\n    input: {\n        borderRadius: 4,\n        position: 'relative',\n        backgroundColor: theme.palette.background.paper,\n        border: '1px solid #ced4da',\n        fontSize: 16,\n        paddingLeft: 10,\n        transition: theme.transitions.create(['border-color', 'box-shadow']),\n        '&:focus': {\n            borderRadius: 4,\n            borderColor: '#80bdff',\n            boxShadow: '0 0 0 0.2rem rgba(0,123,255,.25)'\n        }\n    }\n}))(InputBase);\n\nconst useStyles = makeStyles(() => ({\n    root: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n        bottom: 0,\n        backgroundColor: '#fdfdfd',\n        zIndex: 999\n    },\n    container: {\n        display: 'flex',\n        flex: 1\n    },\n    containerColumn: {\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    padding: {\n        padding: 10\n    },\n    label: {\n        paddingLeft: 10,\n        width: '50%'\n    }\n}));\n\nconst mapStateToProps = (state) => ({\n    eventBus: state.eventBus,\n    selectedItems: state.items\n});\n\nconst ItemSettings = (props) => {\n    const classes = useStyles();\n\n    const { eventBus, selectedItems } = props;\n\n    const [fill, setFill] = useState('none');\n    const [fillOptions, setFillOptions] = useState('none');\n    const [stroke, setStroke] = useState('none');\n    const [strokeOptions, setStrokeOptions] = useState('none');\n    const [thickness, setThickness] = useState(2);\n    const [opacity, setOpacity] = useState(100);\n\n    const [textContent, setTextContent] = useState(null);\n    const [textProperties, setTextProperties] = useState({\n        letterSpacing: 5,\n        wordSpacing: 1,\n        lineHeight: 1\n    });\n\n    const setValue = (name, value, isEmit = true) => {\n        switch (name) {\n\n            case 'fill': {\n                setFill(value);\n                if (isEmit) eventBus.emit(name, null, value);\n                break;\n            }\n            case 'fillOptions': {\n                const nextVal = value === 'color' ? fill : 'none';\n                setFillOptions(value);\n                if (isEmit) eventBus.emit('fill', null, nextVal);\n                break;\n            }\n            case 'stroke': {\n                setStroke(value);\n                if (isEmit) eventBus.emit(name, null, value);\n                break;\n            }\n            case 'strokeOptions': {\n                const nextVal = value === 'color' ? stroke : 'none';\n                setStrokeOptions(value);\n                if (isEmit) eventBus.emit('stroke', null, nextVal);\n                break;\n            }\n            case 'thickness': {\n                const nextVal = value === null ? 2 : value;\n                setThickness(Number(nextVal));\n                if (isEmit) eventBus.emit(name, null, nextVal);\n                break;\n            }\n            case 'opacity': {\n                const nextVal = value === null ? 1 : value;\n                setOpacity(Number(nextVal) * 100);\n                if (isEmit) eventBus.emit(name, null, nextVal);\n                break;\n            }\n            case 'textContent': {\n                changeTextContent(value);\n                if (isEmit) eventBus.emit(name);\n                break;\n            }\n            case 'letterSpacing':\n            case 'wordSpacing':\n            case 'lineHeight': {\n                setTextProperties((prev) => ({ ...prev, [name]: value === null ? prev[name] : Number(value) }));\n                if (isEmit) eventBus.emit(name, null, value);\n                break;\n            }\n            default:\n                break;\n\n        }\n    };\n\n    const isTextTag = (tag) => tag.tagName.toLowerCase() === 'text';\n\n    useEffect(() => {\n        if (!selectedItems.length) return;\n\n        const textTag = isTextTag(selectedItems[0].elements[0]);\n\n        Object.entries({\n            fill: 'fill',\n            stroke: 'stroke',\n            thickness: 'stroke-width',\n            opacity: 'opacity',\n            ...(textTag && {\n                letterSpacing: 'letter-spacing',\n                wordSpacing: 'word-spacing',\n                lineHeight: 'line-height'\n            })\n        }).map(([event, attribute]) => {\n            setValue(\n                event,\n                selectedItems[0].elements[0].getAttributeNS(null, attribute),\n                false\n            );\n        });\n\n        if (textTag) {\n            setTextContent(selectedItems[0].elements[0].textContent || '');\n        } else {\n            setTextContent(null);\n        };\n    }, [selectedItems]);\n\n    const changeTextContent = (textContent) => {\n        setTextContent(textContent);\n        selectedItems[0].elements[0].textContent = textContent;\n    };\n\n    return (\n        <div\n            className={classes.root}\n            style={{ width: props.width }}\n        >\n            <form style={{ width: '100%' }}>\n                <FormGroup aria-label='position'>\n                    <div className={classes.padding}>\n                        <div className={classes.container}>\n                            <Typography className={classes.label} variant='subtitle1' align='left'>\n                                Fill\n                            </Typography>\n                        </div>\n                        <div className={classes.container}>\n                            <ColorPicker value={fill} onChange={(value) => setValue('fill', value.hex)} />\n                            <Select\n                                style={{ width: '50%', padding: 10 }}\n                                variant='outlined'\n                                native\n                                value={fillOptions}\n                                onChange={(e) => setValue('fillOptions', e.target.value)}\n                                name='age'\n                                input={<BootstrapInput value={fillOptions} />}\n                            >\n                                <option value={'none'}>none</option>\n                                <option value={'color'}>color</option>\n                            </Select>\n                        </div>\n                        <div className={classes.container}>\n                            <Typography className={classes.label} variant='subtitle1' align='left'>Stroke</Typography>\n                        </div>\n                        <div className={classes.container}>\n                            <ColorPicker value={stroke} onChange={(value) => setValue('stroke', value.hex)} />\n                            <Select\n                                style={{ width: '50%', padding: 10 }}\n                                variant='outlined'\n                                native\n                                value={strokeOptions}\n                                onChange={(e) => setValue('strokeOptions', e.target.value)}\n                                name='age'\n                                input={<BootstrapInput value={strokeOptions} />}\n                            >\n                                <option value={'none'}>none</option>\n                                <option value={'color'}>color</option>\n                            </Select>\n                        </div>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Thickness</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider\n                                        valueLabelDisplay='auto'\n                                        max={30}\n                                        value={thickness}\n                                        onChange={(e, val) => setValue('thickness', val)} step={1}\n                                    />\n                                </div>\n                            </Grid>\n                        </div>\n                    </div>\n                    <Divider />\n                    <div className={classes.padding}>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Opacity</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider\n                                        valueLabelDisplay='auto'\n                                        max={100}\n                                        value={opacity}\n                                        onChange={(e, val) => setValue('opacity', val / 100)} step={1}\n                                    />\n                                </div>\n                            </Grid>\n                        </div>\n                    </div>\n                    <Divider />\n                    {(textContent !== null) && <div className={classes.padding}>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Text</Typography>\n                                <BootstrapInput\n                                    style={{ padding: 10 }}\n                                    value={textContent}\n                                    onChange={(e) => setValue('textContent', e.target.value)}\n                                />\n                            </Grid>\n                        </div>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Letter space</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider\n                                        valueLabelDisplay='auto'\n                                        max={50}\n                                        value={textProperties.letterSpacing}\n                                        onChange={(e, val) => setValue('letterSpacing', val)} step={1}\n                                    />\n                                </div>\n                            </Grid>\n                        </div>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Word space</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider\n                                        valueLabelDisplay='auto'\n                                        max={100}\n                                        value={textProperties.wordSpacing}\n                                        onChange={(e, val) => setValue('wordSpacing', val)} step={1}\n                                    />\n                                </div>\n                            </Grid>\n                        </div>\n                        <div className={classes.container}>\n                            <Grid item xs={12}>\n                                <Typography className={classes.label} variant='subtitle1' align='left'>Line height</Typography>\n                                <div style={{ display: 'flex', alignItems: 'center', padding: '0 10px' }}>\n                                    <Slider\n                                        valueLabelDisplay='auto'\n                                        max={200}\n                                        value={textProperties.lineHeight}\n                                        onChange={(e, val) => setValue('lineHeight', val)} step={1}\n                                    />\n                                </div>\n                            </Grid>\n                        </div>\n                    </div>}\n                </FormGroup>\n            </form>\n        </div>\n    );\n};\n\nexport default connect(mapStateToProps)(ItemSettings);","import React, { useEffect, useState, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport subjx from 'subjx';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\n\nimport {\n    FormGroup,\n    FormControl,\n    Divider,\n    Typography,\n    Grid,\n    Slider,\n    Select,\n    InputBase,\n    TextField,\n    IconButton\n} from '@material-ui/core';\n\nconst TextInput = withStyles({\n    root: {\n        margin: 10,\n        '& .MuiOutlinedInput-input': {\n            padding: '10px 10px'\n        }\n    }\n})(TextField);\n\nconst BootstrapInput = withStyles((theme) => ({\n    root: {\n        'label + &': {\n            marginTop: theme.spacing(3)\n        }\n    },\n    input: {\n        borderRadius: 4,\n        position: 'relative',\n        backgroundColor: theme.palette.background.paper,\n        border: '1px solid #ced4da',\n        fontSize: 16,\n        paddingLeft: 10,\n        transition: theme.transitions.create(['border-color', 'box-shadow']),\n        '&:focus': {\n            borderRadius: 4,\n            borderColor: '#80bdff',\n            boxShadow: '0 0 0 0.2rem rgba(0,123,255,.25)'\n        }\n    }\n}))(InputBase);\n\nconst useStyles = makeStyles(() => ({\n    root: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n        bottom: 0,\n        backgroundColor: '#fdfdfd',\n        zIndex: 999\n    },\n    container: {\n        display: 'flex',\n        flex: 1\n    },\n    containerColumn: {\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    padding: {\n        padding: 10\n    },\n    label: {\n        paddingLeft: 10,\n        width: '50%'\n    }\n}));\n\nconst mapStateToProps = (state) => ({\n    globalData: state.globalData,\n    selectedItems: state.items\n});\n\nconst AnimationSettings = (props) => {\n    const classes = useStyles();\n    const { globalData, selectedItems } = props;\n\n    const [keyframes, setKeyframes] = useState([]);\n    const [frameType, setFrameType] = useState('translateX');\n    const [frameValue, setFrameValue] = useState('');\n    const [duration, setDuration] = useState(5000);\n\n    const frameTypes = [\n        'translateX',\n        'translateY',\n        'translateZ',\n        'rotate',\n        'rotateX',\n        'rotateY',\n        'rotateZ',\n        'scale',\n        'scaleX',\n        'scaleY',\n        'scaleZ',\n        'skew',\n        'skewX',\n        'skewY',\n        'perspective'\n    ];\n\n    const setValue = (name, value) => {\n        switch (name) {\n\n            case 'frameType': {\n                setFrameType(value);\n                break;\n            }\n\n            case 'frameValue': {\n                setFrameValue(value);\n                break;\n            }\n\n            case 'duration': {\n                setDuration(value);\n                break;\n            }\n\n            default:\n                break;\n\n        }\n    };\n\n    const addKeyframe = () => {\n        setKeyframes([\n            ...keyframes,\n            {\n                frameType,\n                frameValue: parseFloat(frameValue),\n                duration: parseFloat(duration)\n            }\n        ]);\n    };\n\n    const playAnimation = useCallback(() => {\n        if (!selectedItems.length) return;\n\n        const clones = [...selectedItems[0].elements].map((element) => {\n            const el = element.cloneNode(true);\n            subjx(el).css({ transform: el.getAttributeNS(null, 'transform') });\n            element.parentNode.appendChild(el);\n            return el;\n        });\n    }, [selectedItems, keyframes]);\n\n    useEffect(() => {\n        if (!selectedItems.length) return;\n    }, [selectedItems]);\n\n    return (\n        <div\n            className={classes.root}\n            style={{ width: props.width }}\n        >\n            <form style={{ width: '100%' }}>\n                <FormGroup aria-label='position'>\n                    <div className={classes.padding}>\n                        <Grid container>\n                            <Typography className={classes.label} variant='subtitle1' align='left'>\n                                Keyframes\n                            </Typography>\n                        </Grid>\n                        <Grid container>\n                            <Grid item xs={6}>\n                                <Select\n                                    style={{ margin: 10 }}\n                                    variant='outlined'\n                                    native\n                                    value={frameType}\n                                    onChange={(e) => setValue('frameType', e.target.value)}\n                                    name='age'\n                                    input={<BootstrapInput value={1} />}\n                                >\n                                    {frameTypes.map((type) => <option key={type} value={type}>{type}</option>)}\n                                </Select>\n                            </Grid>\n                            <Grid item xs={6}>\n                                <TextInput\n                                    label='value'\n                                    variant='outlined'\n                                    size='small'\n                                    value={frameValue}\n                                    onChange={(e) => setValue('frameValue', e.target.value)}\n                                />\n                            </Grid>\n                        </Grid>\n                        <Grid container>\n                            <Grid item xs={6}>\n                                <TextInput\n                                    label='duration'\n                                    variant='outlined'\n                                    size='small'\n                                    value={duration}\n                                    onChange={(e) => setValue('duration', e.target.value)}\n                                />\n                            </Grid>\n                        </Grid>\n                        <div style={{ display: 'flex', justifyContent: 'end' }}>\n                            <AddIcon onClick={addKeyframe} />\n                        </div>\n                        <Grid container>\n                            {keyframes.map(({ frameType, duration }, index) => (\n                                <Grid key={`${index}-${frameType}`} container>\n                                    <Grid item xs={6}>{frameType}</Grid>\n                                    <Grid item xs={6}>{duration}</Grid>\n                                </Grid>\n                            ))}\n                        </Grid>\n                        <IconButton variant='outlined' onClick={playAnimation}>\n                            <PlayArrowIcon />\n                        </IconButton>\n                    </div>\n                </FormGroup>\n            </form>\n        </div>\n    );\n};\n\nexport default connect(mapStateToProps)(AnimationSettings);","import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { connect } from 'react-redux';\r\nimport clsx from 'clsx';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport parse from 'html-react-parser';\r\nimport { saveAs } from 'file-saver';\r\nimport 'construct-style-sheets-polyfill';\r\n\r\nimport {\r\n    Drawer,\r\n    AppBar,\r\n    CssBaseline,\r\n    Divider,\r\n    IconButton\r\n} from '@material-ui/core';\r\n\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\n\r\nimport EditorCanvas from './EditorCanvas';\r\nimport EditorToolbar from './EditorToolbar';\r\nimport EditorMenu from './EditorMenu';\r\nimport EditorItems from './EditorItems';\r\nimport { CanvasSettings, ItemSettings, AnimationSettings } from './settings';\r\n\r\nconst allowedSvgs = [\r\n    'g', 'rect', 'path', 'polygon', 'polyline',\r\n    'circle', 'ellipse', 'text', 'line', 'foreighobject'\r\n];\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst mapStateToProps = (state) => ({\r\n    eventBus: state.eventBus\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        marginTop: 46,\r\n        minHeight: 'calc(100vh - 46px)',\r\n        height: 'calc(100vh - 46px)',\r\n        justifyItems: 'center',\r\n        backgroundColor: '#e6e5e5'\r\n    },\r\n    menu: {\r\n        display: 'flex',\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        height: 46,\r\n        width: '100%',\r\n        zIndex: 999,\r\n        backgroundColor: theme.palette.primary.main\r\n    },\r\n    canvas: {\r\n        flexGrow: 1\r\n        // overflow: 'hidden auto'\r\n    },\r\n    canvasContainer: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        flexDirection: 'column'\r\n    },\r\n    appBar: {\r\n        borderTop: '1px solid #fff',\r\n        color: 'rgba(0,0,0,0.65)',\r\n        backgroundColor: 'rgb(230 229 229)',\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        transition: theme.transitions.create(['width', 'margin'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen\r\n        }),\r\n        position: 'relative',\r\n        height: 46\r\n    },\r\n    appBarShift: {\r\n        // marginLeft: drawerWidth,\r\n        // width: `calc(100% - ${drawerWidth}px)`,\r\n        transition: theme.transitions.create(['width', 'margin'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.enteringScreen\r\n        })\r\n    },\r\n    menuButton: {\r\n        marginRight: 36\r\n    },\r\n    hide: {\r\n        display: 'none'\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n        whiteSpace: 'nowrap'\r\n    },\r\n    drawerPaper: {\r\n        position: 'relative',\r\n        backgroundColor: '#fdfdfd'\r\n    },\r\n    drawerOpen: {\r\n        width: drawerWidth,\r\n        transition: theme.transitions.create('width', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.enteringScreen\r\n        })\r\n    },\r\n    drawerClose: {\r\n        transition: theme.transitions.create('width', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen\r\n        }),\r\n        overflowX: 'hidden',\r\n        width: theme.spacing(7) + 1,\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: theme.spacing(7) + 1\r\n        }\r\n    },\r\n    toolbar: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'flex-end',\r\n        padding: theme.spacing(0, 1)\r\n    },\r\n    content: {\r\n        flexGrow: 1,\r\n        padding: theme.spacing(2)\r\n    }\r\n}));\r\n\r\nconst Editor = (props) => {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [open, setOpen] = useState(false);\r\n    const [leftOffset, setLeftOffset] = useState(57);\r\n    const [content, setContent] = useState(null);\r\n    const [settingsTab, setSettingsTab] = useState('canvas');\r\n\r\n    const parsedStyleSheet = new CSSStyleSheet();\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const getStyleRule = (className) => {\r\n        let cssText = {};\r\n        const classes = parsedStyleSheet.rules || parsedStyleSheet.cssRules;\r\n        for (let x = 0; x < classes.length; x++) {\r\n            if (classes[x].selectorText === className) {\r\n                for (let index = 0; index < classes[x].style.length; index++) {\r\n                    const propertyName = classes[x].style.item(index);\r\n                    cssText = {\r\n                        ...cssText,\r\n                        [propertyName]: classes[x].style[propertyName]\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        return cssText;\r\n    };\r\n\r\n    const parserOptions = {\r\n        replace(domNode) {\r\n            if (domNode.name === 'style') {\r\n                const styleSheet = new CSSStyleSheet();\r\n                styleSheet.replace(domNode.children[0].data);\r\n\r\n                [...styleSheet.rules].map((rule) => (\r\n                    parsedStyleSheet.insertRule(rule.cssText, parsedStyleSheet.cssRules.length)\r\n                ));\r\n\r\n                return <></>;\r\n            }\r\n\r\n            if (domNode.name === 'use') {\r\n                const ref = domNode.attribs['xlink:href'] || domNode.attribs.href;\r\n\r\n                if (!ref) return domNode;\r\n                const source = domNode.parent.children.find((childNode) => {\r\n                    return childNode.attribs && ('#' + childNode.attribs.id === ref);\r\n                });\r\n            }\r\n\r\n            if (domNode.type === 'tag' && allowedSvgs.indexOf(domNode.name) !== -1) {\r\n                domNode.attribs = domNode.attribs || {};\r\n\r\n                const { class: className = '' } = domNode.attribs;\r\n\r\n                if (domNode.name === 'g') {\r\n                    domNode.attribs = {\r\n                        ...domNode.attribs,\r\n                        ...getStyleRule(`.${domNode.attribs.class}`),\r\n                        class: `layer ${className}`\r\n                    };\r\n                } else {\r\n                    domNode.attribs = {\r\n                        ...domNode.attribs,\r\n                        ...getStyleRule(`.${domNode.attribs.class}`),\r\n                        class: className\r\n                    };\r\n                }\r\n            }\r\n            return domNode;\r\n        }\r\n    };\r\n\r\n    const handleImport = (res) => {\r\n        let reactSVGEl = parse(res, parserOptions);\r\n\r\n        if (Array.isArray(reactSVGEl)) {\r\n            reactSVGEl = reactSVGEl.find(item => (\r\n                typeof item === 'object' && item.type === 'svg'\r\n            ));\r\n        }\r\n\r\n        const element = document.createElement('div');\r\n        // this is a temporary decision to convert html to dom\r\n        // maybe in the future it is need to use react way to import complex html tree\r\n        ReactDOM.render(reactSVGEl, element, () => {\r\n            ReactDOM.unmountComponentAtNode(element);\r\n            setContent(element.childNodes[0]);\r\n        });\r\n    };\r\n\r\n    const handleExport = () => {\r\n        const rootSVG = document.getElementById('editor-canvas');\r\n        const [width, height] = ['width', 'height'].map((attr) => (\r\n            rootSVG.getAttributeNS(null, attr)\r\n        ));\r\n\r\n        const rootHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${width}\" height=\"${height}\">\r\n            ${document.getElementById('editable-content').innerHTML}\r\n        </svg>`;\r\n\r\n        const blob = new Blob([rootHTML]);\r\n        saveAs(blob, `export_${(new Date()).toISOString()}.svg`);\r\n    };\r\n\r\n    const handleClearArea = () => {\r\n        setContent(!Boolean(content));\r\n    };\r\n\r\n    const appendNewItem = (_, nodeProps) => {\r\n        const element = document.createElement('div');\r\n\r\n        ReactDOM.render(\r\n            <svg>{React.createElement(...nodeProps)}</svg>,\r\n            element,\r\n            () => {\r\n                ReactDOM.unmountComponentAtNode(element);\r\n                document.querySelector('#editable-content').appendChild(element.childNodes[0].childNodes[0]);\r\n            }\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        setLeftOffset(open ? drawerWidth : 57);\r\n    }, [open]);\r\n\r\n    useState(() => {\r\n        props.eventBus.on('settings', (value) => setSettingsTab(value));\r\n    }, []);\r\n\r\n    const { component: SettingsComponent } = [\r\n        {\r\n            component: _ => <CanvasSettings {..._} />,\r\n            condition: settingsTab === 'canvas'\r\n        },\r\n        {\r\n            component: _ => <ItemSettings {..._} />,\r\n            condition: settingsTab === 'item'\r\n        },\r\n        {\r\n            component: _ => <AnimationSettings {..._} />,\r\n            condition: settingsTab === 'animation'\r\n        }\r\n    ].find(({ condition }) => !!condition);\r\n\r\n    return (\r\n        // <div style={{ paddingTop: '60px' }}></div>\r\n        <div>\r\n            <div className={classes.menu}>\r\n                <EditorMenu\r\n                    onImport={handleImport}\r\n                    onExport={handleExport}\r\n                    onClearArea={handleClearArea}\r\n                />\r\n            </div>\r\n            <div className={classes.root}>\r\n                <CssBaseline />\r\n                <Drawer\r\n                    open={open}\r\n                    variant='permanent'\r\n                    className={clsx(classes.drawer, {\r\n                        [classes.drawerOpen]: open,\r\n                        [classes.drawerClose]: !open\r\n                    })}\r\n                    classes={{\r\n                        paper: clsx(classes.drawerPaper, {\r\n                            [classes.drawerOpen]: open,\r\n                            [classes.drawerClose]: !open\r\n                        })\r\n                    }}\r\n                >\r\n                    <div className={classes.toolbar}>\r\n                        <IconButton onClick={handleDrawerClose}>\r\n                            {\r\n                                theme.direction === 'rtl'\r\n                                    ? <ChevronRightIcon />\r\n                                    : <ChevronLeftIcon />\r\n                            }\r\n                        </IconButton>\r\n                        <IconButton\r\n                            color='inherit'\r\n                            aria-label='open drawer'\r\n                            onClick={handleDrawerOpen}\r\n                            edge='start'\r\n                            className={clsx({\r\n                                [classes.hide]: open\r\n                            })}\r\n                        >\r\n                            <ChevronRightIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <EditorItems onDrop={appendNewItem} />\r\n                    <Divider />\r\n                </Drawer>\r\n                <div className={classes.canvasContainer}>\r\n                    <AppBar\r\n                        // position='fixed'\r\n                        className={clsx(classes.appBar, {\r\n                            [classes.appBarShift]: open\r\n                        })}\r\n                    >\r\n                        <EditorToolbar />\r\n                    </AppBar>\r\n                    {/* <div className={classes.content}> */}\r\n                    <div style={{ position: 'relative', height: '100%' }}>\r\n                        <EditorCanvas\r\n                            leftOffset={leftOffset}\r\n                            topOffset={87}\r\n                            rightOffset={drawerWidth}\r\n                            mouseAction='edit'\r\n                        >\r\n                            {content}\r\n                        </EditorCanvas>\r\n                        <SettingsComponent width={drawerWidth} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default connect(mapStateToProps)(Editor);","import React from 'react';\r\nimport Editor from './editor';\r\n\r\nexport default function Main() {\r\n    return (\r\n        <Editor />\r\n    );\r\n}","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport './App.css';\nimport store from './store';\nimport Main from './components/Main';\n\nconst outerTheme = createMuiTheme({\n    palette: {\n        primary: {\n            main: '#00a8ff', // '#0c9696',\n            auxiliary: '#0a7e95',\n            contrastText: '#fff'\n        },\n        secondary: {\n            main: '#43a047'\n        },\n        error: {\n            main: '#f33732',\n            hover: '#b71c1c'\n        },\n        warning: {\n            main: '#f57c00',\n            hover: '#ffa726'\n        },\n        text: {\n            primary: 'rgba(0, 0, 0, 0.87)',\n            secondary: 'rgba(0, 0, 0, 0.54)'\n        },\n        disabled: {\n            primary: '#1b202a',\n            secondary: '#757575'\n        }\n    },\n    typography: {\n        fontSize: 14,\n        fontWeight: 'normal',\n        fontFamily: '-apple-system,system-ui,BlinkMacSystemFont,' +\n            '\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif',\n        subtitle1: {\n            fontSize: 12,\n            fontWeight: 400\n        },\n        h6: {\n            fontSize: 18,\n            fontWeight: 400,\n            lineHeight: 1.5\n        },\n        h5: {\n            fontSize: 20,\n            fontWeight: 400\n        },\n        h4: {\n            fontSize: 22,\n            fontWeight: 400\n        },\n        overline: {\n            color: '#546e7a',\n            fontSize: 11,\n            fontWeight: 500,\n            lineHeight: '13px'\n        },\n        caption: {\n            fontSize: '0.8rem',\n            fontWeight: 400\n        }\n    },\n    MuiPaper: {\n        rounded: {\n            borderRadius: '0.2rem'\n        },\n        elevation1: {\n            boxShadow: '0 1px 5px 0 rgba(0,0,0,0.16), 0 1px 5px 0 rgba(0,0,0,0.12)'\n        },\n        elevation2: {\n            boxShadow: '0px 3px 1px -2px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 1px 5px 0px rgba(0,0,0,0.12)'\n        },\n        elevation4: {\n            boxShadow: '0 5px 10px -5px rgba(0,0,0,0.5)'\n        }\n    }\n});\n\nfunction App() {\n    return (\n        <Provider store={store}>\n            <ThemeProvider theme={outerTheme}>\n                <div className=\"App\">\n                    <Main />\n                </div>\n            </ThemeProvider>\n        </Provider>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}